//
// THIS FILE IS AUTOMATICALLY GENERATED!!
//
// Generated at Fri 10-Jan-97 by the VDM-SLtoC++ Code Generator
// (vdmde - v3.0l - Fri 10-Jan-97)
//
// Supported compiler: g++ version 2.7.2
//



#include "AUX.h"

#define vdm_AUX_CurrentModule vdm_STATE_CurrentModule
#define vdm_AUX_ExtractModule vdm_STATE_ExtractModule
#define vdm_AUX_GetImplModule vdm_STATE_GetImplModule
#define vdm_AUX_GetModule vdm_STATE_GetModule
#define vdm_AUX_LookUpRename vdm_STATE_LookUpRename
#define vdm_AUX_PopBlkEnv vdm_STATE_PopBlkEnv
#define vdm_AUX_PushBlkEnv vdm_STATE_PushBlkEnv
#define vdm_AUX_TopBlkEnv vdm_STATE_TopBlkEnv

static Bool vdm_AUX_Min(Record, Set);
static Sequence vdm_AUX_RestSeqStmt(Sequence, Int);
static Sequence vdm_AUX_RestSeqVal(Sequence, Int);

void init_AUX() {}

Bool vdm_AUX_EqualNames(Record var_1_1, Record var_2_2) {
  Sequence vdm_AUX_name1;
  Sequence vdm_AUX_name2;
  bool succ_3 = true;
  {
    succ_3 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_Name == var_1_1.GetTag()) {
        Sequence e_l_7;
        for (int i_8 = 1; i_8 <= var_1_1.Length(); i_8++) 
          e_l_7.ImpAppend(var_1_1.GetField(i_8));
        if (succ_3 = 2 == (Int) (e_l_7.Length())) {
          Generic permI_9;
          permI_9 = (Generic) (e_l_7.Hd());
          succ_3 = true;
          {
            vdm_AUX_name1 = permI_9;
            succ_3 = true;
          }
          permI_9 = (Generic) (e_l_7[2]);
          if (succ_3) 
            succ_3 = true;
        }
      }
  }
  {
    succ_3 = false;
    if (var_2_2.IsRecord()) 
      if (vdm_AS_Name == var_2_2.GetTag()) {
        Sequence e_l_10;
        for (int i_11 = 1; i_11 <= var_2_2.Length(); i_11++) 
          e_l_10.ImpAppend(var_2_2.GetField(i_11));
        if (succ_3 = 2 == (Int) (e_l_10.Length())) {
          Generic permI_12;
          permI_12 = (Generic) (e_l_10.Hd());
          succ_3 = true;
          {
            vdm_AUX_name2 = permI_12;
            succ_3 = true;
          }
          permI_12 = (Generic) (e_l_10[2]);
          if (succ_3) 
            succ_3 = true;
        }
      }
  }
  if (!succ_3) 
    RunTime("Pattern Match in Function Apply in function : EqualNames failed");
  return (Bool) (vdm_AUX_name1 == vdm_AUX_name2);
}

Sequence vdm_AUX_ExtractId(Record var_1_1) {
  Sequence varRes_3;
  Sequence vdm_AUX_name;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_Name == var_1_1.GetTag()) {
        Sequence e_l_7;
        for (int i_8 = 1; i_8 <= var_1_1.Length(); i_8++) 
          e_l_7.ImpAppend(var_1_1.GetField(i_8));
        if (succ_2 = 2 == (Int) (e_l_7.Length())) {
          Generic permI_9;
          permI_9 = (Generic) (e_l_7.Hd());
          succ_2 = true;
          {
            vdm_AUX_name = permI_9;
            succ_2 = true;
          }
          permI_9 = (Generic) (e_l_7[2]);
          if (succ_2) 
            succ_2 = true;
        }
      }
  }
  if (!succ_2) 
    RunTime("Pattern Match in Function Apply in function : ExtractId failed");
  else {
    Sequence tmpseq_4;
    tmpseq_4 = vdm_AUX_name;
    varRes_3 = (Sequence) (tmpseq_4[((Int) (vdm_AUX_name.Length())).GetValue()]);
  }
  return varRes_3;
}

Record vdm_AUX_ExtractName(Record var_1_1) {
  Record varRes_3(vdm_AS_Name, length_AS_Name);
  Sequence vdm_AUX_name;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_Name == var_1_1.GetTag()) {
        Sequence e_l_12;
        for (int i_13 = 1; i_13 <= var_1_1.Length(); i_13++) 
          e_l_12.ImpAppend(var_1_1.GetField(i_13));
        if (succ_2 = 2 == (Int) (e_l_12.Length())) {
          Generic permI_14;
          permI_14 = (Generic) (e_l_12.Hd());
          succ_2 = true;
          {
            vdm_AUX_name = permI_14;
            succ_2 = true;
          }
          permI_14 = (Generic) (e_l_12[2]);
          if (succ_2) 
            succ_2 = true;
        }
      }
  }
  if (!succ_2) 
    RunTime("Pattern Match in Function Apply in function : ExtractName failed");
  else {
    bool succ_4;
    Sequence tmpVal_5;
    {
      Sequence tmpseq_6;
      tmpseq_6 = vdm_AUX_name;
      tmpVal_5 = (Sequence) (tmpseq_6[((Int) (vdm_AUX_name.Length())).GetValue()]);
    }
    Sequence vdm_AUX_id;
    succ_4 = true;
    {
      vdm_AUX_id = tmpVal_5;
      succ_4 = true;
    }
    if (!succ_4) 
      RunTime("Pattern match did not succeed in value definition");
    {
      varRes_3 = Record(vdm_AS_Name, length_AS_Name);
      Sequence tmpVar_9;
      tmpVar_9 = Sequence().ImpAppend(vdm_AUX_id);
      varRes_3.SetField(1, tmpVar_9);
      varRes_3.SetField(2, Nil());
    }
  }
  return varRes_3;
}

Bool vdm_AUX_IsRealName(Record var_1_1) {
  Sequence vdm_AUX_name;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_Name == var_1_1.GetTag()) {
        Sequence e_l_7;
        for (int i_8 = 1; i_8 <= var_1_1.Length(); i_8++) 
          e_l_7.ImpAppend(var_1_1.GetField(i_8));
        if (succ_2 = 2 == (Int) (e_l_7.Length())) {
          Generic permI_9;
          permI_9 = (Generic) (e_l_7.Hd());
          succ_2 = true;
          {
            vdm_AUX_name = permI_9;
            succ_2 = true;
          }
          permI_9 = (Generic) (e_l_7[2]);
          if (succ_2) 
            succ_2 = true;
        }
      }
  }
  if (!succ_2) 
    RunTime("Pattern Match in Function Apply in function : IsRealName failed");
  return (Bool) ((((Int) (vdm_AUX_name.Length())).GetValue()) > (((Int) 1).GetValue()));
}

Set vdm_AUX_Permute(Sequence vdm_AUX_l) {
  Set varRes_3;
  {
    Sequence selRes_4;
    selRes_4 = vdm_AUX_l;
    bool succ_5 = true;
    {
      Sequence tmpVal_6;
      tmpVal_6 = Sequence();
      succ_5 = ((Bool) (selRes_4 == tmpVal_6)).GetValue();
      if (!succ_5) { if (succ_5 = selRes_4.IsSequence()) { if (succ_5 = 1 == (Int) (selRes_4.Length())) {
   Record permI_7;
   permI_7 = (Record) (selRes_4.Hd());
   succ_5 = true;
   succ_5 = true;
 } } }
      if (succ_5) 
        varRes_3 = Set().Insert(vdm_AUX_l);
    }
    if (!succ_5) {
      Set unArg_9;
      Set res_s_10;
      {
        Sequence seq_lv_38;
        bool succ_36;
        Bool tsucc_39;
        tsucc_39 = true;
        {
          Set tmpVar_v_37;
          {
            Set riseq_42;
            int max_43 = (Int) (vdm_AUX_l.Length());
            for (int i_44 = 1; i_44 <= max_43; i_44++) 
              riseq_42.Insert((Int) i_44);
            tmpVar_v_37 = riseq_42;
          }
{ seq_lv_38.ImpAppend(tmpVar_v_37); }
        }
        Set allComb_40 = GenAllComb(seq_lv_38);
        Int vdm_AUX_i;
        Generic tmpe_53;
        for (int bb_52 = allComb_40.First(tmpe_53); bb_52; bb_52 = allComb_40.Next(tmpe_53)) {
          Sequence tmp_50 = tmpe_53;
          {
            if (succ_36 = 1 == (Int) (tmp_50.Length())) {
              Int permI_51;
              permI_51 = (Int) (tmp_50.Hd());
              succ_36 = true;
              {
                vdm_AUX_i = permI_51;
                succ_36 = true;
              }
            }
            if (succ_36) {
              Set elem_11;
              {
                Set res_s_12;
                {
                  Sequence seq_lv_21;
                  bool succ_19;
                  Bool tsucc_22;
                  tsucc_22 = true;
                  {
                    Set tmpVar_v_20;
                    tmpVar_v_20 = vdm_AUX_Permute(vdm_AUX_RestSeqVal(vdm_AUX_l, vdm_AUX_i));
{ seq_lv_21.ImpAppend(tmpVar_v_20); }
                  }
                  Set allComb_23 = GenAllComb(seq_lv_21);
                  Sequence vdm_AUX_j;
                  Generic tmpe_35;
                  for (int bb_34 = allComb_23.First(tmpe_35); bb_34; bb_34 = allComb_23.Next(tmpe_35)) {
                    Sequence tmp_32 = tmpe_35;
                    {
                      if (succ_19 = 1 == (Int) (tmp_32.Length())) {
                        Sequence permI_33;
                        permI_33 = (Sequence) (tmp_32.Hd());
                        succ_19 = true;
                        {
                          vdm_AUX_j = permI_33;
                          succ_19 = true;
                        }
                      }
                      if (succ_19) {
                        Sequence elem_13;
                        {
                          Sequence var1_14;
                          Record tmpVar_16;
                          Sequence tmpseq_17;
                          tmpseq_17 = vdm_AUX_l;
                          tmpVar_16 = (Record) (tmpseq_17[vdm_AUX_i.GetValue()]);
                          var1_14 = Sequence().ImpAppend(tmpVar_16);
                          elem_13.ImpConc(var1_14).ImpConc(vdm_AUX_j);
                        }
                        res_s_12.Insert(elem_13);
                      }
                    }
                  }
                }
                elem_11 = res_s_12;
              }
              res_s_10.Insert(elem_11);
            }
          }
        }
      }
      unArg_9 = res_s_10;
      {
        Set rduset_54;
        Generic tmpe_57;
        for (int bb_56 = unArg_9.First(tmpe_57); bb_56; bb_56 = unArg_9.Next(tmpe_57)) {
          Set e_55 = tmpe_57;
          rduset_54.ImpUnion(e_55);
        }
        varRes_3 = rduset_54;
      }
    }
  }
  return varRes_3;
}

Set vdm_AUX_PermuteStmt(Sequence vdm_AUX_stmts) {
  Set varRes_3;
  {
    Sequence selRes_4;
    selRes_4 = vdm_AUX_stmts;
    bool succ_5 = true;
    {
      Sequence tmpVal_6;
      tmpVal_6 = Sequence();
      succ_5 = ((Bool) (selRes_4 == tmpVal_6)).GetValue();
      if (succ_5) 
        varRes_3 = Set().Insert(vdm_AUX_stmts);
    }
    if (!succ_5) {
      Set unArg_8;
      Set res_s_9;
      {
        Sequence seq_lv_37;
        bool succ_35;
        Bool tsucc_38;
        tsucc_38 = true;
        {
          Set tmpVar_v_36;
          {
            Set riseq_41;
            int max_42 = (Int) (vdm_AUX_stmts.Length());
            for (int i_43 = 1; i_43 <= max_42; i_43++) 
              riseq_41.Insert((Int) i_43);
            tmpVar_v_36 = riseq_41;
          }
{ seq_lv_37.ImpAppend(tmpVar_v_36); }
        }
        Set allComb_39 = GenAllComb(seq_lv_37);
        Int vdm_AUX_i;
        Generic tmpe_52;
        for (int bb_51 = allComb_39.First(tmpe_52); bb_51; bb_51 = allComb_39.Next(tmpe_52)) {
          Sequence tmp_49 = tmpe_52;
          {
            if (succ_35 = 1 == (Int) (tmp_49.Length())) {
              Int permI_50;
              permI_50 = (Int) (tmp_49.Hd());
              succ_35 = true;
              {
                vdm_AUX_i = permI_50;
                succ_35 = true;
              }
            }
            if (succ_35) {
              Set elem_10;
              {
                Set res_s_11;
                {
                  Sequence seq_lv_20;
                  bool succ_18;
                  Bool tsucc_21;
                  tsucc_21 = true;
                  {
                    Set tmpVar_v_19;
                    tmpVar_v_19 = vdm_AUX_PermuteStmt(vdm_AUX_RestSeqStmt(vdm_AUX_stmts, vdm_AUX_i));
{ seq_lv_20.ImpAppend(tmpVar_v_19); }
                  }
                  Set allComb_22 = GenAllComb(seq_lv_20);
                  Sequence vdm_AUX_j;
                  Generic tmpe_34;
                  for (int bb_33 = allComb_22.First(tmpe_34); bb_33; bb_33 = allComb_22.Next(tmpe_34)) {
                    Sequence tmp_31 = tmpe_34;
                    {
                      if (succ_18 = 1 == (Int) (tmp_31.Length())) {
                        Sequence permI_32;
                        permI_32 = (Sequence) (tmp_31.Hd());
                        succ_18 = true;
                        {
                          vdm_AUX_j = permI_32;
                          succ_18 = true;
                        }
                      }
                      if (succ_18) {
                        Sequence elem_12;
                        {
                          Sequence var1_13;
                          Record tmpVar_15;
                          Sequence tmpseq_16;
                          tmpseq_16 = vdm_AUX_stmts;
                          tmpVar_15 = (Record) (tmpseq_16[vdm_AUX_i.GetValue()]);
                          var1_13 = Sequence().ImpAppend(tmpVar_15);
                          elem_12.ImpConc(var1_13).ImpConc(vdm_AUX_j);
                        }
                        res_s_11.Insert(elem_12);
                      }
                    }
                  }
                }
                elem_10 = res_s_11;
              }
              res_s_9.Insert(elem_10);
            }
          }
        }
      }
      unArg_8 = res_s_9;
      {
        Set rduset_53;
        Generic tmpe_56;
        for (int bb_55 = unArg_8.First(tmpe_56); bb_55; bb_55 = unArg_8.Next(tmpe_56)) {
          Set e_54 = tmpe_56;
          rduset_53.ImpUnion(e_54);
        }
        varRes_3 = rduset_53;
      }
    }
  }
  return varRes_3;
}

Record vdm_AUX_PostName(Record var_1_1) {
  Record varRes_3(vdm_AS_Name, length_AS_Name);
  Sequence vdm_AUX_id__l;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_Name == var_1_1.GetTag()) {
        Sequence e_l_9;
        for (int i_10 = 1; i_10 <= var_1_1.Length(); i_10++) 
          e_l_9.ImpAppend(var_1_1.GetField(i_10));
        if (succ_2 = 2 == (Int) (e_l_9.Length())) {
          Generic permI_11;
          permI_11 = (Generic) (e_l_9.Hd());
          succ_2 = true;
          {
            vdm_AUX_id__l = permI_11;
            succ_2 = true;
          }
          permI_11 = (Generic) (e_l_9[2]);
          if (succ_2) 
            succ_2 = true;
        }
      }
  }
  if (!succ_2) 
    RunTime("Pattern Match in Function Apply in function : PostName failed");
  else {
    varRes_3 = Record(vdm_AS_Name, length_AS_Name);
    Sequence tmpVar_4;
    {
      Sequence var1_5;
      var1_5 = Sequence().ImpAppend(Sequence("post_"));
      tmpVar_4.ImpConc(var1_5).ImpConc(vdm_AUX_id__l);
    }
    varRes_3.SetField(1, tmpVar_4);
    varRes_3.SetField(2, Nil());
  }
  return varRes_3;
}

Record vdm_AUX_PreName(Record var_1_1) {
  Record varRes_3(vdm_AS_Name, length_AS_Name);
  Sequence vdm_AUX_id__l;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_Name == var_1_1.GetTag()) {
        Sequence e_l_9;
        for (int i_10 = 1; i_10 <= var_1_1.Length(); i_10++) 
          e_l_9.ImpAppend(var_1_1.GetField(i_10));
        if (succ_2 = 2 == (Int) (e_l_9.Length())) {
          Generic permI_11;
          permI_11 = (Generic) (e_l_9.Hd());
          succ_2 = true;
          {
            vdm_AUX_id__l = permI_11;
            succ_2 = true;
          }
          permI_11 = (Generic) (e_l_9[2]);
          if (succ_2) 
            succ_2 = true;
        }
      }
  }
  if (!succ_2) 
    RunTime("Pattern Match in Function Apply in function : PreName failed");
  else {
    varRes_3 = Record(vdm_AS_Name, length_AS_Name);
    Sequence tmpVar_4;
    {
      Sequence var1_5;
      var1_5 = Sequence().ImpAppend(Sequence("pre_"));
      tmpVar_4.ImpConc(var1_5).ImpConc(vdm_AUX_id__l);
    }
    varRes_3.SetField(1, tmpVar_4);
    varRes_3.SetField(2, Nil());
  }
  return varRes_3;
}

Sequence vdm_AUX_RestSeqStmt(Sequence vdm_AUX_l, Int vdm_AUX_i) {
  Sequence varRes_4;
  {
    Sequence res_l_5;
    Record reselem_6;
    Set resBind_s_8;
    {
      Set var1_12;
      Set riseq_15;
      int max_16 = (Int) (vdm_AUX_l.Length());
      for (int i_17 = 1; i_17 <= max_16; i_17++) 
        riseq_15.Insert((Int) i_17);
      var1_12 = riseq_15;
      Set var2_13;
      var2_13 = Set().Insert(vdm_AUX_i);
      resBind_s_8 = var1_12;
      resBind_s_8.ImpDiff(var2_13);
    }
    Sequence bind_l_7;
    if ((Int) (resBind_s_8.Card()) != (Int) 0) 
      bind_l_7 = Sort(resBind_s_8);
    bool succ_9 = true;
    Int vdm_AUX_j;
    Generic tmpe_22;
    for (int i_21 = bind_l_7.First(tmpe_22); i_21; i_21 = bind_l_7.Next(tmpe_22)) {
      Int e_11 = tmpe_22;
      {
        vdm_AUX_j = e_11;
        succ_9 = true;
        if (succ_9) {
          Sequence tmpseq_19;
          tmpseq_19 = vdm_AUX_l;
          reselem_6 = (Record) (tmpseq_19[vdm_AUX_j.GetValue()]);
          res_l_5.ImpAppend(reselem_6);
        }
      }
    }
    varRes_4 = res_l_5;
  }
  return varRes_4;
}

Sequence vdm_AUX_RestSeqVal(Sequence vdm_AUX_l, Int vdm_AUX_i) {
  Sequence varRes_4;
  {
    Sequence res_l_5;
    Record reselem_6;
    Set resBind_s_8;
    {
      Set var1_12;
      Set riseq_15;
      int max_16 = (Int) (vdm_AUX_l.Length());
      for (int i_17 = 1; i_17 <= max_16; i_17++) 
        riseq_15.Insert((Int) i_17);
      var1_12 = riseq_15;
      Set var2_13;
      var2_13 = Set().Insert(vdm_AUX_i);
      resBind_s_8 = var1_12;
      resBind_s_8.ImpDiff(var2_13);
    }
    Sequence bind_l_7;
    if ((Int) (resBind_s_8.Card()) != (Int) 0) 
      bind_l_7 = Sort(resBind_s_8);
    bool succ_9 = true;
    Int vdm_AUX_j;
    Generic tmpe_22;
    for (int i_21 = bind_l_7.First(tmpe_22); i_21; i_21 = bind_l_7.Next(tmpe_22)) {
      Int e_11 = tmpe_22;
      {
        vdm_AUX_j = e_11;
        succ_9 = true;
        if (succ_9) {
          Sequence tmpseq_19;
          tmpseq_19 = vdm_AUX_l;
          reselem_6 = (Record) (tmpseq_19[vdm_AUX_j.GetValue()]);
          res_l_5.ImpAppend(reselem_6);
        }
      }
    }
    varRes_4 = res_l_5;
  }
  return varRes_4;
}

void vdm_AUX_AppendToTopBlkEnv(Record vdm_AUX_idval) {
  Record vdm_AUX_topblkenv(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
  vdm_AUX_topblkenv = vdm_AUX_TopBlkEnv();
  {
    vdm_AUX_PopBlkEnv();
    {
      Record tmpVar_5(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
      {
        tmpVar_5 = Record(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
        Sequence tmpVar_6;
        {
          Sequence var1_7;
          var1_7 = Sequence().ImpAppend(vdm_AUX_idval);
          Sequence var2_8;
          Record tmpRec_10(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
          tmpRec_10 = vdm_AUX_topblkenv;
          if (tmpRec_10.Is(vdm_SEM_BlkEnv)) 
            var2_8 = tmpRec_10.GetField(pos_SEM_BlkEnv_id__l);
          else 
            RunTime("Unknown record field selector");
          tmpVar_6.ImpConc(var1_7).ImpConc(var2_8);
        }
        tmpVar_5.SetField(1, tmpVar_6);
        Generic tmpVar_11;
        {
          Record tmpRec_12(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
          tmpRec_12 = vdm_AUX_topblkenv;
          if (tmpRec_12.Is(vdm_SEM_BlkEnv)) 
            tmpVar_11 = tmpRec_12.GetField(pos_SEM_BlkEnv_perm);
          else 
            RunTime("Unknown record field selector");
        }
        tmpVar_5.SetField(2, tmpVar_11);
      }
      vdm_AUX_PushBlkEnv(tmpVar_5);
    }
  }
}

Int vdm_AUX_Ceiling(Real vdm_AUX_val) {
  Bool cond_3;
  {
    Real argTmp_4;
    argTmp_4 = vdm_AUX_val;
    cond_3 = (Bool) (IsInteger(argTmp_4));
  }
  if (cond_3.GetValue()) {
    Real rexpr_10;
    rexpr_10 = vdm_AUX_val;
    return rexpr_10;
  }
  else {
    Int rexpr_5;
    {
      Int var2_7;
      if (vdm_AUX_val.IsReal()) {
        double tmp_9 = ((Real) vdm_AUX_val).GetValue();
        var2_7 = (Int) ((int) (floor(tmp_9)));
      }
      else 
        var2_7 = vdm_AUX_val;
      rexpr_5 = (Int) 1 + var2_7;
    }
    return rexpr_5;
  }
}

Record vdm_AUX_CombineBlkEnv(Record var_1_1, Record var_2_2) {
  Sequence vdm_AUX_env1;
  Sequence vdm_AUX_env2;
  Generic vdm_AUX_permission1;
  Generic vdm_AUX_permission2;
  bool succ_3 = true;
  {
    succ_3 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_SEM_BlkEnv == var_1_1.GetTag()) {
        Sequence e_l_4;
        for (int i_5 = 1; i_5 <= var_1_1.Length(); i_5++) 
          e_l_4.ImpAppend(var_1_1.GetField(i_5));
        if (succ_3 = 2 == (Int) (e_l_4.Length())) {
          Generic permI_6;
          permI_6 = (Generic) (e_l_4.Hd());
          succ_3 = true;
          {
            vdm_AUX_env1 = permI_6;
            succ_3 = true;
          }
          permI_6 = (Generic) (e_l_4[2]);
          if (succ_3) {
            vdm_AUX_permission1 = permI_6;
            succ_3 = true;
          }
        }
      }
  }
  {
    succ_3 = false;
    if (var_2_2.IsRecord()) 
      if (vdm_SEM_BlkEnv == var_2_2.GetTag()) {
        Sequence e_l_7;
        for (int i_8 = 1; i_8 <= var_2_2.Length(); i_8++) 
          e_l_7.ImpAppend(var_2_2.GetField(i_8));
        if (succ_3 = 2 == (Int) (e_l_7.Length())) {
          Generic permI_9;
          permI_9 = (Generic) (e_l_7.Hd());
          succ_3 = true;
          {
            vdm_AUX_env2 = permI_9;
            succ_3 = true;
          }
          permI_9 = (Generic) (e_l_7[2]);
          if (succ_3) {
            vdm_AUX_permission2 = permI_9;
            succ_3 = true;
          }
        }
      }
  }
  if (succ_3) {
    Bool cond_10;
    cond_10 = (Bool) (!(vdm_AUX_permission1 == vdm_AUX_permission2));
    if (cond_10.GetValue()) 
      RunTime("Can not evaluate an error statement");
    else {
      Record rexpr_13(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
      {
        rexpr_13 = Record(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
        Sequence tmpVar_14;
{ tmpVar_14.ImpConc(vdm_AUX_env1).ImpConc(vdm_AUX_env2); }
        rexpr_13.SetField(1, tmpVar_14);
        rexpr_13.SetField(2, vdm_AUX_permission1);
      }
      return rexpr_13;
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: CombineBlkEnv");
}

Record vdm_AUX_DistribCombineBlkEnv(Sequence vdm_AUX_blkenv__l) {
  Sequence vdm_AUX_result__l;
  vdm_AUX_result__l = Sequence();
  {
    Generic vdm_AUX_permission;
    Record tmpRec_5(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
    {
      Sequence tmpseq_6;
      tmpseq_6 = vdm_AUX_blkenv__l;
      tmpRec_5 = (Record) (tmpseq_6[((Int) 1).GetValue()]);
    }
    if (tmpRec_5.Is(vdm_SEM_BlkEnv)) 
      vdm_AUX_permission = tmpRec_5.GetField(pos_SEM_BlkEnv_perm);
    else 
      RunTime("Unknown record field selector");
    {
      Sequence sq_8;
      sq_8 = vdm_AUX_blkenv__l;
      Sequence vdm_AUX_id__l;
      Generic vdm_AUX_perm;
      bool succ_10;
      Generic tmpe_21;
      for (int i_20 = sq_8.First(tmpe_21); i_20; i_20 = sq_8.Next(tmpe_21)) {
        Record elem_9 = tmpe_21;
        {
          succ_10 = true;
          {
            succ_10 = false;
            if (elem_9.IsRecord()) 
              if (vdm_SEM_BlkEnv == elem_9.GetTag()) {
                Sequence e_l_17;
                for (int i_18 = 1; i_18 <= elem_9.Length(); i_18++) 
                  e_l_17.ImpAppend(elem_9.GetField(i_18));
                if (succ_10 = 2 == (Int) (e_l_17.Length())) {
                  Generic permI_19;
                  permI_19 = (Generic) (e_l_17.Hd());
                  succ_10 = true;
                  {
                    vdm_AUX_id__l = permI_19;
                    succ_10 = true;
                  }
                  permI_19 = (Generic) (e_l_17[2]);
                  if (succ_10) {
                    vdm_AUX_perm = permI_19;
                    succ_10 = true;
                  }
                }
              }
          }
          if (succ_10) {
            Bool cond_11;
            cond_11 = (Bool) (!(vdm_AUX_perm == vdm_AUX_permission));
            if (cond_11.GetValue()) 
              RunTime("Can not evaluate an error statement");
            else {
              Sequence rhs_14;
{ rhs_14.ImpConc(vdm_AUX_result__l).ImpConc(vdm_AUX_id__l); }
              vdm_AUX_result__l = rhs_14;
            }
          }
          else 
            RunTime("Pattern did not match in sequence for loop");
        }
      }
      {
        Record rexpr_22(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
        {
          rexpr_22 = Record(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
          rexpr_22.SetField(1, vdm_AUX_result__l);
          rexpr_22.SetField(2, vdm_AUX_permission);
        }
        return rexpr_22;
      }
    }
  }
}

Record vdm_AUX_GetAlias(Record vdm_AUX_name) {
  bool succ_3;
  Record tmpVal_4;
  tmpVal_4 = vdm_AUX_GetModule(vdm_AUX_CurrentModule());
  Record vdm_AUX_sigmamo;
  succ_3 = true;
  {
    vdm_AUX_sigmamo = tmpVal_4;
    succ_3 = true;
  }
  if (!succ_3) 
    RunTime("Pattern match did not succeed in value definition");
  {
    Record rexpr_6(vdm_AS_Name, length_AS_Name);
    {
      Map tmp_m_7;
      {
        Record tmpRec_9;
        tmpRec_9 = vdm_AUX_sigmamo;
        if (((Record) tmpRec_9).Is(vdm_GLOBAL_SigmaMO)) 
          tmp_m_7 = ((Record) tmpRec_9).GetField(pos_GLOBAL_SigmaMO_alias);
        else 
          if (((Record) tmpRec_9).Is(vdm_GLOBAL_SigmaIMO)) 
            tmp_m_7 = ((Record) tmpRec_9).GetField(pos_GLOBAL_SigmaIMO_alias);
          else 
            RunTime("Unknown record field selector");
      }
      rexpr_6 = (Record) (((Map) tmp_m_7)[vdm_AUX_name]);
    }
    return rexpr_6;
  }
}

Bool vdm_AUX_HasAlias(Record vdm_AUX_name) {
  bool succ_3;
  Record tmpVal_4;
  tmpVal_4 = vdm_AUX_GetModule(vdm_AUX_CurrentModule());
  Record vdm_AUX_sigmamo;
  succ_3 = true;
  {
    vdm_AUX_sigmamo = tmpVal_4;
    succ_3 = true;
  }
  if (!succ_3) 
    RunTime("Pattern match did not succeed in value definition");
  {
    Bool rexpr_6;
    {
      Set var2_8;
      Map unArg_9;
      Record tmpRec_10;
      tmpRec_10 = vdm_AUX_sigmamo;
      if (((Record) tmpRec_10).Is(vdm_GLOBAL_SigmaMO)) 
        unArg_9 = ((Record) tmpRec_10).GetField(pos_GLOBAL_SigmaMO_alias);
      else 
        if (((Record) tmpRec_10).Is(vdm_GLOBAL_SigmaIMO)) 
          unArg_9 = ((Record) tmpRec_10).GetField(pos_GLOBAL_SigmaIMO_alias);
        else 
          RunTime("Unknown record field selector");
      var2_8 = unArg_9.Dom();
      rexpr_6 = (Bool) (var2_8.InSet(vdm_AUX_name));
    }
    return rexpr_6;
  }
}

Bool vdm_AUX_IsConstructExported(Record vdm_AUX_loc__name, Record vdm_AUX_mod__name) {
  bool succ_4;
  Record tmpVal_5;
  tmpVal_5 = vdm_AUX_GetModule(vdm_AUX_mod__name);
  Record vdm_AUX_sigmamo;
  succ_4 = true;
  {
    vdm_AUX_sigmamo = tmpVal_5;
    succ_4 = true;
  }
  if (!succ_4) 
    RunTime("Pattern match did not succeed in value definition");
  {
    bool succ_7;
    Generic tmpVal_8;
    {
      Record tmpRec_9;
      tmpRec_9 = vdm_AUX_sigmamo;
      if (((Record) tmpRec_9).Is(vdm_GLOBAL_SigmaMO)) 
        tmpVal_8 = ((Record) tmpRec_9).GetField(pos_GLOBAL_SigmaMO_exp);
      else 
        if (((Record) tmpRec_9).Is(vdm_GLOBAL_SigmaIMO)) 
          tmpVal_8 = ((Record) tmpRec_9).GetField(pos_GLOBAL_SigmaIMO_exp);
        else 
          RunTime("Unknown record field selector");
    }
    Generic vdm_AUX_exp__sig;
    succ_7 = true;
    {
      vdm_AUX_exp__sig = tmpVal_8;
      succ_7 = true;
    }
    if (!succ_7) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Bool cond_10;
      cond_10 = (Bool) (vdm_AUX_exp__sig == Nil());
      if (cond_10.GetValue()) {
        Bool rexpr_30;
        rexpr_30 = (Bool) true;
        return rexpr_30;
      }
      else {
        Bool rexpr_13;
        {
          Bool var1_14;
          Bool var1_16;
          Set var2_19;
          Map unArg_20;
          Generic tmpRec_21;
          tmpRec_21 = vdm_AUX_exp__sig;
          if (tmpRec_21.IsRecord()) 
            if (((Record) tmpRec_21).Is(vdm_AS_ImplExportSig)) 
              unArg_20 = ((Record) tmpRec_21).GetField(pos_AS_ImplExportSig_val);
            else 
              if (((Record) tmpRec_21).Is(vdm_AS_ExportSig)) 
                unArg_20 = ((Record) tmpRec_21).GetField(pos_AS_ExportSig_val);
              else 
                RunTime("Unknown record field selector");
          else 
            RunTime("A record was expected");
          var2_19 = unArg_20.Dom();
          var1_16 = (Bool) (var2_19.InSet(vdm_AUX_loc__name));
          if (!(var1_14 = var1_16).GetValue()) {
            Bool var2_17;
            Set var2_23;
            Map unArg_24;
            Generic tmpRec_25;
            tmpRec_25 = vdm_AUX_exp__sig;
            if (tmpRec_25.IsRecord()) 
              if (((Record) tmpRec_25).Is(vdm_AS_ImplExportSig)) 
                unArg_24 = ((Record) tmpRec_25).GetField(pos_AS_ImplExportSig_fns);
              else 
                if (((Record) tmpRec_25).Is(vdm_AS_ExportSig)) 
                  unArg_24 = ((Record) tmpRec_25).GetField(pos_AS_ExportSig_fns);
                else 
                  RunTime("Unknown record field selector");
            else 
              RunTime("A record was expected");
            var2_23 = unArg_24.Dom();
            var2_17 = (Bool) (var2_23.InSet(vdm_AUX_loc__name));
            var1_14 = var2_17;
          }
          if (!(rexpr_13 = var1_14).GetValue()) {
            Bool var2_15;
            Set var2_27;
            Map unArg_28;
            Generic tmpRec_29;
            tmpRec_29 = vdm_AUX_exp__sig;
            if (tmpRec_29.IsRecord()) 
              if (((Record) tmpRec_29).Is(vdm_AS_ImplExportSig)) 
                unArg_28 = ((Record) tmpRec_29).GetField(pos_AS_ImplExportSig_ops);
              else 
                if (((Record) tmpRec_29).Is(vdm_AS_ExportSig)) 
                  unArg_28 = ((Record) tmpRec_29).GetField(pos_AS_ExportSig_ops);
                else 
                  RunTime("Unknown record field selector");
            else 
              RunTime("A record was expected");
            var2_27 = unArg_28.Dom();
            var2_15 = (Bool) (var2_27.InSet(vdm_AUX_loc__name));
            rexpr_13 = var2_15;
          }
        }
        return rexpr_13;
      }
    }
  }
}

Bool vdm_AUX_IsDefinedInModule(Record vdm_AUX_name) {
  bool succ_3;
  Record tmpVal_4;
  tmpVal_4 = vdm_AUX_GetModule(vdm_AUX_ExtractModule(vdm_AUX_name));
  Record vdm_AUX_sigmamo;
  succ_3 = true;
  {
    vdm_AUX_sigmamo = tmpVal_4;
    succ_3 = true;
  }
  if (!succ_3) 
    RunTime("Pattern match did not succeed in value definition");
  Sequence vdm_AUX_tag__id;
  vdm_AUX_tag__id = vdm_AUX_ExtractId(vdm_AUX_name);
  {
    Bool rexpr_9;
    {
      Record var1_10(vdm_AS_Name, length_AS_Name);
      var1_10 = Record(vdm_AS_Name, length_AS_Name);
      Sequence tmpVar_12;
      tmpVar_12 = Sequence().ImpAppend(vdm_AUX_tag__id);
      var1_10.SetField(1, tmpVar_12);
      var1_10.SetField(2, Nil());
      Set var2_11;
      Map unArg_15;
      Record tmpRec_16;
      tmpRec_16 = vdm_AUX_sigmamo;
      if (((Record) tmpRec_16).Is(vdm_GLOBAL_SigmaMO)) 
        unArg_15 = ((Record) tmpRec_16).GetField(pos_GLOBAL_SigmaMO_tps);
      else 
        RunTime("Unknown record field selector");
      var2_11 = unArg_15.Dom();
      rexpr_9 = (Bool) (var2_11.InSet(var1_10));
    }
    return rexpr_9;
  }
}

Bool vdm_AUX_IsInImplDeclared(Record vdm_AUX_loc__name, Record vdm_AUX_mod__name) {
  Record vdm_AUX_sigmaimo(vdm_GLOBAL_SigmaIMO, length_GLOBAL_SigmaIMO);
  vdm_AUX_sigmaimo = vdm_AUX_GetImplModule(vdm_AUX_mod__name);
  {
    bool succ_7;
    Record tmpVal_8(vdm_AS_ImplExportSig, length_AS_ImplExportSig);
    {
      Record tmpRec_9(vdm_GLOBAL_SigmaIMO, length_GLOBAL_SigmaIMO);
      tmpRec_9 = vdm_AUX_sigmaimo;
      if (tmpRec_9.Is(vdm_GLOBAL_SigmaIMO)) 
        tmpVal_8 = tmpRec_9.GetField(pos_GLOBAL_SigmaIMO_exp);
      else 
        RunTime("Unknown record field selector");
    }
    Record vdm_AUX_exp__sig(vdm_AS_ImplExportSig, length_AS_ImplExportSig);
    succ_7 = true;
    {
      vdm_AUX_exp__sig = tmpVal_8;
      succ_7 = true;
    }
    if (!succ_7) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Bool rexpr_10;
      {
        Bool var1_11;
        Bool var1_13;
        Set var2_16;
        Map unArg_17;
        Record tmpRec_18(vdm_AS_ImplExportSig, length_AS_ImplExportSig);
        tmpRec_18 = vdm_AUX_exp__sig;
        if (tmpRec_18.Is(vdm_AS_ImplExportSig)) 
          unArg_17 = tmpRec_18.GetField(pos_AS_ImplExportSig_val);
        else 
          RunTime("Unknown record field selector");
        var2_16 = unArg_17.Dom();
        var1_13 = (Bool) (var2_16.InSet(vdm_AUX_loc__name));
        if (!(var1_11 = var1_13).GetValue()) {
          Bool var2_14;
          Set var2_20;
          Map unArg_21;
          Record tmpRec_22(vdm_AS_ImplExportSig, length_AS_ImplExportSig);
          tmpRec_22 = vdm_AUX_exp__sig;
          if (tmpRec_22.Is(vdm_AS_ImplExportSig)) 
            unArg_21 = tmpRec_22.GetField(pos_AS_ImplExportSig_fns);
          else 
            RunTime("Unknown record field selector");
          var2_20 = unArg_21.Dom();
          var2_14 = (Bool) (var2_20.InSet(vdm_AUX_loc__name));
          var1_11 = var2_14;
        }
        if (!(rexpr_10 = var1_11).GetValue()) {
          Bool var2_12;
          Set var2_24;
          Map unArg_25;
          Record tmpRec_26(vdm_AS_ImplExportSig, length_AS_ImplExportSig);
          tmpRec_26 = vdm_AUX_exp__sig;
          if (tmpRec_26.Is(vdm_AS_ImplExportSig)) 
            unArg_25 = tmpRec_26.GetField(pos_AS_ImplExportSig_ops);
          else 
            RunTime("Unknown record field selector");
          var2_24 = unArg_25.Dom();
          var2_12 = (Bool) (var2_24.InSet(vdm_AUX_loc__name));
          rexpr_10 = var2_12;
        }
      }
      return rexpr_10;
    }
  }
}

Bool vdm_AUX_IsInt(Record vdm_AUX_val__v) {
  Bool cond_3;
  {
    Record argTmp_4;
    argTmp_4 = vdm_AUX_val__v;
    if (argTmp_4.IsRecord()) 
      cond_3 = vdm_SEM_NUM == argTmp_4.GetTag();
    else 
      cond_3 = false;
  }
  if (cond_3.GetValue()) {
    bool succ_6;
    Record tmpVal_7;
    tmpVal_7 = vdm_AUX_val__v;
    Real vdm_AUX_val;
    succ_6 = true;
    {
      succ_6 = false;
      if (tmpVal_7.IsRecord()) 
        if (vdm_SEM_NUM == ((Record) tmpVal_7).GetTag()) {
          Sequence e_l_8;
          for (int i_9 = 1; i_9 <= ((Record) tmpVal_7).Length(); i_9++) 
            e_l_8.ImpAppend(((Record) tmpVal_7).GetField(i_9));
          if (succ_6 = 1 == (Int) (e_l_8.Length())) {
            Real permI_10;
            permI_10 = (Real) (e_l_8.Hd());
            succ_6 = true;
            {
              vdm_AUX_val = permI_10;
              succ_6 = true;
            }
          }
        }
    }
    if (!succ_6) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Bool rexpr_11;
      {
        Real argTmp_12;
        argTmp_12 = vdm_AUX_val;
        rexpr_11 = (Bool) (IsInteger(argTmp_12));
      }
      return rexpr_11;
    }
  }
  else {
    Bool rexpr_5;
    rexpr_5 = (Bool) false;
    return rexpr_5;
  }
}

Bool vdm_AUX_IsNat(Record vdm_AUX_val__v) {
  Bool cond_3;
  {
    Record argTmp_4;
    argTmp_4 = vdm_AUX_val__v;
    if (argTmp_4.IsRecord()) 
      cond_3 = vdm_SEM_NUM == argTmp_4.GetTag();
    else 
      cond_3 = false;
  }
  if (cond_3.GetValue()) {
    bool succ_6;
    Record tmpVal_7;
    tmpVal_7 = vdm_AUX_val__v;
    Real vdm_AUX_val;
    succ_6 = true;
    {
      succ_6 = false;
      if (tmpVal_7.IsRecord()) 
        if (vdm_SEM_NUM == ((Record) tmpVal_7).GetTag()) {
          Sequence e_l_8;
          for (int i_9 = 1; i_9 <= ((Record) tmpVal_7).Length(); i_9++) 
            e_l_8.ImpAppend(((Record) tmpVal_7).GetField(i_9));
          if (succ_6 = 1 == (Int) (e_l_8.Length())) {
            Real permI_10;
            permI_10 = (Real) (e_l_8.Hd());
            succ_6 = true;
            {
              vdm_AUX_val = permI_10;
              succ_6 = true;
            }
          }
        }
    }
    if (!succ_6) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Bool rexpr_11;
      {
        Real argTmp_12;
        argTmp_12 = vdm_AUX_val;
        rexpr_11 = (Bool) (IsInteger(argTmp_12) && ((Int) argTmp_12).GetValue() >= 0);
      }
      return rexpr_11;
    }
  }
  else {
    Bool rexpr_5;
    rexpr_5 = (Bool) false;
    return rexpr_5;
  }
}

Bool vdm_AUX_IsNatOne(Record vdm_AUX_val__v) {
  Bool cond_3;
  {
    Record argTmp_4;
    argTmp_4 = vdm_AUX_val__v;
    if (argTmp_4.IsRecord()) 
      cond_3 = vdm_SEM_NUM == argTmp_4.GetTag();
    else 
      cond_3 = false;
  }
  if (cond_3.GetValue()) {
    bool succ_6;
    Record tmpVal_7;
    tmpVal_7 = vdm_AUX_val__v;
    Real vdm_AUX_val;
    succ_6 = true;
    {
      succ_6 = false;
      if (tmpVal_7.IsRecord()) 
        if (vdm_SEM_NUM == ((Record) tmpVal_7).GetTag()) {
          Sequence e_l_8;
          for (int i_9 = 1; i_9 <= ((Record) tmpVal_7).Length(); i_9++) 
            e_l_8.ImpAppend(((Record) tmpVal_7).GetField(i_9));
          if (succ_6 = 1 == (Int) (e_l_8.Length())) {
            Real permI_10;
            permI_10 = (Real) (e_l_8.Hd());
            succ_6 = true;
            {
              vdm_AUX_val = permI_10;
              succ_6 = true;
            }
          }
        }
    }
    if (!succ_6) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Bool rexpr_11;
      {
        Real argTmp_12;
        argTmp_12 = vdm_AUX_val;
        rexpr_11 = (Bool) (IsInteger(argTmp_12) && ((Int) argTmp_12).GetValue() >= 1);
      }
      return rexpr_11;
    }
  }
  else {
    Bool rexpr_5;
    rexpr_5 = (Bool) false;
    return rexpr_5;
  }
}

Bool vdm_AUX_IsRat(Record vdm_AUX_val__v) {
  Bool cond_3;
  {
    Record argTmp_4;
    argTmp_4 = vdm_AUX_val__v;
    if (argTmp_4.IsRecord()) 
      cond_3 = vdm_SEM_NUM == argTmp_4.GetTag();
    else 
      cond_3 = false;
  }
  if (cond_3.GetValue()) {
    bool succ_6;
    Record tmpVal_7;
    tmpVal_7 = vdm_AUX_val__v;
    Real vdm_AUX_val;
    succ_6 = true;
    {
      succ_6 = false;
      if (tmpVal_7.IsRecord()) 
        if (vdm_SEM_NUM == ((Record) tmpVal_7).GetTag()) {
          Sequence e_l_8;
          for (int i_9 = 1; i_9 <= ((Record) tmpVal_7).Length(); i_9++) 
            e_l_8.ImpAppend(((Record) tmpVal_7).GetField(i_9));
          if (succ_6 = 1 == (Int) (e_l_8.Length())) {
            Real permI_10;
            permI_10 = (Real) (e_l_8.Hd());
            succ_6 = true;
            {
              vdm_AUX_val = permI_10;
              succ_6 = true;
            }
          }
        }
    }
    if (!succ_6) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Bool rexpr_11;
      {
        Real argTmp_12;
        argTmp_12 = vdm_AUX_val;
        rexpr_11 = (Bool) (IsInteger(argTmp_12) || argTmp_12.IsReal());
      }
      return rexpr_11;
    }
  }
  else {
    Bool rexpr_5;
    rexpr_5 = (Bool) false;
    return rexpr_5;
  }
}

Bool vdm_AUX_IsReal(Record vdm_AUX_val__v) {
  Bool cond_3;
  {
    Record argTmp_4;
    argTmp_4 = vdm_AUX_val__v;
    if (argTmp_4.IsRecord()) 
      cond_3 = vdm_SEM_NUM == argTmp_4.GetTag();
    else 
      cond_3 = false;
  }
  if (cond_3.GetValue()) {
    bool succ_6;
    Record tmpVal_7;
    tmpVal_7 = vdm_AUX_val__v;
    Real vdm_AUX_val;
    succ_6 = true;
    {
      succ_6 = false;
      if (tmpVal_7.IsRecord()) 
        if (vdm_SEM_NUM == ((Record) tmpVal_7).GetTag()) {
          Sequence e_l_8;
          for (int i_9 = 1; i_9 <= ((Record) tmpVal_7).Length(); i_9++) 
            e_l_8.ImpAppend(((Record) tmpVal_7).GetField(i_9));
          if (succ_6 = 1 == (Int) (e_l_8.Length())) {
            Real permI_10;
            permI_10 = (Real) (e_l_8.Hd());
            succ_6 = true;
            {
              vdm_AUX_val = permI_10;
              succ_6 = true;
            }
          }
        }
    }
    if (!succ_6) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Bool rexpr_11;
      {
        Real argTmp_12;
        argTmp_12 = vdm_AUX_val;
        rexpr_11 = (Bool) (IsInteger(argTmp_12) || argTmp_12.IsReal());
      }
      return rexpr_11;
    }
  }
  else {
    Bool rexpr_5;
    rexpr_5 = (Bool) false;
    return rexpr_5;
  }
}

Bool vdm_AUX_IsRecSel(Record vdm_AUX_name) {
  bool succ_3;
  Record tmpVal_4(vdm_AS_Name, length_AS_Name);
  tmpVal_4 = vdm_AUX_LookUpRename(vdm_AUX_name);
  Record vdm_AUX_new__name(vdm_AS_Name, length_AS_Name);
  succ_3 = true;
  {
    vdm_AUX_new__name = tmpVal_4;
    succ_3 = true;
  }
  if (!succ_3) 
    RunTime("Pattern match did not succeed in value definition");
  {
    bool succ_6;
    Record vdm_AUX_rec__name(vdm_AS_Name, length_AS_Name);
    vdm_AUX_rec__name = vdm_AUX_ExtractName(vdm_AUX_new__name);
    Record tmpVal_9;
    tmpVal_9 = vdm_AUX_GetModule(vdm_AUX_ExtractModule(vdm_AUX_new__name));
    Record vdm_AUX_sigmamo;
    succ_6 = true;
    {
      vdm_AUX_sigmamo = tmpVal_9;
      succ_6 = true;
    }
    if (!succ_6) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Bool rexpr_12;
      {
        Set var2_14;
        Map unArg_15;
        Record tmpRec_16;
        tmpRec_16 = vdm_AUX_sigmamo;
        if (((Record) tmpRec_16).Is(vdm_GLOBAL_SigmaMO)) 
          unArg_15 = ((Record) tmpRec_16).GetField(pos_GLOBAL_SigmaMO_recsel);
        else 
          RunTime("Unknown record field selector");
        var2_14 = unArg_15.Dom();
        rexpr_12 = (Bool) (var2_14.InSet(vdm_AUX_rec__name));
      }
      return rexpr_12;
    }
  }
}

Bool vdm_AUX_IsTypeDef(Record vdm_AUX_name) {
  bool succ_3;
  Record tmpVal_4(vdm_AS_Name, length_AS_Name);
  tmpVal_4 = vdm_AUX_LookUpRename(vdm_AUX_name);
  Record vdm_AUX_new__name(vdm_AS_Name, length_AS_Name);
  succ_3 = true;
  {
    vdm_AUX_new__name = tmpVal_4;
    succ_3 = true;
  }
  if (!succ_3) 
    RunTime("Pattern match did not succeed in value definition");
  {
    bool succ_6;
    Record tmpVal_7;
    tmpVal_7 = vdm_AUX_GetModule(vdm_AUX_ExtractModule(vdm_AUX_new__name));
    Record vdm_AUX_sigmamo;
    succ_6 = true;
    {
      vdm_AUX_sigmamo = tmpVal_7;
      succ_6 = true;
    }
    if (!succ_6) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Bool rexpr_10;
      {
        Set var2_12;
        Map unArg_14;
        Record tmpRec_15;
        tmpRec_15 = vdm_AUX_sigmamo;
        if (((Record) tmpRec_15).Is(vdm_GLOBAL_SigmaMO)) 
          unArg_14 = ((Record) tmpRec_15).GetField(pos_GLOBAL_SigmaMO_tps);
        else 
          RunTime("Unknown record field selector");
        var2_12 = unArg_14.Dom();
        rexpr_10 = (Bool) (var2_12.InSet(vdm_AUX_ExtractName(vdm_AUX_new__name)));
      }
      return rexpr_10;
    }
  }
}

Bool vdm_AUX_IsTypeStructExported(Record vdm_AUX_name) {
  bool succ_3;
  Record tmpVal_4(vdm_AS_Name, length_AS_Name);
  tmpVal_4 = vdm_AUX_LookUpRename(vdm_AUX_name);
  Record vdm_AUX_new__name(vdm_AS_Name, length_AS_Name);
  succ_3 = true;
  {
    vdm_AUX_new__name = tmpVal_4;
    succ_3 = true;
  }
  if (!succ_3) 
    RunTime("Pattern match did not succeed in value definition");
  {
    Bool cond_6;
    cond_6 = vdm_AUX_IsRealName(vdm_AUX_new__name);
    if (cond_6.GetValue()) {
      bool succ_9;
      Record tmpVal_10;
      tmpVal_10 = vdm_AUX_GetModule(vdm_AUX_ExtractModule(vdm_AUX_new__name));
      Record vdm_AUX_sigmamo;
      succ_9 = true;
      {
        vdm_AUX_sigmamo = tmpVal_10;
        succ_9 = true;
      }
      if (!succ_9) 
        RunTime("Pattern match did not succeed in value definition");
      Record tmpVal_13(vdm_AS_Name, length_AS_Name);
      tmpVal_13 = vdm_AUX_ExtractName(vdm_AUX_new__name);
      Record vdm_AUX_loc__name(vdm_AS_Name, length_AS_Name);
      succ_9 = true;
      {
        vdm_AUX_loc__name = tmpVal_13;
        succ_9 = true;
      }
      if (!succ_9) 
        RunTime("Pattern match did not succeed in value definition");
      {
        Bool cond_15;
        {
          Generic var1_16;
          Record tmpRec_18;
          tmpRec_18 = vdm_AUX_sigmamo;
          if (((Record) tmpRec_18).Is(vdm_GLOBAL_SigmaMO)) 
            var1_16 = ((Record) tmpRec_18).GetField(pos_GLOBAL_SigmaMO_exp);
          else 
            if (((Record) tmpRec_18).Is(vdm_GLOBAL_SigmaIMO)) 
              var1_16 = ((Record) tmpRec_18).GetField(pos_GLOBAL_SigmaIMO_exp);
            else 
              RunTime("Unknown record field selector");
          cond_15 = (Bool) (var1_16 == Nil());
        }
        if (cond_15.GetValue()) {
          Bool rexpr_28;
          rexpr_28 = (Bool) true;
          return rexpr_28;
        }
        else {
          bool succ_19;
          Generic tmpVal_20;
          {
            Record tmpRec_21;
            tmpRec_21 = vdm_AUX_sigmamo;
            if (((Record) tmpRec_21).Is(vdm_GLOBAL_SigmaMO)) 
              tmpVal_20 = ((Record) tmpRec_21).GetField(pos_GLOBAL_SigmaMO_exp);
            else 
              if (((Record) tmpRec_21).Is(vdm_GLOBAL_SigmaIMO)) 
                tmpVal_20 = ((Record) tmpRec_21).GetField(pos_GLOBAL_SigmaIMO_exp);
              else 
                RunTime("Unknown record field selector");
          }
          Generic vdm_AUX_exp__sig;
          succ_19 = true;
          {
            vdm_AUX_exp__sig = tmpVal_20;
            succ_19 = true;
          }
          if (!succ_19) 
            RunTime("Pattern match did not succeed in value definition");
          {
            Bool rexpr_22;
            {
              Generic var1_23;
              Map tmp_m_25;
              {
                Generic tmpRec_27;
                tmpRec_27 = vdm_AUX_exp__sig;
                if (tmpRec_27.IsRecord()) 
                  if (((Record) tmpRec_27).Is(vdm_AS_ExportSig)) 
                    tmp_m_25 = ((Record) tmpRec_27).GetField(pos_AS_ExportSig_tps);
                  else 
                    RunTime("Unknown record field selector");
                else 
                  RunTime("A record was expected");
              }
              var1_23 = (Generic) (((Map) tmp_m_25)[vdm_AUX_loc__name]);
              rexpr_22 = (Bool) (!(var1_23 == Nil()));
            }
            return rexpr_22;
          }
        }
      }
    }
    else {
      Bool rexpr_8;
      rexpr_8 = (Bool) true;
      return rexpr_8;
    }
  }
}

Bool vdm_AUX_IsWhole(Record vdm_AUX_val__v) {
  Bool cond_3;
  {
    Record argTmp_4;
    argTmp_4 = vdm_AUX_val__v;
    if (argTmp_4.IsRecord()) 
      cond_3 = vdm_SEM_NUM == argTmp_4.GetTag();
    else 
      cond_3 = false;
  }
  if (cond_3.GetValue()) {
    bool succ_5;
    Record tmpVal_6;
    tmpVal_6 = vdm_AUX_val__v;
    Real vdm_AUX_val;
    succ_5 = true;
    {
      succ_5 = false;
      if (tmpVal_6.IsRecord()) 
        if (vdm_SEM_NUM == ((Record) tmpVal_6).GetTag()) {
          Sequence e_l_7;
          for (int i_8 = 1; i_8 <= ((Record) tmpVal_6).Length(); i_8++) 
            e_l_7.ImpAppend(((Record) tmpVal_6).GetField(i_8));
          if (succ_5 = 1 == (Int) (e_l_7.Length())) {
            Real permI_9;
            permI_9 = (Real) (e_l_7.Hd());
            succ_5 = true;
            {
              vdm_AUX_val = permI_9;
              succ_5 = true;
            }
          }
        }
    }
    if (!succ_5) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Bool rexpr_10;
      {
        Bool var1_11;
        Bool var1_13;
        Real argTmp_15;
        argTmp_15 = vdm_AUX_val;
        var1_13 = (Bool) (IsInteger(argTmp_15) && ((Int) argTmp_15).GetValue() >= 0);
        if (!(var1_11 = var1_13).GetValue()) {
          Bool var2_14;
          Real argTmp_16;
          argTmp_16 = vdm_AUX_val;
          var2_14 = (Bool) (IsInteger(argTmp_16));
          var1_11 = var2_14;
        }
        if (!(rexpr_10 = var1_11).GetValue()) {
          Bool var2_12;
          Int var1_17;
          if (vdm_AUX_val.IsReal()) {
            double tmp_20 = ((Real) vdm_AUX_val).GetValue();
            var1_17 = (Int) ((int) (floor(tmp_20)));
          }
          else 
            var1_17 = vdm_AUX_val;
          var2_12 = (Bool) (var1_17 == vdm_AUX_val);
          rexpr_10 = var2_12;
        }
      }
      return rexpr_10;
    }
  }
  else { RunTime("Can not evaluate an error statement"); }
}

Tuple vdm_AUX_LookUpRecSel(Record vdm_AUX_name) {
  bool succ_3;
  Record tmpVal_4(vdm_AS_Name, length_AS_Name);
  tmpVal_4 = vdm_AUX_LookUpRename(vdm_AUX_name);
  Record vdm_AUX_new__name(vdm_AS_Name, length_AS_Name);
  succ_3 = true;
  {
    vdm_AUX_new__name = tmpVal_4;
    succ_3 = true;
  }
  if (!succ_3) 
    RunTime("Pattern match did not succeed in value definition");
  {
    bool succ_6;
    Record vdm_AUX_rec__name(vdm_AS_Name, length_AS_Name);
    vdm_AUX_rec__name = vdm_AUX_ExtractName(vdm_AUX_new__name);
    Record tmpVal_9;
    tmpVal_9 = vdm_AUX_GetModule(vdm_AUX_ExtractModule(vdm_AUX_new__name));
    Record vdm_AUX_sigmamo;
    succ_6 = true;
    {
      vdm_AUX_sigmamo = tmpVal_9;
      succ_6 = true;
    }
    if (!succ_6) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Tuple rexpr_12(3);
      {
        Map tmp_m_13;
        {
          Record tmpRec_15;
          tmpRec_15 = vdm_AUX_sigmamo;
          if (((Record) tmpRec_15).Is(vdm_GLOBAL_SigmaMO)) 
            tmp_m_13 = ((Record) tmpRec_15).GetField(pos_GLOBAL_SigmaMO_recsel);
          else 
            RunTime("Unknown record field selector");
        }
        rexpr_12 = (Tuple) (((Map) tmp_m_13)[vdm_AUX_rec__name]);
      }
      return rexpr_12;
    }
  }
}

Record vdm_AUX_LookUpTypeDef(Record vdm_AUX_name) {
  bool succ_3;
  Record tmpVal_4(vdm_AS_Name, length_AS_Name);
  tmpVal_4 = vdm_AUX_LookUpRename(vdm_AUX_name);
  Record vdm_AUX_new__name(vdm_AS_Name, length_AS_Name);
  succ_3 = true;
  {
    vdm_AUX_new__name = tmpVal_4;
    succ_3 = true;
  }
  if (!succ_3) 
    RunTime("Pattern match did not succeed in value definition");
  {
    bool succ_6;
    Record tmpVal_7;
    tmpVal_7 = vdm_AUX_GetModule(vdm_AUX_ExtractModule(vdm_AUX_new__name));
    Record vdm_AUX_sigmamo;
    succ_6 = true;
    {
      vdm_AUX_sigmamo = tmpVal_7;
      succ_6 = true;
    }
    if (!succ_6) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Record rexpr_10(vdm_AS_TypeDef, length_AS_TypeDef);
      {
        Map tmp_m_11;
        {
          Record tmpRec_14;
          tmpRec_14 = vdm_AUX_sigmamo;
          if (((Record) tmpRec_14).Is(vdm_GLOBAL_SigmaMO)) 
            tmp_m_11 = ((Record) tmpRec_14).GetField(pos_GLOBAL_SigmaMO_tps);
          else 
            RunTime("Unknown record field selector");
        }
        rexpr_10 = (Record) (((Map) tmp_m_11)[vdm_AUX_ExtractName(vdm_AUX_new__name)]);
      }
      return rexpr_10;
    }
  }
}

Bool vdm_AUX_Min(Record vdm_AUX_n__v, Set vdm_AUX_set__sv) {
  Bool cond_4;
  {
    Record argTmp_5;
    argTmp_5 = vdm_AUX_n__v;
    if (argTmp_5.IsRecord()) 
      cond_4 = vdm_SEM_NUM == argTmp_5.GetTag();
    else 
      cond_4 = false;
  }
  if (cond_4.GetValue()) {
    bool succ_6;
    Record tmpVal_7;
    tmpVal_7 = vdm_AUX_n__v;
    Real vdm_AUX_n;
    succ_6 = true;
    {
      succ_6 = false;
      if (tmpVal_7.IsRecord()) 
        if (vdm_SEM_NUM == ((Record) tmpVal_7).GetTag()) {
          Sequence e_l_8;
          for (int i_9 = 1; i_9 <= ((Record) tmpVal_7).Length(); i_9++) 
            e_l_8.ImpAppend(((Record) tmpVal_7).GetField(i_9));
          if (succ_6 = 1 == (Int) (e_l_8.Length())) {
            Real permI_10;
            permI_10 = (Real) (e_l_8.Hd());
            succ_6 = true;
            {
              vdm_AUX_n = permI_10;
              succ_6 = true;
            }
          }
        }
    }
    if (!succ_6) 
      RunTime("Pattern match did not succeed in value definition");
    {
      Set iset_11;
      iset_11 = vdm_AUX_set__sv;
      Record vdm_AUX_e__v;
      bool succ_13;
      Generic tmpe_26;
      for (int bb_25 = iset_11.First(tmpe_26); bb_25; bb_25 = iset_11.Next(tmpe_26)) {
        Record elem_12 = tmpe_26;
        {
          succ_13 = true;
          {
            vdm_AUX_e__v = elem_12;
            succ_13 = true;
          }
          if (succ_13) {
            Bool cond_14;
            {
              Record argTmp_15;
              argTmp_15 = vdm_AUX_e__v;
              if (argTmp_15.IsRecord()) 
                cond_14 = vdm_SEM_NUM == argTmp_15.GetTag();
              else 
                cond_14 = false;
            }
            if (cond_14.GetValue()) {
              bool succ_16;
              Record tmpVal_17;
              tmpVal_17 = vdm_AUX_e__v;
              Real vdm_AUX_e;
              succ_16 = true;
              {
                succ_16 = false;
                if (tmpVal_17.IsRecord()) 
                  if (vdm_SEM_NUM == ((Record) tmpVal_17).GetTag()) {
                    Sequence e_l_18;
                    for (int i_19 = 1; i_19 <= ((Record) tmpVal_17).Length(); i_19++) 
                      e_l_18.ImpAppend(((Record) tmpVal_17).GetField(i_19));
                    if (succ_16 = 1 == (Int) (e_l_18.Length())) {
                      Real permI_20;
                      permI_20 = (Real) (e_l_18.Hd());
                      succ_16 = true;
                      {
                        vdm_AUX_e = permI_20;
                        succ_16 = true;
                      }
                    }
                  }
              }
              if (!succ_16) 
                RunTime("Pattern match did not succeed in value definition");
              {
                Bool cond_21;
                cond_21 = (Bool) ((vdm_AUX_e.GetValue()) < (vdm_AUX_n.GetValue()));
                if (cond_21.GetValue()) {
                  Bool rexpr_24;
                  rexpr_24 = (Bool) false;
                  return rexpr_24;
                }
              }
            }
            else { RunTime("Can not evaluate an error statement"); }
          }
          else 
            RunTime("Pattern did not match in set for loop");
        }
      }
    }
    {
      Bool rexpr_27;
      rexpr_27 = (Bool) true;
      return rexpr_27;
    }
  }
  else { RunTime("Can not evaluate an error statement"); }
}

Record vdm_AUX_MkBlkEnv(Record vdm_AUX_id, Record vdm_AUX_val__v, Generic vdm_AUX_tp, Generic vdm_AUX_perm) {
  Record rexpr_6(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
  {
    rexpr_6 = Record(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
    Sequence tmpVar_7;
    {
      Record tmpVar_8(vdm_SEM_IdVal, length_SEM_IdVal);
      tmpVar_8 = Record(vdm_SEM_IdVal, length_SEM_IdVal);
      tmpVar_8.SetField(1, vdm_AUX_id);
      tmpVar_8.SetField(2, vdm_AUX_val__v);
      tmpVar_8.SetField(3, vdm_AUX_tp);
      tmpVar_7 = Sequence().ImpAppend(tmpVar_8);
    }
    rexpr_6.SetField(1, tmpVar_7);
    rexpr_6.SetField(2, vdm_AUX_perm);
  }
  return rexpr_6;
}

Record vdm_AUX_MkEmptyBlkEnv(Generic vdm_AUX_perm) {
  Record rexpr_3(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
  {
    rexpr_3 = Record(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
    Sequence tmpVar_4;
    tmpVar_4 = Sequence();
    rexpr_3.SetField(1, tmpVar_4);
    rexpr_3.SetField(2, vdm_AUX_perm);
  }
  return rexpr_3;
}

Sequence vdm_AUX_ReverseSeq(Sequence vdm_AUX_seq__lv) {
  Int vdm_AUX_l;
  vdm_AUX_l = (Int) (vdm_AUX_seq__lv.Length()) + (Int) 1;
  {
    Bool cond_8;
    cond_8 = (Bool) (vdm_AUX_l == (Int) 1);
    if (cond_8.GetValue()) {
      Sequence rexpr_29;
      rexpr_29 = Sequence();
      return rexpr_29;
    }
    else {
      Sequence rexpr_11;
      {
        Sequence res_l_12;
        Record reselem_13;
        Set resBind_s_15;
        {
          Set riseq_20;
          int max_21 = (Int) (vdm_AUX_seq__lv.Length());
          for (int i_22 = 1; i_22 <= max_21; i_22++) 
            riseq_20.Insert((Int) i_22);
          resBind_s_15 = riseq_20;
        }
        Sequence bind_l_14;
        if ((Int) (resBind_s_15.Card()) != (Int) 0) 
          bind_l_14 = Sort(resBind_s_15);
        bool succ_16 = true;
        Int vdm_AUX_i;
        Generic tmpe_28;
        for (int i_27 = bind_l_14.First(tmpe_28); i_27; i_27 = bind_l_14.Next(tmpe_28)) {
          Int e_18 = tmpe_28;
          {
            vdm_AUX_i = e_18;
            succ_16 = true;
            if (succ_16) {
              Sequence tmpseq_23;
              tmpseq_23 = vdm_AUX_seq__lv;
              reselem_13 = (Record) (tmpseq_23[(vdm_AUX_l - vdm_AUX_i).GetValue()]);
              res_l_12.ImpAppend(reselem_13);
            }
          }
        }
        rexpr_11 = res_l_12;
      }
      return rexpr_11;
    }
  }
}

Set vdm_AUX_SeqOfSetOf2SetOfSeqOf(Sequence vdm_AUX_seq__ls) {
  Set vdm_AUX_res__s;
  {
    Sequence tmpVar_3;
    tmpVar_3 = Sequence();
    vdm_AUX_res__s = Set().Insert(tmpVar_3);
  }
  Set vdm_AUX_tmpres__s;
  {
    Sequence sq_4;
    sq_4 = vdm_AUX_seq__ls;
    Set vdm_AUX_tmp__s;
    bool succ_6;
    Generic tmpe_27;
    for (int i_26 = sq_4.First(tmpe_27); i_26; i_26 = sq_4.Next(tmpe_27)) {
      Set elem_5 = tmpe_27;
      {
        succ_6 = true;
        {
          vdm_AUX_tmp__s = elem_5;
          succ_6 = true;
        }
        if (succ_6) {
          Set rhs_7;
          rhs_7 = Set();
          vdm_AUX_tmpres__s = rhs_7;
          {
            Set iset_8;
            iset_8 = vdm_AUX_res__s;
            Sequence vdm_AUX_tmp__l;
            bool succ_10;
            Generic tmpe_24;
            for (int bb_23 = iset_8.First(tmpe_24); bb_23; bb_23 = iset_8.Next(tmpe_24)) {
              Sequence elem_9 = tmpe_24;
              {
                succ_10 = true;
                {
                  vdm_AUX_tmp__l = elem_9;
                  succ_10 = true;
                }
                if (succ_10) {
                  Set iset_11;
                  iset_11 = vdm_AUX_tmp__s;
                  Record vdm_AUX_e;
                  bool succ_13;
                  Generic tmpe_22;
                  for (int bb_21 = iset_11.First(tmpe_22); bb_21; bb_21 = iset_11.Next(tmpe_22)) {
                    Record elem_12 = tmpe_22;
                    {
                      succ_13 = true;
                      {
                        vdm_AUX_e = elem_12;
                        succ_13 = true;
                      }
                      if (succ_13) {
                        Set rhs_14;
                        {
                          Set var2_16;
                          Sequence tmpVar_17;
                          Sequence var2_19;
                          var2_19 = Sequence().ImpAppend(vdm_AUX_e);
                          tmpVar_17.ImpConc(vdm_AUX_tmp__l).ImpConc(var2_19);
                          var2_16 = Set().Insert(tmpVar_17);
                          rhs_14 = vdm_AUX_tmpres__s;
                          rhs_14.ImpUnion(var2_16);
                        }
                        vdm_AUX_tmpres__s = rhs_14;
                      }
                      else 
                        RunTime("Pattern did not match in set for loop");
                    }
                  }
                }
                else 
                  RunTime("Pattern did not match in set for loop");
              }
            }
          }
          {
            Set rhs_25;
            rhs_25 = vdm_AUX_tmpres__s;
            vdm_AUX_res__s = rhs_25;
          }
        }
        else 
          RunTime("Pattern did not match in sequence for loop");
      }
    }
  }
  {
    Set rexpr_28;
    rexpr_28 = vdm_AUX_res__s;
    return rexpr_28;
  }
}

Sequence vdm_AUX_SetToSeq(Set vdm_AUX_val__sv) {
  Bool cond_3;
  {
    Set var2_5;
    var2_5 = Set();
    cond_3 = (Bool) (vdm_AUX_val__sv == var2_5);
  }
  if (cond_3.GetValue()) {
    Sequence rexpr_22;
    rexpr_22 = Sequence();
    return rexpr_22;
  }
  else {
    Set tmpSet_6;
    tmpSet_6 = vdm_AUX_val__sv;
    Record vdm_AUX_elem;
    Bool tmpB_7;
    bool succ_8 = false;
    Generic tmpe_13;
    for (int bb_12 = tmpSet_6.First(tmpe_13); bb_12 && !succ_8; bb_12 = tmpSet_6.Next(tmpe_13)) {
      Record tmpElem_9 = tmpe_13;
      {
        succ_8 = true;
        {
          vdm_AUX_elem = tmpElem_9;
          succ_8 = true;
        }
        if (succ_8) 
          succ_8 = vdm_AUX_Min(vdm_AUX_elem, vdm_AUX_val__sv).GetValue();
      }
    }
    if (!succ_8) 
      RunTime("The binding environment was empty");
    {
      Sequence rexpr_14;
      {
        Sequence var1_15;
        var1_15 = Sequence().ImpAppend(vdm_AUX_elem);
        Sequence var2_16;
        Set tmpVar_18;
        {
          Set var2_20;
          var2_20 = Set().Insert(vdm_AUX_elem);
          tmpVar_18 = vdm_AUX_val__sv;
          tmpVar_18.ImpDiff(var2_20);
        }
        var2_16 = vdm_AUX_SetToSeq(tmpVar_18);
        rexpr_14.ImpConc(var1_15).ImpConc(var2_16);
      }
      return rexpr_14;
    }
  }
}

Record vdm_AUX_UniqueTagName(Record vdm_AUX_tname) {
  Record selRes_3(vdm_AS_Name, length_AS_Name);
  selRes_3 = vdm_AUX_LookUpRename(vdm_AUX_tname);
  bool succ_4 = true;
  {
    Sequence vdm_AUX_id;
    Generic vdm_AUX_tp;
    {
      succ_4 = false;
      if (selRes_3.IsRecord()) 
        if (vdm_AS_Name == selRes_3.GetTag()) {
          Sequence e_l_6;
          for (int i_7 = 1; i_7 <= selRes_3.Length(); i_7++) 
            e_l_6.ImpAppend(selRes_3.GetField(i_7));
          if (succ_4 = 2 == (Int) (e_l_6.Length())) {
            Generic permI_8;
            permI_8 = (Generic) (e_l_6.Hd());
            succ_4 = true;
{ if (succ_4 = permI_8.IsSequence()) {
   Sequence tmpvarExpr_9 = permI_8;
   if (succ_4 = 1 == (Int) (tmpvarExpr_9.Length())) {
     Sequence permI_10;
     permI_10 = (Sequence) (tmpvarExpr_9.Hd());
     succ_4 = true;
     {
       vdm_AUX_id = permI_10;
       succ_4 = true;
     }
   }
 } }
            permI_8 = (Generic) (e_l_6[2]);
            if (succ_4) {
              vdm_AUX_tp = permI_8;
              succ_4 = true;
            }
          }
        }
    }
    if (succ_4) {
      bool succ_11;
      Record tmpVal_12(vdm_AS_Name, length_AS_Name);
      tmpVal_12 = vdm_AUX_ExtractName(vdm_AUX_CurrentModule());
      Sequence vdm_AUX_mnm;
      succ_11 = true;
      {
        succ_11 = false;
        if (tmpVal_12.IsRecord()) 
          if (vdm_AS_Name == tmpVal_12.GetTag()) {
            Sequence e_l_14;
            for (int i_15 = 1; i_15 <= tmpVal_12.Length(); i_15++) 
              e_l_14.ImpAppend(tmpVal_12.GetField(i_15));
            if (succ_11 = 2 == (Int) (e_l_14.Length())) {
              Generic permI_16;
              permI_16 = (Generic) (e_l_14.Hd());
              succ_11 = true;
{ if (succ_11 = permI_16.IsSequence()) {
   Sequence tmpvarExpr_17 = permI_16;
   if (succ_11 = 1 == (Int) (tmpvarExpr_17.Length())) {
     Sequence permI_18;
     permI_18 = (Sequence) (tmpvarExpr_17.Hd());
     succ_11 = true;
     {
       vdm_AUX_mnm = permI_18;
       succ_11 = true;
     }
   }
 } }
              permI_16 = (Generic) (e_l_14[2]);
              if (succ_11) 
                succ_11 = true;
            }
          }
      }
      if (!succ_11) 
        RunTime("Pattern match did not succeed in value definition");
      {
        Record rexpr_19(vdm_AS_Name, length_AS_Name);
        {
          rexpr_19 = Record(vdm_AS_Name, length_AS_Name);
          Sequence tmpVar_20;
          {
            tmpVar_20 = Sequence().ImpAppend(vdm_AUX_mnm);
            tmpVar_20.ImpAppend(vdm_AUX_id);
          }
          rexpr_19.SetField(1, tmpVar_20);
          rexpr_19.SetField(2, vdm_AUX_tp);
        }
        return rexpr_19;
      }
    }
  }
  if (!succ_4) {
    Record vdm_AUX_nm(vdm_AS_Name, length_AS_Name);
    {
      vdm_AUX_nm = selRes_3;
      succ_4 = true;
    }
    if (succ_4) {
      Record rexpr_24(vdm_AS_Name, length_AS_Name);
      rexpr_24 = vdm_AUX_nm;
      return rexpr_24;
    }
  }
}

Sequence vdm_AUX_ValSetToSeq(Set vdm_AUX_set__sv) {
  Sequence vdm_AUX_res__lv;
  vdm_AUX_res__lv = Sequence();
  {
    Set iset_3;
    iset_3 = vdm_AUX_set__sv;
    Record vdm_AUX_val__v;
    bool succ_5;
    Generic tmpe_11;
    for (int bb_10 = iset_3.First(tmpe_11); bb_10; bb_10 = iset_3.Next(tmpe_11)) {
      Record elem_4 = tmpe_11;
      {
        succ_5 = true;
        {
          vdm_AUX_val__v = elem_4;
          succ_5 = true;
        }
        if (succ_5) {
          Sequence rhs_6;
          {
            Sequence var2_8;
            var2_8 = Sequence().ImpAppend(vdm_AUX_val__v);
            rhs_6.ImpConc(vdm_AUX_res__lv).ImpConc(var2_8);
          }
          vdm_AUX_res__lv = rhs_6;
        }
        else 
          RunTime("Pattern did not match in set for loop");
      }
    }
  }
  {
    Sequence rexpr_12;
    rexpr_12 = vdm_AUX_res__lv;
    return rexpr_12;
  }
}
