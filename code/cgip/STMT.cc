//
// THIS FILE IS AUTOMATICALLY GENERATED!!
//
// Generated at Fri 10-Jan-97 by the VDM-SLtoC++ Code Generator
// (vdmde - v3.0l - Fri 10-Jan-97)
//
// Supported compiler: g++ version 2.7.2
//



#include "STMT.h"

#define vdm_STMT_CombineBlkEnv vdm_AUX_CombineBlkEnv
#define vdm_STMT_ExtractId vdm_AUX_ExtractId
#define vdm_STMT_IsDefinedInModule vdm_AUX_IsDefinedInModule
#define vdm_STMT_LookUpRecSel vdm_AUX_LookUpRecSel
#define vdm_STMT_MkBlkEnv vdm_AUX_MkBlkEnv
#define vdm_STMT_MkEmptyBlkEnv vdm_AUX_MkEmptyBlkEnv
#define vdm_STMT_PermuteStmt vdm_AUX_PermuteStmt
#define vdm_STMT_ReverseSeq vdm_AUX_ReverseSeq
#define vdm_STMT_EvalExpr vdm_EXPR_EvalExpr
#define vdm_STMT_IdentInPattern vdm_FREE_IdentInPattern
#define vdm_STMT_ConstructFN vdm_PAT_ConstructFN
#define vdm_STMT_EvalBind vdm_PAT_EvalBind
#define vdm_STMT_MatchLists vdm_PAT_MatchLists
#define vdm_STMT_PatternMatch vdm_PAT_PatternMatch
#define vdm_STMT_DTC vdm_SETTINGS_DTC
#define vdm_STMT_PostCheck vdm_SETTINGS_PostCheck
#define vdm_STMT_PreCheck vdm_SETTINGS_PreCheck
#define vdm_STMT_EvalBlockStmt vdm_STATE_EvalBlockStmt
#define vdm_STMT_EvalCallStmt vdm_STATE_EvalCallStmt
#define vdm_STMT_EvalStateDesignator vdm_STATE_EvalStateDesignator
#define vdm_STMT_ExtractModule vdm_STATE_ExtractModule
#define vdm_STMT_GetModule vdm_STATE_GetModule
#define vdm_STMT_IsOpApply vdm_STATE_IsOpApply
#define vdm_STMT_IsTheState vdm_STATE_IsTheState
#define vdm_STMT_PopBlkEnv vdm_STATE_PopBlkEnv
#define vdm_STMT_PushBlkEnv vdm_STATE_PushBlkEnv
#define vdm_STMT_SetTheState vdm_STATE_SetTheState
#define vdm_STMT_SubType vdm_STATE_SubType

static Record vdm_STMT_EvalAlwaysStmt(Record);
static Record vdm_STMT_EvalAssignStmt(Record);
static Record vdm_STMT_EvalCasesStmt(Record);
static Record vdm_STMT_EvalDefStmt(Record);
static Record vdm_STMT_EvalExitStmt(Record);
static Record vdm_STMT_EvalIfStmt(Record);
static Record vdm_STMT_EvalIndexForLoopStmt(Record);
static Record vdm_STMT_EvalLetBeSTStmt(Record);
static Record vdm_STMT_EvalLetStmt(Record);
static Record vdm_STMT_EvalNonDetStmt(Record);
static Record vdm_STMT_EvalOpApply(Record);
static Record vdm_STMT_EvalRecTrapStmt(Record);
static Record vdm_STMT_EvalReturnStmt(Record);
static Record vdm_STMT_EvalSeqForLoopStmt(Record);
static Record vdm_STMT_EvalSetForLoopStmt(Record);
static Record vdm_STMT_EvalTrapStmt(Record);
static Record vdm_STMT_EvalWhileLoopStmt(Record);
static Bool vdm_STMT_IsProperStateType(Record, Record);
static Record vdm_STMT_SDtoExpr(Record);

void init_STMT() {}

Record vdm_STMT_SDtoExpr(Record vdm_STMT_sd) {
  Record varRes_3;
  {
    Record selRes_4;
    selRes_4 = vdm_STMT_sd;
    bool succ_5 = true;
    {
      succ_5 = false;
      if (selRes_4.IsRecord()) 
        if (vdm_AS_Name == ((Record) selRes_4).GetTag()) {
          Sequence e_l_6;
          for (int i_7 = 1; i_7 <= ((Record) selRes_4).Length(); i_7++) 
            e_l_6.ImpAppend(((Record) selRes_4).GetField(i_7));
          if (succ_5 = 2 == (Int) (e_l_6.Length())) {
            Generic permI_8;
            permI_8 = (Generic) (e_l_6.Hd());
            succ_5 = true;
            succ_5 = true;
            permI_8 = (Generic) (e_l_6[2]);
            if (succ_5) 
              succ_5 = true;
          }
        }
      if (succ_5) 
        varRes_3 = vdm_STMT_sd;
    }
    if (!succ_5) {
      Record vdm_STMT_sel(vdm_AS_Name, length_AS_Name);
      Record vdm_STMT_var;
      {
        succ_5 = false;
        if (selRes_4.IsRecord()) 
          if (vdm_AS_FieldRef == ((Record) selRes_4).GetTag()) {
            Sequence e_l_9;
            for (int i_10 = 1; i_10 <= ((Record) selRes_4).Length(); i_10++) 
              e_l_9.ImpAppend(((Record) selRes_4).GetField(i_10));
            if (succ_5 = 2 == (Int) (e_l_9.Length())) {
              Record permI_11;
              permI_11 = (Record) (e_l_9.Hd());
              succ_5 = true;
              {
                vdm_STMT_var = permI_11;
                succ_5 = true;
              }
              permI_11 = (Record) (e_l_9[2]);
              if (succ_5) {
                vdm_STMT_sel = permI_11;
                succ_5 = true;
              }
            }
          }
      }
      if (succ_5) {
        varRes_3 = Record(vdm_AS_FieldSelectExpr, length_AS_FieldSelectExpr);
        varRes_3.SetField(1, vdm_STMT_SDtoExpr(vdm_STMT_var));
        varRes_3.SetField(2, vdm_STMT_sel);
        varRes_3.SetField(3, Nil());
      }
    }
    if (!succ_5) {
      Record vdm_STMT_sel;
      Record vdm_STMT_var;
      {
        succ_5 = false;
        if (selRes_4.IsRecord()) 
          if (vdm_AS_MapOrSeqRef == ((Record) selRes_4).GetTag()) {
            Sequence e_l_16;
            for (int i_17 = 1; i_17 <= ((Record) selRes_4).Length(); i_17++) 
              e_l_16.ImpAppend(((Record) selRes_4).GetField(i_17));
            if (succ_5 = 2 == (Int) (e_l_16.Length())) {
              Record permI_18;
              permI_18 = (Record) (e_l_16.Hd());
              succ_5 = true;
              {
                vdm_STMT_var = permI_18;
                succ_5 = true;
              }
              permI_18 = (Record) (e_l_16[2]);
              if (succ_5) {
                vdm_STMT_sel = permI_18;
                succ_5 = true;
              }
            }
          }
      }
      if (succ_5) {
        varRes_3 = Record(vdm_AS_ApplyExpr, length_AS_ApplyExpr);
        varRes_3.SetField(1, vdm_STMT_SDtoExpr(vdm_STMT_var));
        Sequence tmpVar_21;
        tmpVar_21 = Sequence().ImpAppend(vdm_STMT_sel);
        varRes_3.SetField(2, tmpVar_21);
        varRes_3.SetField(3, Nil());
      }
    }
    if (!succ_5) 
      RunTime("Can not evaluate an undefined expression");
  }
  return varRes_3;
}

Record vdm_STMT_EvalAlwaysStmt(Record var_1_1) {
  Record vdm_STMT_Post;
  Record vdm_STMT_body;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_AlwaysStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 2 == (Int) (e_l_3.Length())) {
          Record permI_5;
          permI_5 = (Record) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_Post = permI_5;
            succ_2 = true;
          }
          permI_5 = (Record) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_body = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Record vdm_STMT_bval__v;
    vdm_STMT_bval__v = vdm_STMT_EvalStmt(vdm_STMT_body);
    Record vdm_STMT_pval__v;
    vdm_STMT_pval__v = vdm_STMT_EvalStmt(vdm_STMT_Post);
    {
      Bool cond_11;
      {
        Bool unArg_12;
        Record argTmp_13;
        argTmp_13 = vdm_STMT_pval__v;
        if (argTmp_13.IsRecord()) 
          unArg_12 = vdm_SEM_EXIT == argTmp_13.GetTag();
        else 
          unArg_12 = false;
        cond_11 = (Bool) (!unArg_12.GetValue());
      }
      if (cond_11.GetValue()) {
        Record rexpr_15;
        rexpr_15 = vdm_STMT_bval__v;
        return rexpr_15;
      }
      else {
        Record rexpr_14;
        rexpr_14 = vdm_STMT_pval__v;
        return rexpr_14;
      }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalAlwaysStmt");
}

Record vdm_STMT_EvalAssignInit(Record vdm_STMT_expr) {
  Bool cond_3;
  {
    Record argTmp_4;
    argTmp_4 = vdm_STMT_expr;
    if (argTmp_4.IsRecord()) 
      cond_3 = vdm_AS_ApplyExpr == argTmp_4.GetTag();
    else 
      cond_3 = false;
  }
  if (cond_3.GetValue()) {
    Bool cond_6;
    cond_6 = vdm_STMT_IsOpApply(vdm_STMT_expr);
    if (cond_6.GetValue()) {
      bool succ_9;
      Record tmpVal_10;
      tmpVal_10 = vdm_STMT_EvalOpApply(vdm_STMT_expr);
      Record vdm_STMT_val__v;
      succ_9 = true;
      {
        vdm_STMT_val__v = tmpVal_10;
        succ_9 = true;
      }
      if (!succ_9) 
        RunTime("Pattern match did not succeed in value definition");
      {
        Bool cond_12;
        {
          Bool unArg_13;
          Record argTmp_14;
          argTmp_14 = vdm_STMT_val__v;
          if (argTmp_14.IsRecord()) 
            unArg_13 = vdm_SEM_CONT == argTmp_14.GetTag();
          else 
            unArg_13 = false;
          cond_12 = (Bool) (!unArg_13.GetValue());
        }
        if (cond_12.GetValue()) {
          Record rexpr_15;
          rexpr_15 = vdm_STMT_val__v;
          return rexpr_15;
        }
        else { RunTime("Can not evaluate an error statement"); }
      }
    }
    else {
      Record tmpVar_8;
      tmpVar_8 = vdm_STMT_expr;
      return vdm_STMT_EvalExpr(tmpVar_8);
    }
  }
  else {
    Record tmpVar_5;
    tmpVar_5 = vdm_STMT_expr;
    return vdm_STMT_EvalExpr(tmpVar_5);
  }
}

Record vdm_STMT_EvalAssignStmt(Record var_1_1) {
  Record vdm_STMT_lhs;
  Record vdm_STMT_rhs;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_AssignStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 2 == (Int) (e_l_3.Length())) {
          Record permI_5;
          permI_5 = (Record) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_lhs = permI_5;
            succ_2 = true;
          }
          permI_5 = (Record) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_rhs = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Record vdm_STMT_rhs__v;
    {
      Bool cond_6;
      {
        Record argTmp_7;
        argTmp_7 = vdm_STMT_rhs;
        if (argTmp_7.IsRecord()) 
          cond_6 = vdm_AS_ApplyExpr == argTmp_7.GetTag();
        else 
          cond_6 = false;
      }
      if (cond_6.GetValue()) {
        Bool cond_10;
        cond_10 = vdm_STMT_IsOpApply(vdm_STMT_rhs);
        if (cond_10.GetValue()) {
          Record vdm_STMT_tmp__v;
          vdm_STMT_tmp__v = vdm_STMT_EvalOpApply(vdm_STMT_rhs);
          {
            Bool cond_17;
            {
              Record argTmp_18;
              argTmp_18 = vdm_STMT_tmp__v;
              if (argTmp_18.IsRecord()) 
                cond_17 = vdm_SEM_EXIT == argTmp_18.GetTag();
              else 
                cond_17 = false;
            }
            if (cond_17.GetValue()) {
              Record rexpr_21;
              rexpr_21 = vdm_STMT_tmp__v;
              return rexpr_21;
            }
            else {
              Record argTmp_20;
              argTmp_20 = vdm_STMT_tmp__v;
              if (argTmp_20.IsRecord()) 
                cond_17 = vdm_SEM_CONT == argTmp_20.GetTag();
              else 
                cond_17 = false;
              if (cond_17.GetValue()) 
                RunTime("Can not evaluate an error statement");
              else {
                Record rhs_19;
                rhs_19 = vdm_STMT_tmp__v;
                vdm_STMT_rhs__v = rhs_19;
              }
            }
          }
        }
        else {
          Record rhs_12;
          rhs_12 = vdm_STMT_EvalExpr(vdm_STMT_rhs);
          vdm_STMT_rhs__v = rhs_12;
        }
      }
      else {
        Record rhs_8;
        rhs_8 = vdm_STMT_EvalExpr(vdm_STMT_rhs);
        vdm_STMT_rhs__v = rhs_8;
      }
    }
    {
      Bool cond_22;
      {
        Bool var1_23;
        Record argTmp_25;
        argTmp_25 = vdm_STMT_lhs;
        if (argTmp_25.IsRecord()) 
          var1_23 = vdm_AS_Name == argTmp_25.GetTag();
        else 
          var1_23 = false;
        if ((cond_22 = var1_23).GetValue()) { cond_22 = vdm_STMT_IsTheState(vdm_STMT_lhs); }
      }
      if (cond_22.GetValue()) {
        Record tmpVar_29;
        tmpVar_29 = vdm_STMT_lhs;
        Record tmpVar_30;
        tmpVar_30 = vdm_STMT_rhs__v;
        vdm_STMT_SetTheState(tmpVar_29, tmpVar_30);
      }
      else {
        Record tmpVar_27;
        tmpVar_27 = vdm_STMT_lhs;
        Record tmpVar_28;
        tmpVar_28 = vdm_STMT_rhs__v;
        vdm_STMT_EvalStateDesignator(tmpVar_27, tmpVar_28);
      }
    }
    {
      Record rexpr_31(vdm_SEM_CONT, length_SEM_CONT);
      rexpr_31 = Record(vdm_SEM_CONT, length_SEM_CONT);
      return rexpr_31;
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalAssignStmt");
}

Record vdm_STMT_EvalCasesStmt(Record var_1_1) {
  Generic vdm_STMT_Others;
  Sequence vdm_STMT_altns;
  Record vdm_STMT_sel;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_CasesStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 3 == (Int) (e_l_3.Length())) {
          Generic permI_5;
          permI_5 = (Generic) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_sel = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_altns = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[3]);
          if (succ_2) {
            vdm_STMT_Others = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Sequence vdm_STMT_alt__l;
    vdm_STMT_alt__l = vdm_STMT_altns;
    Sequence vdm_STMT_pat__lp;
    Bool vdm_STMT_cont;
    vdm_STMT_cont = (Bool) true;
    Record vdm_STMT_res;
    {
      Record vdm_STMT_sel__v;
      vdm_STMT_sel__v = vdm_STMT_EvalExpr(vdm_STMT_sel);
      {
        Bool whCrtl_9;
        while ( true){
          Bool var1_10;
          Sequence var2_13;
          var2_13 = Sequence();
          var1_10 = (Bool) (!(vdm_STMT_alt__l == var2_13));
          if ((whCrtl_9 = var1_10).GetValue()) { whCrtl_9 = vdm_STMT_cont; }
          if (whCrtl_9.GetValue()) {
            bool succ_14;
            Record tmpVal_15(vdm_AS_CasesStmtAltn, length_AS_CasesStmtAltn);
            tmpVal_15 = (Record) (vdm_STMT_alt__l.Hd());
            Record vdm_STMT_body;
            Sequence vdm_STMT_match__lp;
            succ_14 = true;
            {
              succ_14 = false;
              if (tmpVal_15.IsRecord()) 
                if (vdm_AS_CasesStmtAltn == tmpVal_15.GetTag()) {
                  Sequence e_l_17;
                  for (int i_18 = 1; i_18 <= tmpVal_15.Length(); i_18++) 
                    e_l_17.ImpAppend(tmpVal_15.GetField(i_18));
                  if (succ_14 = 2 == (Int) (e_l_17.Length())) {
                    Generic permI_19;
                    permI_19 = (Generic) (e_l_17.Hd());
                    succ_14 = true;
                    {
                      vdm_STMT_match__lp = permI_19;
                      succ_14 = true;
                    }
                    permI_19 = (Generic) (e_l_17[2]);
                    if (succ_14) {
                      vdm_STMT_body = permI_19;
                      succ_14 = true;
                    }
                  }
                }
            }
            if (!succ_14) 
              RunTime("Pattern match did not succeed in value definition");
            {
              Sequence rhs_20;
              rhs_20 = vdm_STMT_match__lp;
              vdm_STMT_pat__lp = rhs_20;
              {
                Bool whCrtl_21;
                while ( true){
                  Bool var1_22;
                  Sequence var2_25;
                  var2_25 = Sequence();
                  var1_22 = (Bool) (!(vdm_STMT_pat__lp == var2_25));
                  if ((whCrtl_21 = var1_22).GetValue()) { whCrtl_21 = vdm_STMT_cont; }
                  if (whCrtl_21.GetValue()) {
                    bool succ_26;
                    Record tmpVal_27;
                    tmpVal_27 = (Record) (vdm_STMT_pat__lp.Hd());
                    Record vdm_STMT_pat__p;
                    succ_26 = true;
                    {
                      vdm_STMT_pat__p = tmpVal_27;
                      succ_26 = true;
                    }
                    if (!succ_26) 
                      RunTime("Pattern match did not succeed in value definition");
                    {
                      Set vdm_STMT_env__s;
                      vdm_STMT_env__s = vdm_STMT_PatternMatch(vdm_STMT_pat__p, vdm_STMT_sel__v);
                      {
                        Bool cond_33;
                        {
                          Set var2_35;
                          var2_35 = Set();
                          cond_33 = (Bool) (!(vdm_STMT_env__s == var2_35));
                        }
                        if (cond_33.GetValue()) {
                          Set tmpSet_36;
                          tmpSet_36 = vdm_STMT_env__s;
                          Record vdm_STMT_env(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                          Bool tmpB_37;
                          bool succ_38 = false;
                          Generic tmpe_41;
                          for (int bb_40 = tmpSet_36.First(tmpe_41); bb_40 && !succ_38; bb_40 = tmpSet_36.Next(tmpe_41)) {
                            Record tmpElem_39 = tmpe_41;
                            {
                              succ_38 = true;
                              {
                                vdm_STMT_env = tmpElem_39;
                                succ_38 = true;
                              }
                              if (succ_38) 
                                succ_38 = ((Bool) true).GetValue();
                            }
                          }
                          if (!succ_38) 
                            RunTime("The binding environment was empty");
                          {
                            Record tmpVar_42(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                            tmpVar_42 = vdm_STMT_env;
                            vdm_STMT_PushBlkEnv(tmpVar_42);
                            {
                              Record rhs_43;
                              rhs_43 = vdm_STMT_EvalStmt(vdm_STMT_body);
                              vdm_STMT_res = rhs_43;
                            }
                            vdm_STMT_PopBlkEnv();
                            {
                              Bool rhs_45;
                              rhs_45 = (Bool) false;
                              vdm_STMT_cont = rhs_45;
                            }
                          }
                        }
                        {
                          Sequence rhs_46;
                          rhs_46 = vdm_STMT_pat__lp.Tl();
                          vdm_STMT_pat__lp = rhs_46;
                        }
                      }
                    }
                  }
                  else 
                    break;
                }
              }
              {
                Sequence rhs_48;
                rhs_48 = vdm_STMT_alt__l.Tl();
                vdm_STMT_alt__l = rhs_48;
              }
            }
          }
          else 
            break;
        }
        {
          Bool cond_50;
          cond_50 = (Bool) (!vdm_STMT_cont.GetValue());
          if (cond_50.GetValue()) {
            Record rexpr_56;
            rexpr_56 = vdm_STMT_res;
            return rexpr_56;
          }
          else {
            cond_50 = (Bool) (!(vdm_STMT_Others == Nil()));
            if (cond_50.GetValue()) {
              Generic tmpVar_55;
              tmpVar_55 = vdm_STMT_Others;
              return vdm_STMT_EvalStmt(tmpVar_55);
            }
            else {
              Record rexpr_52(vdm_SEM_CONT, length_SEM_CONT);
              rexpr_52 = Record(vdm_SEM_CONT, length_SEM_CONT);
              return rexpr_52;
            }
          }
        }
      }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalCasesStmt");
}

Record vdm_STMT_EvalDefStmt(Record var_1_1) {
  Record vdm_STMT_In;
  Sequence vdm_STMT_value;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_DefStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 2 == (Int) (e_l_3.Length())) {
          Generic permI_5;
          permI_5 = (Generic) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_value = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_In = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Sequence vdm_STMT_pat__lp;
    vdm_STMT_pat__lp = Sequence();
    Sequence vdm_STMT_val__lv;
    vdm_STMT_val__lv = Sequence();
    Record vdm_STMT_val__v;
    {
      Sequence sq_6;
      sq_6 = vdm_STMT_value;
      Tuple vdm_STMT_elm(2);
      bool succ_8;
      Generic tmpe_79;
      for (int i_78 = sq_6.First(tmpe_79); i_78; i_78 = sq_6.Next(tmpe_79)) {
        Tuple elem_7 = tmpe_79;
        {
          succ_8 = true;
          {
            vdm_STMT_elm = elem_7;
            succ_8 = true;
          }
          if (succ_8) {
            bool succ_9;
            Tuple tmpVal_10(2);
            tmpVal_10 = vdm_STMT_elm;
            Record vdm_STMT_expr;
            Record vdm_STMT_patb;
            succ_9 = true;
            {
              succ_9 = false;
              if (tmpVal_10.IsTuple()) {
                Sequence e_l_11;
                for (int i_12 = 1; i_12 <= ((Tuple) tmpVal_10).Length(); i_12++) 
                  e_l_11.ImpAppend(((Tuple) tmpVal_10).GetField(i_12));
                if (succ_9 = 2 == (Int) (e_l_11.Length())) {
                  Record permI_13;
                  permI_13 = (Record) (e_l_11.Hd());
                  succ_9 = true;
                  {
                    vdm_STMT_patb = permI_13;
                    succ_9 = true;
                  }
                  permI_13 = (Record) (e_l_11[2]);
                  if (succ_9) {
                    vdm_STMT_expr = permI_13;
                    succ_9 = true;
                  }
                }
              }
            }
            if (!succ_9) 
              RunTime("Pattern match did not succeed in value definition");
            {
              Bool cond_14;
              {
                Record argTmp_15;
                argTmp_15 = vdm_STMT_expr;
                if (argTmp_15.IsRecord()) 
                  cond_14 = vdm_AS_ApplyExpr == argTmp_15.GetTag();
                else 
                  cond_14 = false;
              }
              if (cond_14.GetValue()) {
                Bool cond_18;
                cond_18 = vdm_STMT_IsOpApply(vdm_STMT_expr);
                if (cond_18.GetValue()) {
                  Record vdm_STMT_tmp__v;
                  vdm_STMT_tmp__v = vdm_STMT_EvalOpApply(vdm_STMT_expr);
                  {
                    Bool cond_25;
                    {
                      Record argTmp_26;
                      argTmp_26 = vdm_STMT_tmp__v;
                      if (argTmp_26.IsRecord()) 
                        cond_25 = vdm_SEM_EXIT == argTmp_26.GetTag();
                      else 
                        cond_25 = false;
                    }
                    if (cond_25.GetValue()) {
                      Record rexpr_29;
                      rexpr_29 = vdm_STMT_tmp__v;
                      return rexpr_29;
                    }
                    else {
                      Record argTmp_28;
                      argTmp_28 = vdm_STMT_tmp__v;
                      if (argTmp_28.IsRecord()) 
                        cond_25 = vdm_SEM_CONT == argTmp_28.GetTag();
                      else 
                        cond_25 = false;
                      if (cond_25.GetValue()) 
                        RunTime("Can not evaluate an error statement");
                      else {
                        Record rhs_27;
                        rhs_27 = vdm_STMT_tmp__v;
                        vdm_STMT_val__v = rhs_27;
                      }
                    }
                  }
                }
                else {
                  Record rhs_20;
                  rhs_20 = vdm_STMT_EvalExpr(vdm_STMT_expr);
                  vdm_STMT_val__v = rhs_20;
                }
              }
              else {
                Record rhs_16;
                rhs_16 = vdm_STMT_EvalExpr(vdm_STMT_expr);
                vdm_STMT_val__v = rhs_16;
              }
              {
                Sequence rhs_30;
                {
                  Sequence var2_32;
                  var2_32 = Sequence().ImpAppend(vdm_STMT_val__v);
                  rhs_30.ImpConc(vdm_STMT_val__lv).ImpConc(var2_32);
                }
                vdm_STMT_val__lv = rhs_30;
              }
              {
                Bool cond_34;
                {
                  Record argTmp_35;
                  argTmp_35 = vdm_STMT_patb;
                  if (argTmp_35.IsRecord()) 
                    cond_34 = vdm_AS_TypeBind == argTmp_35.GetTag();
                  else 
                    cond_34 = false;
                }
                if (cond_34.GetValue()) {
                  bool succ_63;
                  Record tmpVal_64;
                  tmpVal_64 = vdm_STMT_patb;
                  Record vdm_STMT_pat;
                  Record vdm_STMT_tp;
                  succ_63 = true;
                  {
                    succ_63 = false;
                    if (tmpVal_64.IsRecord()) 
                      if (vdm_AS_TypeBind == ((Record) tmpVal_64).GetTag()) {
                        Sequence e_l_65;
                        for (int i_66 = 1; i_66 <= ((Record) tmpVal_64).Length(); i_66++) 
                          e_l_65.ImpAppend(((Record) tmpVal_64).GetField(i_66));
                        if (succ_63 = 2 == (Int) (e_l_65.Length())) {
                          Record permI_67;
                          permI_67 = (Record) (e_l_65.Hd());
                          succ_63 = true;
                          {
                            vdm_STMT_pat = permI_67;
                            succ_63 = true;
                          }
                          permI_67 = (Record) (e_l_65[2]);
                          if (succ_63) {
                            vdm_STMT_tp = permI_67;
                            succ_63 = true;
                          }
                        }
                      }
                  }
                  if (!succ_63) 
                    RunTime("Pattern match did not succeed in value definition");
                  {
                    Bool cond_68;
{ if ((cond_68 = vdm_STMT_DTC()).GetValue()) {
   Bool var2_70;
   Bool unArg_71;
   unArg_71 = vdm_STMT_SubType(vdm_STMT_val__v, vdm_STMT_tp);
   var2_70 = (Bool) (!unArg_71.GetValue());
   cond_68 = var2_70;
 } }
                    if (cond_68.GetValue()) 
                      RunTime("Can not evaluate an error statement");
                    else {
                      Sequence rhs_74;
                      {
                        Sequence var2_76;
                        var2_76 = Sequence().ImpAppend(vdm_STMT_pat);
                        rhs_74.ImpConc(vdm_STMT_pat__lp).ImpConc(var2_76);
                      }
                      vdm_STMT_pat__lp = rhs_74;
                    }
                  }
                }
                else {
                  Record argTmp_40;
                  argTmp_40 = vdm_STMT_patb;
                  if (argTmp_40.IsRecord()) 
                    cond_34 = vdm_AS_SetBind == argTmp_40.GetTag();
                  else 
                    cond_34 = false;
                  if (cond_34.GetValue()) {
                    bool succ_41;
                    Record tmpVal_42;
                    tmpVal_42 = vdm_STMT_patb;
                    Record vdm_STMT_pat;
                    Record vdm_STMT_set__e;
                    succ_41 = true;
                    {
                      succ_41 = false;
                      if (tmpVal_42.IsRecord()) 
                        if (vdm_AS_SetBind == ((Record) tmpVal_42).GetTag()) {
                          Sequence e_l_43;
                          for (int i_44 = 1; i_44 <= ((Record) tmpVal_42).Length(); i_44++) 
                            e_l_43.ImpAppend(((Record) tmpVal_42).GetField(i_44));
                          if (succ_41 = 2 == (Int) (e_l_43.Length())) {
                            Record permI_45;
                            permI_45 = (Record) (e_l_43.Hd());
                            succ_41 = true;
                            {
                              vdm_STMT_pat = permI_45;
                              succ_41 = true;
                            }
                            permI_45 = (Record) (e_l_43[2]);
                            if (succ_41) {
                              vdm_STMT_set__e = permI_45;
                              succ_41 = true;
                            }
                          }
                        }
                    }
                    if (!succ_41) 
                      RunTime("Pattern match did not succeed in value definition");
                    {
                      Bool cond_46;
{ if ((cond_46 = vdm_STMT_DTC()).GetValue()) {
   Bool var2_48;
   {
     Record vdm_STMT_set__v;
     vdm_STMT_set__v = vdm_STMT_EvalExpr(vdm_STMT_set__e);
     {
       Bool unArg_52;
       Bool var1_53;
       Record argTmp_55;
       argTmp_55 = vdm_STMT_set__v;
       if (argTmp_55.IsRecord()) 
         var1_53 = vdm_SEM_SET == argTmp_55.GetTag();
       else 
         var1_53 = false;
       if ((unArg_52 = var1_53).GetValue()) {
         Bool var2_54;
         Generic var2_57;
         Record tmpRec_58;
         tmpRec_58 = vdm_STMT_set__v;
         if (((Record) tmpRec_58).Is(vdm_SEM_TUPLE)) 
           var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_TUPLE_v);
         else 
           if (((Record) tmpRec_58).Is(vdm_SEM_TOKEN)) 
             var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_TOKEN_v);
           else 
             if (((Record) tmpRec_58).Is(vdm_SEM_SET)) 
               var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_SET_v);
             else 
               if (((Record) tmpRec_58).Is(vdm_SEM_SEQ)) 
                 var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_SEQ_v);
               else 
                 if (((Record) tmpRec_58).Is(vdm_SEM_REC)) 
                   var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_REC_v);
                 else 
                   if (((Record) tmpRec_58).Is(vdm_SEM_QUOTE)) 
                     var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_QUOTE_v);
                   else 
                     if (((Record) tmpRec_58).Is(vdm_SEM_NUM)) 
                       var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_NUM_v);
                     else 
                       if (((Record) tmpRec_58).Is(vdm_SEM_MAP)) 
                         var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_MAP_v);
                       else 
                         if (((Record) tmpRec_58).Is(vdm_SEM_ExtVAL)) 
                           var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_ExtVAL_v);
                         else 
                           if (((Record) tmpRec_58).Is(vdm_SEM_EXIT)) 
                             var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_EXIT_v);
                           else 
                             if (((Record) tmpRec_58).Is(vdm_SEM_CHAR)) 
                               var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_CHAR_v);
                             else 
                               if (((Record) tmpRec_58).Is(vdm_SEM_BOOL)) 
                                 var2_57 = ((Record) tmpRec_58).GetField(pos_SEM_BOOL_v);
                               else 
                                 RunTime("Unknown record field selector");
         if (!var2_57.IsSet()) 
           RunTime("A set was expected");
         var2_54 = (Bool) (((Set) var2_57).InSet(vdm_STMT_val__v));
         unArg_52 = var2_54;
       }
       var2_48 = (Bool) (!unArg_52.GetValue());
     }
   }
   cond_46 = var2_48;
 } }
                      if (cond_46.GetValue()) 
                        RunTime("Can not evaluate an error statement");
                      else {
                        Sequence rhs_59;
                        {
                          Sequence var2_61;
                          var2_61 = Sequence().ImpAppend(vdm_STMT_pat);
                          rhs_59.ImpConc(vdm_STMT_pat__lp).ImpConc(var2_61);
                        }
                        vdm_STMT_pat__lp = rhs_59;
                      }
                    }
                  }
                  else {
                    Sequence rhs_36;
                    {
                      Sequence var2_38;
                      var2_38 = Sequence().ImpAppend(vdm_STMT_patb);
                      rhs_36.ImpConc(vdm_STMT_pat__lp).ImpConc(var2_38);
                    }
                    vdm_STMT_pat__lp = rhs_36;
                  }
                }
              }
            }
          }
          else 
            RunTime("Pattern did not match in sequence for loop");
        }
      }
    }
    {
      Set vdm_STMT_env__s;
      vdm_STMT_env__s = vdm_STMT_MatchLists(vdm_STMT_pat__lp, vdm_STMT_val__lv);
      {
        Bool cond_84;
        {
          Set var2_86;
          var2_86 = Set();
          cond_84 = (Bool) (!(vdm_STMT_env__s == var2_86));
        }
        if (cond_84.GetValue()) {
          Set tmpSet_87;
          tmpSet_87 = vdm_STMT_env__s;
          Record vdm_STMT_env(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
          Bool tmpB_88;
          bool succ_89 = false;
          Generic tmpe_92;
          for (int bb_91 = tmpSet_87.First(tmpe_92); bb_91 && !succ_89; bb_91 = tmpSet_87.Next(tmpe_92)) {
            Record tmpElem_90 = tmpe_92;
            {
              succ_89 = true;
              {
                vdm_STMT_env = tmpElem_90;
                succ_89 = true;
              }
              if (succ_89) 
                succ_89 = ((Bool) true).GetValue();
            }
          }
          if (!succ_89) 
            RunTime("The binding environment was empty");
          {
            Record tmpVar_93(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
            tmpVar_93 = vdm_STMT_env;
            vdm_STMT_PushBlkEnv(tmpVar_93);
            {
              Record vdm_STMT_in__v;
              vdm_STMT_in__v = vdm_STMT_EvalStmt(vdm_STMT_In);
              {
                vdm_STMT_PopBlkEnv();
                {
                  Record rexpr_97;
                  rexpr_97 = vdm_STMT_in__v;
                  return rexpr_97;
                }
              }
            }
          }
        }
        else { RunTime("Can not evaluate an error statement"); }
      }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalDefStmt");
}

Record vdm_STMT_EvalExitStmt(Record var_1_1) {
  Generic vdm_STMT_expr;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_ExitStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 1 == (Int) (e_l_3.Length())) {
          Generic permI_5;
          permI_5 = (Generic) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_expr = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Bool cond_6;
    cond_6 = (Bool) (vdm_STMT_expr == Nil());
    if (cond_6.GetValue()) {
      Record rexpr_12(vdm_SEM_EXIT, length_SEM_EXIT);
      {
        rexpr_12 = Record(vdm_SEM_EXIT, length_SEM_EXIT);
        rexpr_12.SetField(1, Nil());
      }
      return rexpr_12;
    }
    else {
      Record rexpr_9(vdm_SEM_EXIT, length_SEM_EXIT);
      {
        rexpr_9 = Record(vdm_SEM_EXIT, length_SEM_EXIT);
        rexpr_9.SetField(1, vdm_STMT_EvalExpr(vdm_STMT_expr));
      }
      return rexpr_9;
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalExitStmt");
}

Record vdm_STMT_EvalIfStmt(Record var_1_1) {
  Record vdm_STMT_altn;
  Record vdm_STMT_cons;
  Sequence vdm_STMT_elif;
  Record vdm_STMT_test;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_IfStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 4 == (Int) (e_l_3.Length())) {
          Generic permI_5;
          permI_5 = (Generic) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_test = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_cons = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[3]);
          if (succ_2) {
            vdm_STMT_elif = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[4]);
          if (succ_2) {
            vdm_STMT_altn = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Record vdm_STMT_test__v;
    vdm_STMT_test__v = vdm_STMT_EvalExpr(vdm_STMT_test);
    {
      Bool cond_9;
      {
        Record argTmp_10;
        argTmp_10 = vdm_STMT_test__v;
        if (argTmp_10.IsRecord()) 
          cond_9 = vdm_SEM_BOOL == argTmp_10.GetTag();
        else 
          cond_9 = false;
      }
      if (cond_9.GetValue()) {
        bool succ_11;
        Record tmpVal_12;
        tmpVal_12 = vdm_STMT_test__v;
        Bool vdm_STMT_b;
        succ_11 = true;
        {
          succ_11 = false;
          if (tmpVal_12.IsRecord()) 
            if (vdm_SEM_BOOL == ((Record) tmpVal_12).GetTag()) {
              Sequence e_l_13;
              for (int i_14 = 1; i_14 <= ((Record) tmpVal_12).Length(); i_14++) 
                e_l_13.ImpAppend(((Record) tmpVal_12).GetField(i_14));
              if (succ_11 = 1 == (Int) (e_l_13.Length())) {
                Bool permI_15;
                permI_15 = (Bool) (e_l_13.Hd());
                succ_11 = true;
                {
                  vdm_STMT_b = permI_15;
                  succ_11 = true;
                }
              }
            }
        }
        if (!succ_11) 
          RunTime("Pattern match did not succeed in value definition");
        {
          Bool cond_16;
          cond_16 = vdm_STMT_b;
          if (cond_16.GetValue()) {
            Record tmpVar_45;
            tmpVar_45 = vdm_STMT_cons;
            return vdm_STMT_EvalStmt(tmpVar_45);
          }
          else {
            Sequence var2_19;
            var2_19 = Sequence();
            cond_16 = (Bool) (!(vdm_STMT_elif == var2_19));
            if (cond_16.GetValue()) {
              Sequence vdm_STMT_elif__l;
              vdm_STMT_elif__l = vdm_STMT_elif;
              {
                Bool whCrtl_20;
                while ( true){
                  Sequence var2_22;
                  var2_22 = Sequence();
                  whCrtl_20 = (Bool) (!(vdm_STMT_elif__l == var2_22));
                  if (whCrtl_20.GetValue()) {
                    bool succ_23;
                    Record tmpVal_24(vdm_AS_ElseifStmt, length_AS_ElseifStmt);
                    tmpVal_24 = (Record) (vdm_STMT_elif__l.Hd());
                    Record vdm_STMT_cons;
                    Record vdm_STMT_test;
                    succ_23 = true;
                    {
                      succ_23 = false;
                      if (tmpVal_24.IsRecord()) 
                        if (vdm_AS_ElseifStmt == tmpVal_24.GetTag()) {
                          Sequence e_l_26;
                          for (int i_27 = 1; i_27 <= tmpVal_24.Length(); i_27++) 
                            e_l_26.ImpAppend(tmpVal_24.GetField(i_27));
                          if (succ_23 = 2 == (Int) (e_l_26.Length())) {
                            Record permI_28;
                            permI_28 = (Record) (e_l_26.Hd());
                            succ_23 = true;
                            {
                              vdm_STMT_test = permI_28;
                              succ_23 = true;
                            }
                            permI_28 = (Record) (e_l_26[2]);
                            if (succ_23) {
                              vdm_STMT_cons = permI_28;
                              succ_23 = true;
                            }
                          }
                        }
                    }
                    if (!succ_23) 
                      RunTime("Pattern match did not succeed in value definition");
                    {
                      bool succ_29;
                      Record tmpVal_30;
                      tmpVal_30 = vdm_STMT_EvalExpr(vdm_STMT_test);
                      Record vdm_STMT_test__v;
                      succ_29 = true;
                      {
                        vdm_STMT_test__v = tmpVal_30;
                        succ_29 = true;
                      }
                      if (!succ_29) 
                        RunTime("Pattern match did not succeed in value definition");
                      {
                        Bool cond_32;
                        {
                          Bool unArg_33;
                          Record argTmp_34;
                          argTmp_34 = vdm_STMT_test__v;
                          if (argTmp_34.IsRecord()) 
                            unArg_33 = vdm_SEM_BOOL == argTmp_34.GetTag();
                          else 
                            unArg_33 = false;
                          cond_32 = (Bool) (!unArg_33.GetValue());
                        }
                        if (cond_32.GetValue()) 
                          RunTime("Can not evaluate an error statement");
                        else {
                          bool succ_35;
                          Record tmpVal_36;
                          tmpVal_36 = vdm_STMT_test__v;
                          Bool vdm_STMT_b;
                          succ_35 = true;
                          {
                            succ_35 = false;
                            if (tmpVal_36.IsRecord()) 
                              if (vdm_SEM_BOOL == ((Record) tmpVal_36).GetTag()) {
                                Sequence e_l_37;
                                for (int i_38 = 1; i_38 <= ((Record) tmpVal_36).Length(); i_38++) 
                                  e_l_37.ImpAppend(((Record) tmpVal_36).GetField(i_38));
                                if (succ_35 = 1 == (Int) (e_l_37.Length())) {
                                  Bool permI_39;
                                  permI_39 = (Bool) (e_l_37.Hd());
                                  succ_35 = true;
                                  {
                                    vdm_STMT_b = permI_39;
                                    succ_35 = true;
                                  }
                                }
                              }
                          }
                          if (!succ_35) 
                            RunTime("Pattern match did not succeed in value definition");
                          {
                            Bool cond_40;
                            cond_40 = vdm_STMT_b;
                            if (cond_40.GetValue()) {
                              Record tmpVar_41;
                              tmpVar_41 = vdm_STMT_cons;
                              return vdm_STMT_EvalStmt(tmpVar_41);
                            }
                          }
                        }
                      }
                    }
                    {
                      Sequence rhs_42;
                      rhs_42 = vdm_STMT_elif__l.Tl();
                      vdm_STMT_elif__l = rhs_42;
                    }
                  }
                  else 
                    break;
                }
              }
              {
                Record tmpVar_44;
                tmpVar_44 = vdm_STMT_altn;
                return vdm_STMT_EvalStmt(tmpVar_44);
              }
            }
            else {
              Record tmpVar_17;
              tmpVar_17 = vdm_STMT_altn;
              return vdm_STMT_EvalStmt(tmpVar_17);
            }
          }
        }
      }
      else { RunTime("Can not evaluate an error statement"); }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalIfStmt");
}

Record vdm_STMT_EvalIndexForLoopStmt(Record var_1_1) {
  Record vdm_STMT_body;
  Generic vdm_STMT_by__e;
  Record vdm_STMT_cv(vdm_AS_Name, length_AS_Name);
  Record vdm_STMT_lb__e;
  Record vdm_STMT_ub__e;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_IndexForLoopStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 5 == (Int) (e_l_3.Length())) {
          Generic permI_5;
          permI_5 = (Generic) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_cv = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_lb__e = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[3]);
          if (succ_2) {
            vdm_STMT_ub__e = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[4]);
          if (succ_2) {
            vdm_STMT_by__e = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[5]);
          if (succ_2) {
            vdm_STMT_body = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Record vdm_STMT_res;
    vdm_STMT_res = Record(vdm_SEM_CONT, length_SEM_CONT);
    {
      Record vdm_STMT_lb__v;
      vdm_STMT_lb__v = vdm_STMT_EvalExpr(vdm_STMT_lb__e);
      Record vdm_STMT_ub__v;
      vdm_STMT_ub__v = vdm_STMT_EvalExpr(vdm_STMT_ub__e);
      Record vdm_STMT_by__v;
      if (((Bool) (vdm_STMT_by__e == Nil())).GetValue()) {
        vdm_STMT_by__v = Record(vdm_SEM_NUM, length_SEM_NUM);
        vdm_STMT_by__v.SetField(1, (Int) 1);
      }
      else { vdm_STMT_by__v = vdm_STMT_EvalExpr(vdm_STMT_by__e); }
      {
        Bool cond_17;
        {
          Bool var1_18;
          Bool var1_20;
          Record argTmp_22;
          argTmp_22 = vdm_STMT_lb__v;
          if (argTmp_22.IsRecord()) 
            var1_20 = vdm_SEM_NUM == argTmp_22.GetTag();
          else 
            var1_20 = false;
          if ((var1_18 = var1_20).GetValue()) {
            Bool var2_21;
            Record argTmp_23;
            argTmp_23 = vdm_STMT_ub__v;
            if (argTmp_23.IsRecord()) 
              var2_21 = vdm_SEM_NUM == argTmp_23.GetTag();
            else 
              var2_21 = false;
            var1_18 = var2_21;
          }
          if ((cond_17 = var1_18).GetValue()) {
            Bool var2_19;
            Record argTmp_24;
            argTmp_24 = vdm_STMT_by__v;
            if (argTmp_24.IsRecord()) 
              var2_19 = vdm_SEM_NUM == argTmp_24.GetTag();
            else 
              var2_19 = false;
            cond_17 = var2_19;
          }
        }
        if (cond_17.GetValue()) {
          bool succ_25;
          Record tmpVal_26;
          tmpVal_26 = vdm_STMT_lb__v;
          Real vdm_STMT_lb;
          succ_25 = true;
          {
            succ_25 = false;
            if (tmpVal_26.IsRecord()) 
              if (vdm_SEM_NUM == ((Record) tmpVal_26).GetTag()) {
                Sequence e_l_27;
                for (int i_28 = 1; i_28 <= ((Record) tmpVal_26).Length(); i_28++) 
                  e_l_27.ImpAppend(((Record) tmpVal_26).GetField(i_28));
                if (succ_25 = 1 == (Int) (e_l_27.Length())) {
                  Real permI_29;
                  permI_29 = (Real) (e_l_27.Hd());
                  succ_25 = true;
                  {
                    vdm_STMT_lb = permI_29;
                    succ_25 = true;
                  }
                }
              }
          }
          if (!succ_25) 
            RunTime("Pattern match did not succeed in value definition");
          Record tmpVal_30;
          tmpVal_30 = vdm_STMT_ub__v;
          Real vdm_STMT_ub;
          succ_25 = true;
          {
            succ_25 = false;
            if (tmpVal_30.IsRecord()) 
              if (vdm_SEM_NUM == ((Record) tmpVal_30).GetTag()) {
                Sequence e_l_31;
                for (int i_32 = 1; i_32 <= ((Record) tmpVal_30).Length(); i_32++) 
                  e_l_31.ImpAppend(((Record) tmpVal_30).GetField(i_32));
                if (succ_25 = 1 == (Int) (e_l_31.Length())) {
                  Real permI_33;
                  permI_33 = (Real) (e_l_31.Hd());
                  succ_25 = true;
                  {
                    vdm_STMT_ub = permI_33;
                    succ_25 = true;
                  }
                }
              }
          }
          if (!succ_25) 
            RunTime("Pattern match did not succeed in value definition");
          Record tmpVal_34;
          tmpVal_34 = vdm_STMT_by__v;
          Real vdm_STMT_By;
          succ_25 = true;
          {
            succ_25 = false;
            if (tmpVal_34.IsRecord()) 
              if (vdm_SEM_NUM == ((Record) tmpVal_34).GetTag()) {
                Sequence e_l_35;
                for (int i_36 = 1; i_36 <= ((Record) tmpVal_34).Length(); i_36++) 
                  e_l_35.ImpAppend(((Record) tmpVal_34).GetField(i_36));
                if (succ_25 = 1 == (Int) (e_l_35.Length())) {
                  Real permI_37;
                  permI_37 = (Real) (e_l_35.Hd());
                  succ_25 = true;
                  {
                    vdm_STMT_By = permI_37;
                    succ_25 = true;
                  }
                }
              }
          }
          if (!succ_25) 
            RunTime("Pattern match did not succeed in value definition");
          {
            Bool cond_38;
            {
              Bool var1_39;
              Bool var1_41;
              Real argTmp_43;
              argTmp_43 = vdm_STMT_lb;
              var1_41 = (Bool) (IsInteger(argTmp_43));
              if ((var1_39 = var1_41).GetValue()) {
                Bool var2_42;
                Real argTmp_44;
                argTmp_44 = vdm_STMT_ub;
                var2_42 = (Bool) (IsInteger(argTmp_44));
                var1_39 = var2_42;
              }
              if ((cond_38 = var1_39).GetValue()) {
                Bool var2_40;
                Real argTmp_45;
                argTmp_45 = vdm_STMT_By;
                var2_40 = (Bool) (IsInteger(argTmp_45));
                cond_38 = var2_40;
              }
            }
            if (cond_38.GetValue()) {
              Bool cond_46;
              cond_46 = (Bool) (vdm_STMT_By == (Int) 0);
              if (cond_46.GetValue()) 
                RunTime("Can not evaluate an error statement");
              else {
                Bool var1_50;
                if ((var1_50 = (Bool) ((vdm_STMT_lb.GetValue()) <= (vdm_STMT_ub.GetValue()))).GetValue()) { var1_50 = (Bool) ((vdm_STMT_By.GetValue()) > (((Int) 0).GetValue())); }
                if (!(cond_46 = var1_50).GetValue()) {
                  Bool var2_51;
                  if ((var2_51 = (Bool) ((vdm_STMT_lb.GetValue()) >= (vdm_STMT_ub.GetValue()))).GetValue()) { var2_51 = (Bool) ((vdm_STMT_By.GetValue()) < (((Int) 0).GetValue())); }
                  cond_46 = var2_51;
                }
                if (cond_46.GetValue()) {
                  Real lb_64;
                  lb_64 = vdm_STMT_lb;
                  if (!IsInteger(lb_64)) 
                    RunTime("An integer was expected in indexed for loop");
                  int ilb_66 = ((Int) lb_64).GetValue();
                  Real ub_65;
                  ub_65 = vdm_STMT_ub;
                  if (!IsInteger(ub_65)) 
                    RunTime("An integer was expected in indexed for loop");
                  int iub_67 = ((Int) ub_65).GetValue();
                  Real by_69;
                  by_69 = vdm_STMT_By;
                  if (!IsInteger(by_69)) 
                    RunTime("An integer was expected in indexed for loop");
                  int iby_68 = ((Int) by_69).GetValue();
                  if (iby_68 == 0) 
                    RunTime("Step length in indexed for loop was 0");
                  if (ilb_66 <= iub_67 && iby_68 > 0 || ilb_66 >= iub_67 && iby_68 < 0) 
                    for (                    ; iby_68 < 0 ? ilb_66 >= iub_67 : ilb_66 <= iub_67; ilb_66 += iby_68) {
                      Int vdm_STMT_i = (Int) ilb_66;
                      {
                        Record tmpVar_70(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                        {
                          Record tmpVar_72(vdm_SEM_NUM, length_SEM_NUM);
                          {
                            tmpVar_72 = Record(vdm_SEM_NUM, length_SEM_NUM);
                            tmpVar_72.SetField(1, vdm_STMT_i);
                          }
                          tmpVar_70 = vdm_STMT_MkBlkEnv(vdm_STMT_cv, tmpVar_72, Nil(), (Quote) "READ_ONLY");
                        }
                        vdm_STMT_PushBlkEnv(tmpVar_70);
                        {
                          Record rhs_76;
                          rhs_76 = vdm_STMT_EvalStmt(vdm_STMT_body);
                          vdm_STMT_res = rhs_76;
                        }
                        vdm_STMT_PopBlkEnv();
                        {
                          Bool cond_78;
                          {
                            Bool unArg_79;
                            Record argTmp_80;
                            argTmp_80 = vdm_STMT_res;
                            if (argTmp_80.IsRecord()) 
                              unArg_79 = vdm_SEM_CONT == argTmp_80.GetTag();
                            else 
                              unArg_79 = false;
                            cond_78 = (Bool) (!unArg_79.GetValue());
                          }
                          if (cond_78.GetValue()) {
                            Record rexpr_81;
                            rexpr_81 = vdm_STMT_res;
                            return rexpr_81;
                          }
                        }
                      }
                    }
                  {
                    Record rexpr_82;
                    rexpr_82 = vdm_STMT_res;
                    return rexpr_82;
                  }
                }
                else {
                  Record rexpr_49;
                  rexpr_49 = vdm_STMT_res;
                  return rexpr_49;
                }
              }
            }
            else { RunTime("Can not evaluate an error statement"); }
          }
        }
        else { RunTime("Can not evaluate an error statement"); }
      }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalIndexForLoopStmt");
}

Record vdm_STMT_EvalLetBeSTStmt(Record var_1_1) {
  Record vdm_STMT_in__e;
  Record vdm_STMT_lhs;
  Record vdm_STMT_st__e;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_LetBeSTStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 3 == (Int) (e_l_3.Length())) {
          Record permI_5;
          permI_5 = (Record) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_lhs = permI_5;
            succ_2 = true;
          }
          permI_5 = (Record) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_st__e = permI_5;
            succ_2 = true;
          }
          permI_5 = (Record) (e_l_3[3]);
          if (succ_2) {
            vdm_STMT_in__e = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Set vdm_STMT_env__s;
    vdm_STMT_env__s = Set();
    {
      Set iset_6;
      iset_6 = vdm_STMT_EvalBind(vdm_STMT_lhs, (Quote) "DONT_PARTITION");
      Generic vdm_STMT_env;
      bool succ_8;
      Generic tmpe_34;
      for (int bb_33 = iset_6.First(tmpe_34); bb_33; bb_33 = iset_6.Next(tmpe_34)) {
        Generic elem_7 = tmpe_34;
        {
          succ_8 = true;
          {
            vdm_STMT_env = elem_7;
            succ_8 = true;
          }
          if (succ_8) {
            Bool cond_11;
            {
              Record argTmp_12;
              argTmp_12 = vdm_STMT_st__e;
              if (argTmp_12.IsRecord()) 
                cond_11 = vdm_AS_UndefinedExpr == argTmp_12.GetTag();
              else 
                cond_11 = false;
            }
            if (cond_11.GetValue()) {
              Set rhs_29;
              {
                Set var2_31;
                var2_31 = Set().Insert(vdm_STMT_env);
                rhs_29 = vdm_STMT_env__s;
                rhs_29.ImpUnion(var2_31);
              }
              vdm_STMT_env__s = rhs_29;
            }
            else {
              Generic tmpVar_13;
              tmpVar_13 = vdm_STMT_env;
              vdm_STMT_PushBlkEnv(tmpVar_13);
              {
                Record vdm_STMT_st__v;
                vdm_STMT_st__v = vdm_STMT_EvalExpr(vdm_STMT_st__e);
                {
                  Bool cond_17;
                  {
                    Record argTmp_18;
                    argTmp_18 = vdm_STMT_st__v;
                    if (argTmp_18.IsRecord()) 
                      cond_17 = vdm_SEM_BOOL == argTmp_18.GetTag();
                    else 
                      cond_17 = false;
                  }
                  if (cond_17.GetValue()) {
                    bool succ_19;
                    Record tmpVal_20;
                    tmpVal_20 = vdm_STMT_st__v;
                    Bool vdm_STMT_b;
                    succ_19 = true;
                    {
                      succ_19 = false;
                      if (tmpVal_20.IsRecord()) 
                        if (vdm_SEM_BOOL == ((Record) tmpVal_20).GetTag()) {
                          Sequence e_l_21;
                          for (int i_22 = 1; i_22 <= ((Record) tmpVal_20).Length(); i_22++) 
                            e_l_21.ImpAppend(((Record) tmpVal_20).GetField(i_22));
                          if (succ_19 = 1 == (Int) (e_l_21.Length())) {
                            Bool permI_23;
                            permI_23 = (Bool) (e_l_21.Hd());
                            succ_19 = true;
                            {
                              vdm_STMT_b = permI_23;
                              succ_19 = true;
                            }
                          }
                        }
                    }
                    if (!succ_19) 
                      RunTime("Pattern match did not succeed in value definition");
                    {
                      Bool cond_24;
                      cond_24 = vdm_STMT_b;
                      if (cond_24.GetValue()) {
                        Set rhs_25;
                        {
                          Set var2_27;
                          var2_27 = Set().Insert(vdm_STMT_env);
                          rhs_25 = vdm_STMT_env__s;
                          rhs_25.ImpUnion(var2_27);
                        }
                        vdm_STMT_env__s = rhs_25;
                      }
                    }
                  }
                  else { RunTime("Can not evaluate an error statement"); }
                }
              }
              vdm_STMT_PopBlkEnv();
            }
          }
          else 
            RunTime("Pattern did not match in set for loop");
        }
      }
    }
    {
      Bool cond_35;
      {
        Set var2_37;
        var2_37 = Set();
        cond_35 = (Bool) (!(vdm_STMT_env__s == var2_37));
      }
      if (cond_35.GetValue()) {
        Set tmpSet_38;
        tmpSet_38 = vdm_STMT_env__s;
        Record vdm_STMT_env(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
        Bool tmpB_39;
        bool succ_40 = false;
        Generic tmpe_43;
        for (int bb_42 = tmpSet_38.First(tmpe_43); bb_42 && !succ_40; bb_42 = tmpSet_38.Next(tmpe_43)) {
          Record tmpElem_41 = tmpe_43;
          {
            succ_40 = true;
            {
              vdm_STMT_env = tmpElem_41;
              succ_40 = true;
            }
            if (succ_40) 
              succ_40 = ((Bool) true).GetValue();
          }
        }
        if (!succ_40) 
          RunTime("The binding environment was empty");
        {
          Record tmpVar_44(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
          tmpVar_44 = vdm_STMT_env;
          vdm_STMT_PushBlkEnv(tmpVar_44);
          {
            Record vdm_STMT_in__v;
            vdm_STMT_in__v = vdm_STMT_EvalStmt(vdm_STMT_in__e);
            {
              vdm_STMT_PopBlkEnv();
              {
                Record rexpr_48;
                rexpr_48 = vdm_STMT_in__v;
                return rexpr_48;
              }
            }
          }
        }
      }
      else { RunTime("Can not evaluate an error statement"); }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalLetBeSTStmt");
}

Record vdm_STMT_EvalLetStmt(Record var_1_1) {
  Record vdm_STMT_In;
  Sequence vdm_STMT_localdef;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_LetStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 2 == (Int) (e_l_3.Length())) {
          Generic permI_5;
          permI_5 = (Generic) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_localdef = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_In = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Set vdm_STMT_id__s;
    vdm_STMT_id__s = Set();
    Record vdm_STMT_blkenv(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
    vdm_STMT_blkenv = vdm_STMT_MkEmptyBlkEnv((Quote) "READ_ONLY");
    {
      Record tmpVar_7(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
      tmpVar_7 = vdm_STMT_blkenv;
      vdm_STMT_PushBlkEnv(tmpVar_7);
    }
    {
      Sequence sq_8;
      sq_8 = vdm_STMT_localdef;
      Record vdm_STMT_elm;
      bool succ_10;
      Generic tmpe_85;
      for (int i_84 = sq_8.First(tmpe_85); i_84; i_84 = sq_8.Next(tmpe_85)) {
        Record elem_9 = tmpe_85;
        {
          succ_10 = true;
          {
            vdm_STMT_elm = elem_9;
            succ_10 = true;
          }
          if (succ_10) {
            Bool cond_11;
            {
              Record argTmp_12;
              argTmp_12 = vdm_STMT_elm;
              if (argTmp_12.IsRecord()) 
                cond_11 = vdm_AS_ExplFnDef == argTmp_12.GetTag();
              else 
                cond_11 = false;
            }
            if (cond_11.GetValue()) {
              Set rhs_68;
              {
                Set var2_70;
                Record tmpVar_71(vdm_AS_Name, length_AS_Name);
                Record tmpRec_72;
                tmpRec_72 = vdm_STMT_elm;
                if (((Record) tmpRec_72).Is(vdm_AS_ImplFnDef)) 
                  tmpVar_71 = ((Record) tmpRec_72).GetField(pos_AS_ImplFnDef_nm);
                else 
                  if (((Record) tmpRec_72).Is(vdm_AS_ExtExplFnDef)) 
                    tmpVar_71 = ((Record) tmpRec_72).GetField(pos_AS_ExtExplFnDef_nm);
                  else 
                    if (((Record) tmpRec_72).Is(vdm_AS_ExplFnDef)) 
                      tmpVar_71 = ((Record) tmpRec_72).GetField(pos_AS_ExplFnDef_nm);
                    else 
                      RunTime("Unknown record field selector");
                var2_70 = Set().Insert(tmpVar_71);
                rhs_68 = vdm_STMT_id__s;
                rhs_68.ImpUnion(var2_70);
              }
              vdm_STMT_id__s = rhs_68;
              {
                Record rhs_73(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                {
                  Record tmpVar_74(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                  {
                    Record tmpVar_75(vdm_AS_Name, length_AS_Name);
                    {
                      Record tmpRec_76;
                      tmpRec_76 = vdm_STMT_elm;
                      if (((Record) tmpRec_76).Is(vdm_AS_ImplFnDef)) 
                        tmpVar_75 = ((Record) tmpRec_76).GetField(pos_AS_ImplFnDef_nm);
                      else 
                        if (((Record) tmpRec_76).Is(vdm_AS_ExtExplFnDef)) 
                          tmpVar_75 = ((Record) tmpRec_76).GetField(pos_AS_ExtExplFnDef_nm);
                        else 
                          if (((Record) tmpRec_76).Is(vdm_AS_ExplFnDef)) 
                            tmpVar_75 = ((Record) tmpRec_76).GetField(pos_AS_ExplFnDef_nm);
                          else 
                            RunTime("Unknown record field selector");
                    }
                    tmpVar_74 = vdm_STMT_MkBlkEnv(tmpVar_75, vdm_STMT_ConstructFN(vdm_STMT_elm, vdm_STMT_id__s), Nil(), (Quote) "READ_ONLY");
                  }
                  rhs_73 = vdm_STMT_CombineBlkEnv(tmpVar_74, vdm_STMT_blkenv);
                }
                vdm_STMT_blkenv = rhs_73;
              }
            }
            else {
              Record argTmp_54;
              argTmp_54 = vdm_STMT_elm;
              if (argTmp_54.IsRecord()) 
                cond_11 = vdm_AS_ImplFnDef == argTmp_54.GetTag();
              else 
                cond_11 = false;
              if (cond_11.GetValue()) {
                Set rhs_55;
                {
                  Set var2_57;
                  Record tmpVar_58(vdm_AS_Name, length_AS_Name);
                  Record tmpRec_59;
                  tmpRec_59 = vdm_STMT_elm;
                  if (((Record) tmpRec_59).Is(vdm_AS_ImplFnDef)) 
                    tmpVar_58 = ((Record) tmpRec_59).GetField(pos_AS_ImplFnDef_nm);
                  else 
                    if (((Record) tmpRec_59).Is(vdm_AS_ExtExplFnDef)) 
                      tmpVar_58 = ((Record) tmpRec_59).GetField(pos_AS_ExtExplFnDef_nm);
                    else 
                      if (((Record) tmpRec_59).Is(vdm_AS_ExplFnDef)) 
                        tmpVar_58 = ((Record) tmpRec_59).GetField(pos_AS_ExplFnDef_nm);
                      else 
                        RunTime("Unknown record field selector");
                  var2_57 = Set().Insert(tmpVar_58);
                  rhs_55 = vdm_STMT_id__s;
                  rhs_55.ImpUnion(var2_57);
                }
                vdm_STMT_id__s = rhs_55;
                {
                  Record rhs_60(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                  {
                    Record tmpVar_61(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                    {
                      Record tmpVar_62(vdm_AS_Name, length_AS_Name);
                      {
                        Record tmpRec_63;
                        tmpRec_63 = vdm_STMT_elm;
                        if (((Record) tmpRec_63).Is(vdm_AS_ImplFnDef)) 
                          tmpVar_62 = ((Record) tmpRec_63).GetField(pos_AS_ImplFnDef_nm);
                        else 
                          if (((Record) tmpRec_63).Is(vdm_AS_ExtExplFnDef)) 
                            tmpVar_62 = ((Record) tmpRec_63).GetField(pos_AS_ExtExplFnDef_nm);
                          else 
                            if (((Record) tmpRec_63).Is(vdm_AS_ExplFnDef)) 
                              tmpVar_62 = ((Record) tmpRec_63).GetField(pos_AS_ExplFnDef_nm);
                            else 
                              RunTime("Unknown record field selector");
                      }
                      tmpVar_61 = vdm_STMT_MkBlkEnv(tmpVar_62, Record(vdm_SEM_ImplFN, length_SEM_ImplFN), Nil(), (Quote) "READ_ONLY");
                    }
                    rhs_60 = vdm_STMT_CombineBlkEnv(tmpVar_61, vdm_STMT_blkenv);
                  }
                  vdm_STMT_blkenv = rhs_60;
                }
              }
              else {
                Set rhs_13;
                {
                  Set var2_15;
                  Record tmpVar_16;
                  {
                    Record tmpRec_17;
                    tmpRec_17 = vdm_STMT_elm;
                    if (((Record) tmpRec_17).Is(vdm_AS_ValueDef)) 
                      tmpVar_16 = ((Record) tmpRec_17).GetField(pos_AS_ValueDef_pat);
                    else 
                      RunTime("Unknown record field selector");
                  }
                  var2_15 = vdm_STMT_IdentInPattern(tmpVar_16);
                  rhs_13 = vdm_STMT_id__s;
                  rhs_13.ImpUnion(var2_15);
                }
                vdm_STMT_id__s = rhs_13;
                {
                  bool succ_18;
                  Record tmpVal_19;
                  tmpVal_19 = vdm_STMT_elm;
                  Record vdm_STMT_pat;
                  Generic vdm_STMT_tp;
                  Record vdm_STMT_val;
                  succ_18 = true;
                  {
                    succ_18 = false;
                    if (tmpVal_19.IsRecord()) 
                      if (vdm_AS_ValueDef == ((Record) tmpVal_19).GetTag()) {
                        Sequence e_l_20;
                        for (int i_21 = 1; i_21 <= ((Record) tmpVal_19).Length(); i_21++) 
                          e_l_20.ImpAppend(((Record) tmpVal_19).GetField(i_21));
                        if (succ_18 = 3 == (Int) (e_l_20.Length())) {
                          Generic permI_22;
                          permI_22 = (Generic) (e_l_20.Hd());
                          succ_18 = true;
                          {
                            vdm_STMT_pat = permI_22;
                            succ_18 = true;
                          }
                          permI_22 = (Generic) (e_l_20[2]);
                          if (succ_18) {
                            vdm_STMT_tp = permI_22;
                            succ_18 = true;
                          }
                          permI_22 = (Generic) (e_l_20[3]);
                          if (succ_18) {
                            vdm_STMT_val = permI_22;
                            succ_18 = true;
                          }
                        }
                      }
                  }
                  if (!succ_18) 
                    RunTime("Pattern match did not succeed in value definition");
                  {
                    bool succ_23;
                    Record tmpVal_24;
                    tmpVal_24 = vdm_STMT_EvalExpr(vdm_STMT_val);
                    Record vdm_STMT_val__v;
                    succ_23 = true;
                    {
                      vdm_STMT_val__v = tmpVal_24;
                      succ_23 = true;
                    }
                    if (!succ_23) 
                      RunTime("Pattern match did not succeed in value definition");
                    {
                      Bool cond_26;
                      {
                        Record argTmp_27;
                        argTmp_27 = vdm_STMT_val__v;
                        if (argTmp_27.IsRecord()) 
                          cond_26 = vdm_SEM_EXIT == argTmp_27.GetTag();
                        else 
                          cond_26 = false;
                      }
                      if (cond_26.GetValue()) {
                        Record rexpr_53;
                        rexpr_53 = vdm_STMT_val__v;
                        return rexpr_53;
                      }
                      else {
                        Bool var1_44;
                        if ((var1_44 = vdm_STMT_DTC()).GetValue()) { var1_44 = (Bool) (!(vdm_STMT_tp == Nil())); }
                        if ((cond_26 = var1_44).GetValue()) {
                          Bool var2_45;
                          Bool unArg_50;
                          unArg_50 = vdm_STMT_SubType(vdm_STMT_val__v, vdm_STMT_tp);
                          var2_45 = (Bool) (!unArg_50.GetValue());
                          cond_26 = var2_45;
                        }
                        if (cond_26.GetValue()) 
                          RunTime("Can not evaluate an error statement");
                        else {
                          Set vdm_STMT_env__s;
                          vdm_STMT_env__s = vdm_STMT_PatternMatch(vdm_STMT_pat, vdm_STMT_val__v);
                          {
                            Bool cond_32;
                            {
                              Set var2_34;
                              var2_34 = Set();
                              cond_32 = (Bool) (!(vdm_STMT_env__s == var2_34));
                            }
                            if (cond_32.GetValue()) {
                              Set tmpSet_35;
                              tmpSet_35 = vdm_STMT_env__s;
                              Record vdm_STMT_env(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                              Bool tmpB_36;
                              bool succ_37 = false;
                              Generic tmpe_40;
                              for (int bb_39 = tmpSet_35.First(tmpe_40); bb_39 && !succ_37; bb_39 = tmpSet_35.Next(tmpe_40)) {
                                Record tmpElem_38 = tmpe_40;
                                {
                                  succ_37 = true;
                                  {
                                    vdm_STMT_env = tmpElem_38;
                                    succ_37 = true;
                                  }
                                  if (succ_37) 
                                    succ_37 = ((Bool) true).GetValue();
                                }
                              }
                              if (!succ_37) 
                                RunTime("The binding environment was empty");
                              {
                                Record rhs_41(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                                rhs_41 = vdm_STMT_CombineBlkEnv(vdm_STMT_env, vdm_STMT_blkenv);
                                vdm_STMT_blkenv = rhs_41;
                              }
                            }
                            else { RunTime("Can not evaluate an error statement"); }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
            vdm_STMT_PopBlkEnv();
            {
              Record tmpVar_83(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
              tmpVar_83 = vdm_STMT_blkenv;
              vdm_STMT_PushBlkEnv(tmpVar_83);
            }
          }
          else 
            RunTime("Pattern did not match in sequence for loop");
        }
      }
    }
    {
      Record vdm_STMT_in__v;
      vdm_STMT_in__v = vdm_STMT_EvalStmt(vdm_STMT_In);
      {
        vdm_STMT_PopBlkEnv();
        {
          Record rexpr_89;
          rexpr_89 = vdm_STMT_in__v;
          return rexpr_89;
        }
      }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalLetStmt");
}

Record vdm_STMT_EvalNonDetStmt(Record var_1_1) {
  Sequence vdm_STMT_stmts;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_NonDetStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 1 == (Int) (e_l_3.Length())) {
          Sequence permI_5;
          permI_5 = (Sequence) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_stmts = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Set tmpSet_6;
    tmpSet_6 = vdm_STMT_PermuteStmt(vdm_STMT_stmts);
    Sequence vdm_STMT_stmt__l;
    Bool tmpB_7;
    bool succ_8 = false;
    Generic tmpe_12;
    for (int bb_11 = tmpSet_6.First(tmpe_12); bb_11 && !succ_8; bb_11 = tmpSet_6.Next(tmpe_12)) {
      Sequence tmpElem_9 = tmpe_12;
      {
        succ_8 = true;
        {
          vdm_STMT_stmt__l = tmpElem_9;
          succ_8 = true;
        }
        if (succ_8) 
          succ_8 = ((Bool) true).GetValue();
      }
    }
    if (!succ_8) 
      RunTime("The binding environment was empty");
    {
      Sequence sq_13;
      sq_13 = vdm_STMT_stmt__l;
      Record vdm_STMT_stmt;
      bool succ_15;
      Generic tmpe_24;
      for (int i_23 = sq_13.First(tmpe_24); i_23; i_23 = sq_13.Next(tmpe_24)) {
        Record elem_14 = tmpe_24;
        {
          succ_15 = true;
          {
            vdm_STMT_stmt = elem_14;
            succ_15 = true;
          }
          if (succ_15) {
            Record vdm_STMT_res__v;
            vdm_STMT_res__v = vdm_STMT_EvalStmt(vdm_STMT_stmt);
            {
              Bool cond_19;
              {
                Bool unArg_20;
                Record argTmp_21;
                argTmp_21 = vdm_STMT_res__v;
                if (argTmp_21.IsRecord()) 
                  unArg_20 = vdm_SEM_CONT == argTmp_21.GetTag();
                else 
                  unArg_20 = false;
                cond_19 = (Bool) (!unArg_20.GetValue());
              }
              if (cond_19.GetValue()) {
                Record rexpr_22;
                rexpr_22 = vdm_STMT_res__v;
                return rexpr_22;
              }
            }
          }
          else 
            RunTime("Pattern did not match in sequence for loop");
        }
      }
      {
        Record rexpr_25(vdm_SEM_CONT, length_SEM_CONT);
        rexpr_25 = Record(vdm_SEM_CONT, length_SEM_CONT);
        return rexpr_25;
      }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalNonDetStmt");
}

Record vdm_STMT_EvalOpApply(Record var_1_1) {
  Sequence vdm_STMT_arg;
  Record vdm_STMT_fct;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_ApplyExpr == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 3 == (Int) (e_l_3.Length())) {
          Generic permI_5;
          permI_5 = (Generic) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_fct = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_arg = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[3]);
          if (succ_2) 
            succ_2 = true;
        }
      }
  }
  if (succ_2) {
    Record tmpVar_6(vdm_AS_CallStmt, length_AS_CallStmt);
    {
      tmpVar_6 = Record(vdm_AS_CallStmt, length_AS_CallStmt);
      tmpVar_6.SetField(1, vdm_STMT_fct);
      tmpVar_6.SetField(2, vdm_STMT_arg);
      tmpVar_6.SetField(3, Nil());
      tmpVar_6.SetField(4, Nil());
    }
    return vdm_STMT_EvalCallStmt(tmpVar_6);
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalOpApply");
}

Bool vdm_STMT_EvalPost(Generic vdm_STMT_Post__e) {
  Bool cond_3;
  cond_3 = vdm_STMT_PostCheck();
  if (cond_3.GetValue()) {
    Bool cond_5;
    cond_5 = (Bool) (!(vdm_STMT_Post__e == Nil()));
    if (cond_5.GetValue()) {
      Record vdm_STMT_Post__v;
      vdm_STMT_Post__v = vdm_STMT_EvalExpr(vdm_STMT_Post__e);
      {
        Bool cond_12;
        {
          Record argTmp_13;
          argTmp_13 = vdm_STMT_Post__v;
          if (argTmp_13.IsRecord()) 
            cond_12 = vdm_SEM_BOOL == argTmp_13.GetTag();
          else 
            cond_12 = false;
        }
        if (cond_12.GetValue()) {
          bool succ_14;
          Record tmpVal_15;
          tmpVal_15 = vdm_STMT_Post__v;
          Bool vdm_STMT_b;
          succ_14 = true;
          {
            succ_14 = false;
            if (tmpVal_15.IsRecord()) 
              if (vdm_SEM_BOOL == ((Record) tmpVal_15).GetTag()) {
                Sequence e_l_16;
                for (int i_17 = 1; i_17 <= ((Record) tmpVal_15).Length(); i_17++) 
                  e_l_16.ImpAppend(((Record) tmpVal_15).GetField(i_17));
                if (succ_14 = 1 == (Int) (e_l_16.Length())) {
                  Bool permI_18;
                  permI_18 = (Bool) (e_l_16.Hd());
                  succ_14 = true;
                  {
                    vdm_STMT_b = permI_18;
                    succ_14 = true;
                  }
                }
              }
          }
          if (!succ_14) 
            RunTime("Pattern match did not succeed in value definition");
          {
            Bool rexpr_19;
            rexpr_19 = vdm_STMT_b;
            return rexpr_19;
          }
        }
        else { RunTime("Can not evaluate an error statement"); }
      }
    }
    else {
      Bool rexpr_8;
      rexpr_8 = (Bool) true;
      return rexpr_8;
    }
  }
  else {
    Bool rexpr_4;
    rexpr_4 = (Bool) true;
    return rexpr_4;
  }
}

Bool vdm_STMT_EvalPre(Generic vdm_STMT_Pre__e) {
  Bool cond_3;
  cond_3 = vdm_STMT_PreCheck();
  if (cond_3.GetValue()) {
    Bool cond_5;
    cond_5 = (Bool) (!(vdm_STMT_Pre__e == Nil()));
    if (cond_5.GetValue()) {
      Record vdm_STMT_Pre__v;
      vdm_STMT_Pre__v = vdm_STMT_EvalExpr(vdm_STMT_Pre__e);
      {
        Bool cond_12;
        {
          Record argTmp_13;
          argTmp_13 = vdm_STMT_Pre__v;
          if (argTmp_13.IsRecord()) 
            cond_12 = vdm_SEM_BOOL == argTmp_13.GetTag();
          else 
            cond_12 = false;
        }
        if (cond_12.GetValue()) {
          bool succ_14;
          Record tmpVal_15;
          tmpVal_15 = vdm_STMT_Pre__v;
          Bool vdm_STMT_b;
          succ_14 = true;
          {
            succ_14 = false;
            if (tmpVal_15.IsRecord()) 
              if (vdm_SEM_BOOL == ((Record) tmpVal_15).GetTag()) {
                Sequence e_l_16;
                for (int i_17 = 1; i_17 <= ((Record) tmpVal_15).Length(); i_17++) 
                  e_l_16.ImpAppend(((Record) tmpVal_15).GetField(i_17));
                if (succ_14 = 1 == (Int) (e_l_16.Length())) {
                  Bool permI_18;
                  permI_18 = (Bool) (e_l_16.Hd());
                  succ_14 = true;
                  {
                    vdm_STMT_b = permI_18;
                    succ_14 = true;
                  }
                }
              }
          }
          if (!succ_14) 
            RunTime("Pattern match did not succeed in value definition");
          {
            Bool rexpr_19;
            rexpr_19 = vdm_STMT_b;
            return rexpr_19;
          }
        }
        else { RunTime("Can not evaluate an error statement"); }
      }
    }
    else {
      Bool rexpr_8;
      rexpr_8 = (Bool) true;
      return rexpr_8;
    }
  }
  else {
    Bool rexpr_4;
    rexpr_4 = (Bool) true;
    return rexpr_4;
  }
}

Record vdm_STMT_EvalRecTrapStmt(Record var_1_1) {
  Record vdm_STMT_body;
  Sequence vdm_STMT_traps;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_RecTrapStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 2 == (Int) (e_l_3.Length())) {
          Generic permI_5;
          permI_5 = (Generic) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_traps = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_body = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Bool vdm_STMT_match;
    Set vdm_STMT_trap__s;
    Record vdm_STMT_rval__v;
    {
      Record vdm_STMT_bval__v;
      vdm_STMT_bval__v = vdm_STMT_EvalStmt(vdm_STMT_body);
      {
        Bool cond_9;
        {
          Bool var1_10;
          Record argTmp_12;
          argTmp_12 = vdm_STMT_bval__v;
          if (argTmp_12.IsRecord()) 
            var1_10 = vdm_SEM_EXIT == argTmp_12.GetTag();
          else 
            var1_10 = false;
          if ((cond_9 = var1_10).GetValue()) {
            Bool var2_11;
            Generic var1_13;
            Record tmpRec_15;
            tmpRec_15 = vdm_STMT_bval__v;
            if (((Record) tmpRec_15).Is(vdm_SEM_TUPLE)) 
              var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_TUPLE_v);
            else 
              if (((Record) tmpRec_15).Is(vdm_SEM_TOKEN)) 
                var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_TOKEN_v);
              else 
                if (((Record) tmpRec_15).Is(vdm_SEM_SET)) 
                  var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_SET_v);
                else 
                  if (((Record) tmpRec_15).Is(vdm_SEM_SEQ)) 
                    var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_SEQ_v);
                  else 
                    if (((Record) tmpRec_15).Is(vdm_SEM_REC)) 
                      var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_REC_v);
                    else 
                      if (((Record) tmpRec_15).Is(vdm_SEM_QUOTE)) 
                        var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_QUOTE_v);
                      else 
                        if (((Record) tmpRec_15).Is(vdm_SEM_NUM)) 
                          var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_NUM_v);
                        else 
                          if (((Record) tmpRec_15).Is(vdm_SEM_MAP)) 
                            var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_MAP_v);
                          else 
                            if (((Record) tmpRec_15).Is(vdm_SEM_ExtVAL)) 
                              var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_ExtVAL_v);
                            else 
                              if (((Record) tmpRec_15).Is(vdm_SEM_EXIT)) 
                                var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_EXIT_v);
                              else 
                                if (((Record) tmpRec_15).Is(vdm_SEM_CHAR)) 
                                  var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_CHAR_v);
                                else 
                                  if (((Record) tmpRec_15).Is(vdm_SEM_BOOL)) 
                                    var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_BOOL_v);
                                  else 
                                    RunTime("Unknown record field selector");
            var2_11 = (Bool) (!(var1_13 == Nil()));
            cond_9 = var2_11;
          }
        }
        if (cond_9.GetValue()) {
          Record rhs_17;
          rhs_17 = vdm_STMT_bval__v;
          vdm_STMT_rval__v = rhs_17;
          {
            Bool whCrtl_18;
            while ( true){
              whCrtl_18 = (Bool) true;
              if (whCrtl_18.GetValue()) {
                Set rhs_19;
                rhs_19 = vdm_STMT_traps.Elems();
                vdm_STMT_trap__s = rhs_19;
                {
                  Bool rhs_21;
                  rhs_21 = (Bool) false;
                  vdm_STMT_match = rhs_21;
                }
                {
                  Bool whCrtl_22;
                  while ( true){
                    Bool var1_23;
                    Set var2_26;
                    var2_26 = Set();
                    var1_23 = (Bool) (!(vdm_STMT_trap__s == var2_26));
                    if ((whCrtl_22 = var1_23).GetValue()) { whCrtl_22 = (Bool) (!vdm_STMT_match.GetValue()); }
                    if (whCrtl_22.GetValue()) {
                      Set tmpSet_28;
                      tmpSet_28 = vdm_STMT_trap__s;
                      Record vdm_STMT_trp(vdm_AS_Trap, length_AS_Trap);
                      Bool tmpB_29;
                      bool succ_30 = false;
                      Generic tmpe_33;
                      for (int bb_32 = tmpSet_28.First(tmpe_33); bb_32 && !succ_30; bb_32 = tmpSet_28.Next(tmpe_33)) {
                        Record tmpElem_31 = tmpe_33;
                        {
                          succ_30 = true;
                          {
                            vdm_STMT_trp = tmpElem_31;
                            succ_30 = true;
                          }
                          if (succ_30) 
                            succ_30 = ((Bool) true).GetValue();
                        }
                      }
                      if (!succ_30) 
                        RunTime("The binding environment was empty");
                      {
                        bool succ_34;
                        Record tmpVal_35(vdm_AS_Trap, length_AS_Trap);
                        tmpVal_35 = vdm_STMT_trp;
                        Record vdm_STMT_pat__p;
                        Record vdm_STMT_stmt;
                        succ_34 = true;
                        {
                          succ_34 = false;
                          if (tmpVal_35.IsRecord()) 
                            if (vdm_AS_Trap == tmpVal_35.GetTag()) {
                              Sequence e_l_36;
                              for (int i_37 = 1; i_37 <= tmpVal_35.Length(); i_37++) 
                                e_l_36.ImpAppend(tmpVal_35.GetField(i_37));
                              if (succ_34 = 2 == (Int) (e_l_36.Length())) {
                                Record permI_38;
                                permI_38 = (Record) (e_l_36.Hd());
                                succ_34 = true;
                                {
                                  vdm_STMT_pat__p = permI_38;
                                  succ_34 = true;
                                }
                                permI_38 = (Record) (e_l_36[2]);
                                if (succ_34) {
                                  vdm_STMT_stmt = permI_38;
                                  succ_34 = true;
                                }
                              }
                            }
                        }
                        if (!succ_34) 
                          RunTime("Pattern match did not succeed in value definition");
                        {
                          Set vdm_STMT_env__s;
                          Generic tmpVar_42;
                          {
                            Record tmpRec_43;
                            tmpRec_43 = vdm_STMT_rval__v;
                            if (((Record) tmpRec_43).Is(vdm_SEM_TUPLE)) 
                              tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_TUPLE_v);
                            else 
                              if (((Record) tmpRec_43).Is(vdm_SEM_TOKEN)) 
                                tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_TOKEN_v);
                              else 
                                if (((Record) tmpRec_43).Is(vdm_SEM_SET)) 
                                  tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_SET_v);
                                else 
                                  if (((Record) tmpRec_43).Is(vdm_SEM_SEQ)) 
                                    tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_SEQ_v);
                                  else 
                                    if (((Record) tmpRec_43).Is(vdm_SEM_REC)) 
                                      tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_REC_v);
                                    else 
                                      if (((Record) tmpRec_43).Is(vdm_SEM_QUOTE)) 
                                        tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_QUOTE_v);
                                      else 
                                        if (((Record) tmpRec_43).Is(vdm_SEM_NUM)) 
                                          tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_NUM_v);
                                        else 
                                          if (((Record) tmpRec_43).Is(vdm_SEM_MAP)) 
                                            tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_MAP_v);
                                          else 
                                            if (((Record) tmpRec_43).Is(vdm_SEM_ExtVAL)) 
                                              tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_ExtVAL_v);
                                            else 
                                              if (((Record) tmpRec_43).Is(vdm_SEM_EXIT)) 
                                                tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_EXIT_v);
                                              else 
                                                if (((Record) tmpRec_43).Is(vdm_SEM_CHAR)) 
                                                  tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_CHAR_v);
                                                else 
                                                  if (((Record) tmpRec_43).Is(vdm_SEM_BOOL)) 
                                                    tmpVar_42 = ((Record) tmpRec_43).GetField(pos_SEM_BOOL_v);
                                                  else 
                                                    RunTime("Unknown record field selector");
                          }
                          vdm_STMT_env__s = vdm_STMT_PatternMatch(vdm_STMT_pat__p, tmpVar_42);
                          {
                            Bool cond_44;
                            {
                              Set var2_46;
                              var2_46 = Set();
                              cond_44 = (Bool) (!(vdm_STMT_env__s == var2_46));
                            }
                            if (cond_44.GetValue()) {
                              Set tmpSet_47;
                              tmpSet_47 = vdm_STMT_env__s;
                              Record vdm_STMT_env(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                              Bool tmpB_48;
                              bool succ_49 = false;
                              Generic tmpe_52;
                              for (int bb_51 = tmpSet_47.First(tmpe_52); bb_51 && !succ_49; bb_51 = tmpSet_47.Next(tmpe_52)) {
                                Record tmpElem_50 = tmpe_52;
                                {
                                  succ_49 = true;
                                  {
                                    vdm_STMT_env = tmpElem_50;
                                    succ_49 = true;
                                  }
                                  if (succ_49) 
                                    succ_49 = ((Bool) true).GetValue();
                                }
                              }
                              if (!succ_49) 
                                RunTime("The binding environment was empty");
                              {
                                Bool rhs_53;
                                rhs_53 = (Bool) true;
                                vdm_STMT_match = rhs_53;
                                {
                                  Record tmpVar_54(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                                  tmpVar_54 = vdm_STMT_env;
                                  vdm_STMT_PushBlkEnv(tmpVar_54);
                                }
                                {
                                  Record vdm_STMT_tmp__v;
                                  vdm_STMT_tmp__v = vdm_STMT_EvalStmt(vdm_STMT_stmt);
                                  {
                                    vdm_STMT_PopBlkEnv();
                                    {
                                      Bool cond_58;
                                      {
                                        Bool var1_59;
                                        Bool unArg_61;
                                        Record argTmp_62;
                                        argTmp_62 = vdm_STMT_tmp__v;
                                        if (argTmp_62.IsRecord()) 
                                          unArg_61 = vdm_SEM_EXIT == argTmp_62.GetTag();
                                        else 
                                          unArg_61 = false;
                                        var1_59 = (Bool) (!unArg_61.GetValue());
                                        if (!(cond_58 = var1_59).GetValue()) {
                                          Bool var2_60;
                                          Generic var1_63;
                                          Record tmpRec_65;
                                          tmpRec_65 = vdm_STMT_tmp__v;
                                          if (((Record) tmpRec_65).Is(vdm_SEM_TUPLE)) 
                                            var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_TUPLE_v);
                                          else 
                                            if (((Record) tmpRec_65).Is(vdm_SEM_TOKEN)) 
                                              var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_TOKEN_v);
                                            else 
                                              if (((Record) tmpRec_65).Is(vdm_SEM_SET)) 
                                                var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_SET_v);
                                              else 
                                                if (((Record) tmpRec_65).Is(vdm_SEM_SEQ)) 
                                                  var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_SEQ_v);
                                                else 
                                                  if (((Record) tmpRec_65).Is(vdm_SEM_REC)) 
                                                    var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_REC_v);
                                                  else 
                                                    if (((Record) tmpRec_65).Is(vdm_SEM_QUOTE)) 
                                                      var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_QUOTE_v);
                                                    else 
                                                      if (((Record) tmpRec_65).Is(vdm_SEM_NUM)) 
                                                        var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_NUM_v);
                                                      else 
                                                        if (((Record) tmpRec_65).Is(vdm_SEM_MAP)) 
                                                          var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_MAP_v);
                                                        else 
                                                          if (((Record) tmpRec_65).Is(vdm_SEM_ExtVAL)) 
                                                            var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_ExtVAL_v);
                                                          else 
                                                            if (((Record) tmpRec_65).Is(vdm_SEM_EXIT)) 
                                                              var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_EXIT_v);
                                                            else 
                                                              if (((Record) tmpRec_65).Is(vdm_SEM_CHAR)) 
                                                                var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_CHAR_v);
                                                              else 
                                                                if (((Record) tmpRec_65).Is(vdm_SEM_BOOL)) 
                                                                  var1_63 = ((Record) tmpRec_65).GetField(pos_SEM_BOOL_v);
                                                                else 
                                                                  RunTime("Unknown record field selector");
                                          var2_60 = (Bool) (var1_63 == Nil());
                                          cond_58 = var2_60;
                                        }
                                      }
                                      if (cond_58.GetValue()) {
                                        Record rexpr_67;
                                        rexpr_67 = vdm_STMT_tmp__v;
                                        return rexpr_67;
                                      }
                                      else {
                                        Record rhs_66;
                                        rhs_66 = vdm_STMT_tmp__v;
                                        vdm_STMT_rval__v = rhs_66;
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            {
                              Set rhs_68;
                              {
                                Set var2_70;
                                var2_70 = Set().Insert(vdm_STMT_trp);
                                rhs_68 = vdm_STMT_trap__s;
                                rhs_68.ImpDiff(var2_70);
                              }
                              vdm_STMT_trap__s = rhs_68;
                            }
                          }
                        }
                      }
                    }
                    else 
                      break;
                  }
                }
                {
                  Bool cond_72;
                  cond_72 = (Bool) (!vdm_STMT_match.GetValue());
                  if (cond_72.GetValue()) {
                    Record rexpr_74;
                    rexpr_74 = vdm_STMT_rval__v;
                    return rexpr_74;
                  }
                }
              }
              else 
                break;
            }
          }
        }
        else {
          Record rexpr_16;
          rexpr_16 = vdm_STMT_bval__v;
          return rexpr_16;
        }
      }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalRecTrapStmt");
}

Record vdm_STMT_EvalReturnStmt(Record var_1_1) {
  Generic vdm_STMT_expr;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_ReturnStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 1 == (Int) (e_l_3.Length())) {
          Generic permI_5;
          permI_5 = (Generic) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_expr = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Bool cond_6;
    cond_6 = (Bool) (vdm_STMT_expr == Nil());
    if (cond_6.GetValue()) {
      Record rexpr_10(vdm_SEM_RETURN, length_SEM_RETURN);
      rexpr_10 = Record(vdm_SEM_RETURN, length_SEM_RETURN);
      return rexpr_10;
    }
    else {
      Generic tmpVar_9;
      tmpVar_9 = vdm_STMT_expr;
      return vdm_STMT_EvalExpr(tmpVar_9);
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalReturnStmt");
}

Record vdm_STMT_EvalSeqForLoopStmt(Record var_1_1) {
  Record vdm_STMT_body;
  Record vdm_STMT_cv;
  Generic vdm_STMT_dirn;
  Record vdm_STMT_fseq;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_SeqForLoopStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 4 == (Int) (e_l_3.Length())) {
          Generic permI_5;
          permI_5 = (Generic) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_cv = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_dirn = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[3]);
          if (succ_2) {
            vdm_STMT_fseq = permI_5;
            succ_2 = true;
          }
          permI_5 = (Generic) (e_l_3[4]);
          if (succ_2) {
            vdm_STMT_body = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Record vdm_STMT_res;
    vdm_STMT_res = Record(vdm_SEM_CONT, length_SEM_CONT);
    Sequence vdm_STMT_seq__lv;
    {
      bool succ_6;
      Record tmpVal_7;
      tmpVal_7 = vdm_STMT_EvalExpr(vdm_STMT_fseq);
      Record vdm_STMT_seq__v;
      succ_6 = true;
      {
        vdm_STMT_seq__v = tmpVal_7;
        succ_6 = true;
      }
      if (!succ_6) 
        RunTime("Pattern match did not succeed in value definition");
      {
        Bool cond_9;
        {
          Record argTmp_10;
          argTmp_10 = vdm_STMT_seq__v;
          if (argTmp_10.IsRecord()) 
            cond_9 = vdm_SEM_SEQ == argTmp_10.GetTag();
          else 
            cond_9 = false;
        }
        if (cond_9.GetValue()) {
          bool succ_11;
          Record tmpVal_12;
          tmpVal_12 = vdm_STMT_seq__v;
          Sequence vdm_STMT_s__lv;
          succ_11 = true;
          {
            succ_11 = false;
            if (tmpVal_12.IsRecord()) 
              if (vdm_SEM_SEQ == ((Record) tmpVal_12).GetTag()) {
                Sequence e_l_13;
                for (int i_14 = 1; i_14 <= ((Record) tmpVal_12).Length(); i_14++) 
                  e_l_13.ImpAppend(((Record) tmpVal_12).GetField(i_14));
                if (succ_11 = 1 == (Int) (e_l_13.Length())) {
                  Sequence permI_15;
                  permI_15 = (Sequence) (e_l_13.Hd());
                  succ_11 = true;
                  {
                    vdm_STMT_s__lv = permI_15;
                    succ_11 = true;
                  }
                }
              }
          }
          if (!succ_11) 
            RunTime("Pattern match did not succeed in value definition");
          {
            Bool cond_16;
            cond_16 = (Bool) (vdm_STMT_dirn == (Quote) "REVERSE");
            if (cond_16.GetValue()) {
              Sequence rhs_20;
              rhs_20 = vdm_STMT_ReverseSeq(vdm_STMT_s__lv);
              vdm_STMT_seq__lv = rhs_20;
            }
            else {
              Sequence rhs_19;
              rhs_19 = vdm_STMT_s__lv;
              vdm_STMT_seq__lv = rhs_19;
            }
            {
              Sequence sq_22;
              sq_22 = vdm_STMT_seq__lv;
              Record vdm_STMT_elm__v;
              bool succ_24;
              Generic tmpe_46;
              for (int i_45 = sq_22.First(tmpe_46); i_45; i_45 = sq_22.Next(tmpe_46)) {
                Record elem_23 = tmpe_46;
                {
                  succ_24 = true;
                  {
                    vdm_STMT_elm__v = elem_23;
                    succ_24 = true;
                  }
                  if (succ_24) {
                    Set vdm_STMT_env__s;
                    vdm_STMT_env__s = vdm_STMT_PatternMatch(vdm_STMT_cv, vdm_STMT_elm__v);
                    {
                      Bool cond_29;
                      {
                        Set var2_31;
                        var2_31 = Set();
                        cond_29 = (Bool) (!(vdm_STMT_env__s == var2_31));
                      }
                      if (cond_29.GetValue()) {
                        Set tmpSet_32;
                        tmpSet_32 = vdm_STMT_env__s;
                        Record vdm_STMT_env(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                        Bool tmpB_33;
                        bool succ_34 = false;
                        Generic tmpe_37;
                        for (int bb_36 = tmpSet_32.First(tmpe_37); bb_36 && !succ_34; bb_36 = tmpSet_32.Next(tmpe_37)) {
                          Record tmpElem_35 = tmpe_37;
                          {
                            succ_34 = true;
                            {
                              vdm_STMT_env = tmpElem_35;
                              succ_34 = true;
                            }
                            if (succ_34) 
                              succ_34 = ((Bool) true).GetValue();
                          }
                        }
                        if (!succ_34) 
                          RunTime("The binding environment was empty");
                        {
                          Record tmpVar_38(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                          tmpVar_38 = vdm_STMT_env;
                          vdm_STMT_PushBlkEnv(tmpVar_38);
                          {
                            Record rhs_39;
                            rhs_39 = vdm_STMT_EvalStmt(vdm_STMT_body);
                            vdm_STMT_res = rhs_39;
                          }
                          vdm_STMT_PopBlkEnv();
                          {
                            Bool cond_41;
                            {
                              Bool unArg_42;
                              Record argTmp_43;
                              argTmp_43 = vdm_STMT_res;
                              if (argTmp_43.IsRecord()) 
                                unArg_42 = vdm_SEM_CONT == argTmp_43.GetTag();
                              else 
                                unArg_42 = false;
                              cond_41 = (Bool) (!unArg_42.GetValue());
                            }
                            if (cond_41.GetValue()) {
                              Record rexpr_44;
                              rexpr_44 = vdm_STMT_res;
                              return rexpr_44;
                            }
                          }
                        }
                      }
                      else { RunTime("Can not evaluate an error statement"); }
                    }
                  }
                  else 
                    RunTime("Pattern did not match in sequence for loop");
                }
              }
            }
            {
              Record rexpr_47;
              rexpr_47 = vdm_STMT_res;
              return rexpr_47;
            }
          }
        }
        else { RunTime("Can not evaluate an error statement"); }
      }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalSeqForLoopStmt");
}

Record vdm_STMT_EvalSetForLoopStmt(Record var_1_1) {
  Record vdm_STMT_body;
  Record vdm_STMT_cv;
  Record vdm_STMT_fset;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_SetForLoopStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 3 == (Int) (e_l_3.Length())) {
          Record permI_5;
          permI_5 = (Record) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_cv = permI_5;
            succ_2 = true;
          }
          permI_5 = (Record) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_fset = permI_5;
            succ_2 = true;
          }
          permI_5 = (Record) (e_l_3[3]);
          if (succ_2) {
            vdm_STMT_body = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Record vdm_STMT_res;
    vdm_STMT_res = Record(vdm_SEM_CONT, length_SEM_CONT);
    {
      Record vdm_STMT_set__v;
      vdm_STMT_set__v = vdm_STMT_EvalExpr(vdm_STMT_fset);
      {
        Bool cond_9;
        {
          Record argTmp_10;
          argTmp_10 = vdm_STMT_set__v;
          if (argTmp_10.IsRecord()) 
            cond_9 = vdm_SEM_SET == argTmp_10.GetTag();
          else 
            cond_9 = false;
        }
        if (cond_9.GetValue()) {
          bool succ_11;
          Record tmpVal_12;
          tmpVal_12 = vdm_STMT_set__v;
          Set vdm_STMT_set__sv;
          succ_11 = true;
          {
            succ_11 = false;
            if (tmpVal_12.IsRecord()) 
              if (vdm_SEM_SET == ((Record) tmpVal_12).GetTag()) {
                Sequence e_l_13;
                for (int i_14 = 1; i_14 <= ((Record) tmpVal_12).Length(); i_14++) 
                  e_l_13.ImpAppend(((Record) tmpVal_12).GetField(i_14));
                if (succ_11 = 1 == (Int) (e_l_13.Length())) {
                  Set permI_15;
                  permI_15 = (Set) (e_l_13.Hd());
                  succ_11 = true;
                  {
                    vdm_STMT_set__sv = permI_15;
                    succ_11 = true;
                  }
                }
              }
          }
          if (!succ_11) 
            RunTime("Pattern match did not succeed in value definition");
          {
            Set iset_16;
            iset_16 = vdm_STMT_set__sv;
            Record vdm_STMT_elm__v;
            bool succ_18;
            Generic tmpe_40;
            for (int bb_39 = iset_16.First(tmpe_40); bb_39; bb_39 = iset_16.Next(tmpe_40)) {
              Record elem_17 = tmpe_40;
              {
                succ_18 = true;
                {
                  vdm_STMT_elm__v = elem_17;
                  succ_18 = true;
                }
                if (succ_18) {
                  Set vdm_STMT_env__s;
                  vdm_STMT_env__s = vdm_STMT_PatternMatch(vdm_STMT_cv, vdm_STMT_elm__v);
                  {
                    Bool cond_23;
                    {
                      Set var2_25;
                      var2_25 = Set();
                      cond_23 = (Bool) (!(vdm_STMT_env__s == var2_25));
                    }
                    if (cond_23.GetValue()) {
                      Set tmpSet_26;
                      tmpSet_26 = vdm_STMT_env__s;
                      Record vdm_STMT_env(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                      Bool tmpB_27;
                      bool succ_28 = false;
                      Generic tmpe_31;
                      for (int bb_30 = tmpSet_26.First(tmpe_31); bb_30 && !succ_28; bb_30 = tmpSet_26.Next(tmpe_31)) {
                        Record tmpElem_29 = tmpe_31;
                        {
                          succ_28 = true;
                          {
                            vdm_STMT_env = tmpElem_29;
                            succ_28 = true;
                          }
                          if (succ_28) 
                            succ_28 = ((Bool) true).GetValue();
                        }
                      }
                      if (!succ_28) 
                        RunTime("The binding environment was empty");
                      {
                        Record tmpVar_32(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
                        tmpVar_32 = vdm_STMT_env;
                        vdm_STMT_PushBlkEnv(tmpVar_32);
                        {
                          Record rhs_33;
                          rhs_33 = vdm_STMT_EvalStmt(vdm_STMT_body);
                          vdm_STMT_res = rhs_33;
                        }
                        vdm_STMT_PopBlkEnv();
                        {
                          Bool cond_35;
                          {
                            Bool unArg_36;
                            Record argTmp_37;
                            argTmp_37 = vdm_STMT_res;
                            if (argTmp_37.IsRecord()) 
                              unArg_36 = vdm_SEM_CONT == argTmp_37.GetTag();
                            else 
                              unArg_36 = false;
                            cond_35 = (Bool) (!unArg_36.GetValue());
                          }
                          if (cond_35.GetValue()) {
                            Record rexpr_38;
                            rexpr_38 = vdm_STMT_res;
                            return rexpr_38;
                          }
                        }
                      }
                    }
                    else { RunTime("Can not evaluate an error statement"); }
                  }
                }
                else 
                  RunTime("Pattern did not match in set for loop");
              }
            }
            {
              Record rexpr_41;
              rexpr_41 = vdm_STMT_res;
              return rexpr_41;
            }
          }
        }
        else { RunTime("Can not evaluate an error statement"); }
      }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalSetForLoopStmt");
}

Record vdm_STMT_EvalStmt(Record vdm_STMT_stmt) {
  Bool selRes_3;
  selRes_3 = (Bool) true;
  bool succ_4 = true;
  {
    Bool tmpVal_5;
    {
      Record argTmp_6;
      argTmp_6 = vdm_STMT_stmt;
      if (argTmp_6.IsRecord()) 
        tmpVal_5 = vdm_AS_DefStmt == argTmp_6.GetTag();
      else 
        tmpVal_5 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_5)).GetValue();
    if (succ_4) {
      Record tmpVar_7;
      tmpVar_7 = vdm_STMT_stmt;
      return vdm_STMT_EvalDefStmt(tmpVar_7);
    }
  }
  if (!succ_4) {
    Bool tmpVal_8;
    {
      Record argTmp_9;
      argTmp_9 = vdm_STMT_stmt;
      if (argTmp_9.IsRecord()) 
        tmpVal_8 = vdm_AS_LetStmt == argTmp_9.GetTag();
      else 
        tmpVal_8 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_8)).GetValue();
    if (succ_4) {
      Record tmpVar_10;
      tmpVar_10 = vdm_STMT_stmt;
      return vdm_STMT_EvalLetStmt(tmpVar_10);
    }
  }
  if (!succ_4) {
    Bool tmpVal_11;
    {
      Record argTmp_12;
      argTmp_12 = vdm_STMT_stmt;
      if (argTmp_12.IsRecord()) 
        tmpVal_11 = vdm_AS_LetBeSTStmt == argTmp_12.GetTag();
      else 
        tmpVal_11 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_11)).GetValue();
    if (succ_4) {
      Record tmpVar_13;
      tmpVar_13 = vdm_STMT_stmt;
      return vdm_STMT_EvalLetBeSTStmt(tmpVar_13);
    }
  }
  if (!succ_4) {
    Bool tmpVal_14;
    {
      Record argTmp_15;
      argTmp_15 = vdm_STMT_stmt;
      if (argTmp_15.IsRecord()) 
        tmpVal_14 = vdm_AS_AssignStmt == argTmp_15.GetTag();
      else 
        tmpVal_14 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_14)).GetValue();
    if (succ_4) {
      Record tmpVar_16;
      tmpVar_16 = vdm_STMT_stmt;
      return vdm_STMT_EvalAssignStmt(tmpVar_16);
    }
  }
  if (!succ_4) {
    Bool tmpVal_17;
    {
      Record argTmp_18;
      argTmp_18 = vdm_STMT_stmt;
      if (argTmp_18.IsRecord()) 
        tmpVal_17 = vdm_AS_SeqForLoopStmt == argTmp_18.GetTag();
      else 
        tmpVal_17 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_17)).GetValue();
    if (succ_4) {
      Record tmpVar_19;
      tmpVar_19 = vdm_STMT_stmt;
      return vdm_STMT_EvalSeqForLoopStmt(tmpVar_19);
    }
  }
  if (!succ_4) {
    Bool tmpVal_20;
    {
      Record argTmp_21;
      argTmp_21 = vdm_STMT_stmt;
      if (argTmp_21.IsRecord()) 
        tmpVal_20 = vdm_AS_SetForLoopStmt == argTmp_21.GetTag();
      else 
        tmpVal_20 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_20)).GetValue();
    if (succ_4) {
      Record tmpVar_22;
      tmpVar_22 = vdm_STMT_stmt;
      return vdm_STMT_EvalSetForLoopStmt(tmpVar_22);
    }
  }
  if (!succ_4) {
    Bool tmpVal_23;
    {
      Record argTmp_24;
      argTmp_24 = vdm_STMT_stmt;
      if (argTmp_24.IsRecord()) 
        tmpVal_23 = vdm_AS_IndexForLoopStmt == argTmp_24.GetTag();
      else 
        tmpVal_23 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_23)).GetValue();
    if (succ_4) {
      Record tmpVar_25;
      tmpVar_25 = vdm_STMT_stmt;
      return vdm_STMT_EvalIndexForLoopStmt(tmpVar_25);
    }
  }
  if (!succ_4) {
    Bool tmpVal_26;
    {
      Record argTmp_27;
      argTmp_27 = vdm_STMT_stmt;
      if (argTmp_27.IsRecord()) 
        tmpVal_26 = vdm_AS_WhileLoopStmt == argTmp_27.GetTag();
      else 
        tmpVal_26 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_26)).GetValue();
    if (succ_4) {
      Record tmpVar_28;
      tmpVar_28 = vdm_STMT_stmt;
      return vdm_STMT_EvalWhileLoopStmt(tmpVar_28);
    }
  }
  if (!succ_4) {
    Bool tmpVal_29;
    {
      Record argTmp_30;
      argTmp_30 = vdm_STMT_stmt;
      if (argTmp_30.IsRecord()) 
        tmpVal_29 = vdm_AS_CallStmt == argTmp_30.GetTag();
      else 
        tmpVal_29 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_29)).GetValue();
    if (succ_4) {
      Record tmpVar_31;
      tmpVar_31 = vdm_STMT_stmt;
      return vdm_STMT_EvalCallStmt(tmpVar_31);
    }
  }
  if (!succ_4) {
    Bool tmpVal_32;
    {
      Record argTmp_33;
      argTmp_33 = vdm_STMT_stmt;
      if (argTmp_33.IsRecord()) 
        tmpVal_32 = vdm_AS_ReturnStmt == argTmp_33.GetTag();
      else 
        tmpVal_32 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_32)).GetValue();
    if (succ_4) {
      Record tmpVar_34;
      tmpVar_34 = vdm_STMT_stmt;
      return vdm_STMT_EvalReturnStmt(tmpVar_34);
    }
  }
  if (!succ_4) {
    Bool tmpVal_35;
    {
      Record argTmp_36;
      argTmp_36 = vdm_STMT_stmt;
      if (argTmp_36.IsRecord()) 
        tmpVal_35 = vdm_AS_IfStmt == argTmp_36.GetTag();
      else 
        tmpVal_35 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_35)).GetValue();
    if (succ_4) {
      Record tmpVar_37;
      tmpVar_37 = vdm_STMT_stmt;
      return vdm_STMT_EvalIfStmt(tmpVar_37);
    }
  }
  if (!succ_4) {
    Bool tmpVal_38;
    {
      Record argTmp_39;
      argTmp_39 = vdm_STMT_stmt;
      if (argTmp_39.IsRecord()) 
        tmpVal_38 = vdm_AS_CasesStmt == argTmp_39.GetTag();
      else 
        tmpVal_38 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_38)).GetValue();
    if (succ_4) {
      Record tmpVar_40;
      tmpVar_40 = vdm_STMT_stmt;
      return vdm_STMT_EvalCasesStmt(tmpVar_40);
    }
  }
  if (!succ_4) {
    Bool tmpVal_41;
    {
      Record argTmp_42;
      argTmp_42 = vdm_STMT_stmt;
      if (argTmp_42.IsRecord()) 
        tmpVal_41 = vdm_AS_ErrorStmt == argTmp_42.GetTag();
      else 
        tmpVal_41 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_41)).GetValue();
    if (succ_4) 
      RunTime("Can not evaluate an error statement");
  }
  if (!succ_4) {
    Bool tmpVal_43;
    {
      Record argTmp_44;
      argTmp_44 = vdm_STMT_stmt;
      if (argTmp_44.IsRecord()) 
        tmpVal_43 = vdm_AS_ExitStmt == argTmp_44.GetTag();
      else 
        tmpVal_43 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_43)).GetValue();
    if (succ_4) {
      Record tmpVar_45;
      tmpVar_45 = vdm_STMT_stmt;
      return vdm_STMT_EvalExitStmt(tmpVar_45);
    }
  }
  if (!succ_4) {
    Bool tmpVal_46;
    {
      Record argTmp_47;
      argTmp_47 = vdm_STMT_stmt;
      if (argTmp_47.IsRecord()) 
        tmpVal_46 = vdm_AS_AlwaysStmt == argTmp_47.GetTag();
      else 
        tmpVal_46 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_46)).GetValue();
    if (succ_4) {
      Record tmpVar_48;
      tmpVar_48 = vdm_STMT_stmt;
      return vdm_STMT_EvalAlwaysStmt(tmpVar_48);
    }
  }
  if (!succ_4) {
    Bool tmpVal_49;
    {
      Record argTmp_50;
      argTmp_50 = vdm_STMT_stmt;
      if (argTmp_50.IsRecord()) 
        tmpVal_49 = vdm_AS_TrapStmt == argTmp_50.GetTag();
      else 
        tmpVal_49 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_49)).GetValue();
    if (succ_4) {
      Record tmpVar_51;
      tmpVar_51 = vdm_STMT_stmt;
      return vdm_STMT_EvalTrapStmt(tmpVar_51);
    }
  }
  if (!succ_4) {
    Bool tmpVal_52;
    {
      Record argTmp_53;
      argTmp_53 = vdm_STMT_stmt;
      if (argTmp_53.IsRecord()) 
        tmpVal_52 = vdm_AS_RecTrapStmt == argTmp_53.GetTag();
      else 
        tmpVal_52 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_52)).GetValue();
    if (succ_4) {
      Record tmpVar_54;
      tmpVar_54 = vdm_STMT_stmt;
      return vdm_STMT_EvalRecTrapStmt(tmpVar_54);
    }
  }
  if (!succ_4) {
    Bool tmpVal_55;
    {
      Record argTmp_56;
      argTmp_56 = vdm_STMT_stmt;
      if (argTmp_56.IsRecord()) 
        tmpVal_55 = vdm_AS_BlockStmt == argTmp_56.GetTag();
      else 
        tmpVal_55 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_55)).GetValue();
    if (succ_4) {
      Record tmpVar_57;
      tmpVar_57 = vdm_STMT_stmt;
      return vdm_STMT_EvalBlockStmt(tmpVar_57);
    }
  }
  if (!succ_4) {
    Bool tmpVal_58;
    {
      Record argTmp_59;
      argTmp_59 = vdm_STMT_stmt;
      if (argTmp_59.IsRecord()) 
        tmpVal_58 = vdm_AS_NonDetStmt == argTmp_59.GetTag();
      else 
        tmpVal_58 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_58)).GetValue();
    if (succ_4) {
      Record tmpVar_60;
      tmpVar_60 = vdm_STMT_stmt;
      return vdm_STMT_EvalNonDetStmt(tmpVar_60);
    }
  }
  if (!succ_4) {
    Bool tmpVal_61;
    {
      Record argTmp_62;
      argTmp_62 = vdm_STMT_stmt;
      if (argTmp_62.IsRecord()) 
        tmpVal_61 = vdm_AS_IdentStmt == argTmp_62.GetTag();
      else 
        tmpVal_61 = false;
    }
    succ_4 = ((Bool) (selRes_3 == tmpVal_61)).GetValue();
    if (succ_4) {
      Record rexpr_63(vdm_SEM_CONT, length_SEM_CONT);
      rexpr_63 = Record(vdm_SEM_CONT, length_SEM_CONT);
      return rexpr_63;
    }
  }
  if (!succ_4) 
    RunTime("Can not evaluate an error statement");
}

Record vdm_STMT_EvalTrapStmt(Record var_1_1) {
  Record vdm_STMT_Post;
  Record vdm_STMT_body;
  Record vdm_STMT_pat;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_TrapStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 3 == (Int) (e_l_3.Length())) {
          Record permI_5;
          permI_5 = (Record) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_pat = permI_5;
            succ_2 = true;
          }
          permI_5 = (Record) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_Post = permI_5;
            succ_2 = true;
          }
          permI_5 = (Record) (e_l_3[3]);
          if (succ_2) {
            vdm_STMT_body = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Record vdm_STMT_bval__v;
    vdm_STMT_bval__v = vdm_STMT_EvalStmt(vdm_STMT_body);
    {
      Bool cond_9;
      {
        Bool var1_10;
        Record argTmp_12;
        argTmp_12 = vdm_STMT_bval__v;
        if (argTmp_12.IsRecord()) 
          var1_10 = vdm_SEM_EXIT == argTmp_12.GetTag();
        else 
          var1_10 = false;
        if ((cond_9 = var1_10).GetValue()) {
          Bool var2_11;
          Generic var1_13;
          Record tmpRec_15;
          tmpRec_15 = vdm_STMT_bval__v;
          if (((Record) tmpRec_15).Is(vdm_SEM_TUPLE)) 
            var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_TUPLE_v);
          else 
            if (((Record) tmpRec_15).Is(vdm_SEM_TOKEN)) 
              var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_TOKEN_v);
            else 
              if (((Record) tmpRec_15).Is(vdm_SEM_SET)) 
                var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_SET_v);
              else 
                if (((Record) tmpRec_15).Is(vdm_SEM_SEQ)) 
                  var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_SEQ_v);
                else 
                  if (((Record) tmpRec_15).Is(vdm_SEM_REC)) 
                    var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_REC_v);
                  else 
                    if (((Record) tmpRec_15).Is(vdm_SEM_QUOTE)) 
                      var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_QUOTE_v);
                    else 
                      if (((Record) tmpRec_15).Is(vdm_SEM_NUM)) 
                        var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_NUM_v);
                      else 
                        if (((Record) tmpRec_15).Is(vdm_SEM_MAP)) 
                          var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_MAP_v);
                        else 
                          if (((Record) tmpRec_15).Is(vdm_SEM_ExtVAL)) 
                            var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_ExtVAL_v);
                          else 
                            if (((Record) tmpRec_15).Is(vdm_SEM_EXIT)) 
                              var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_EXIT_v);
                            else 
                              if (((Record) tmpRec_15).Is(vdm_SEM_CHAR)) 
                                var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_CHAR_v);
                              else 
                                if (((Record) tmpRec_15).Is(vdm_SEM_BOOL)) 
                                  var1_13 = ((Record) tmpRec_15).GetField(pos_SEM_BOOL_v);
                                else 
                                  RunTime("Unknown record field selector");
          var2_11 = (Bool) (!(var1_13 == Nil()));
          cond_9 = var2_11;
        }
      }
      if (cond_9.GetValue()) {
        Set vdm_STMT_env__s;
        Generic tmpVar_20;
        {
          Record tmpRec_21;
          tmpRec_21 = vdm_STMT_bval__v;
          if (((Record) tmpRec_21).Is(vdm_SEM_TUPLE)) 
            tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_TUPLE_v);
          else 
            if (((Record) tmpRec_21).Is(vdm_SEM_TOKEN)) 
              tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_TOKEN_v);
            else 
              if (((Record) tmpRec_21).Is(vdm_SEM_SET)) 
                tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_SET_v);
              else 
                if (((Record) tmpRec_21).Is(vdm_SEM_SEQ)) 
                  tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_SEQ_v);
                else 
                  if (((Record) tmpRec_21).Is(vdm_SEM_REC)) 
                    tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_REC_v);
                  else 
                    if (((Record) tmpRec_21).Is(vdm_SEM_QUOTE)) 
                      tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_QUOTE_v);
                    else 
                      if (((Record) tmpRec_21).Is(vdm_SEM_NUM)) 
                        tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_NUM_v);
                      else 
                        if (((Record) tmpRec_21).Is(vdm_SEM_MAP)) 
                          tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_MAP_v);
                        else 
                          if (((Record) tmpRec_21).Is(vdm_SEM_ExtVAL)) 
                            tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_ExtVAL_v);
                          else 
                            if (((Record) tmpRec_21).Is(vdm_SEM_EXIT)) 
                              tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_EXIT_v);
                            else 
                              if (((Record) tmpRec_21).Is(vdm_SEM_CHAR)) 
                                tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_CHAR_v);
                              else 
                                if (((Record) tmpRec_21).Is(vdm_SEM_BOOL)) 
                                  tmpVar_20 = ((Record) tmpRec_21).GetField(pos_SEM_BOOL_v);
                                else 
                                  RunTime("Unknown record field selector");
        }
        vdm_STMT_env__s = vdm_STMT_PatternMatch(vdm_STMT_pat, tmpVar_20);
        {
          Bool cond_22;
          {
            Set var2_24;
            var2_24 = Set();
            cond_22 = (Bool) (vdm_STMT_env__s == var2_24);
          }
          if (cond_22.GetValue()) {
            Record rexpr_36;
            rexpr_36 = vdm_STMT_bval__v;
            return rexpr_36;
          }
          else {
            Set tmpSet_25;
            tmpSet_25 = vdm_STMT_env__s;
            Record vdm_STMT_env(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
            Bool tmpB_26;
            bool succ_27 = false;
            Generic tmpe_30;
            for (int bb_29 = tmpSet_25.First(tmpe_30); bb_29 && !succ_27; bb_29 = tmpSet_25.Next(tmpe_30)) {
              Record tmpElem_28 = tmpe_30;
              {
                succ_27 = true;
                {
                  vdm_STMT_env = tmpElem_28;
                  succ_27 = true;
                }
                if (succ_27) 
                  succ_27 = ((Bool) true).GetValue();
              }
            }
            if (!succ_27) 
              RunTime("The binding environment was empty");
            {
              Record tmpVar_31(vdm_SEM_BlkEnv, length_SEM_BlkEnv);
              tmpVar_31 = vdm_STMT_env;
              vdm_STMT_PushBlkEnv(tmpVar_31);
              {
                Record vdm_STMT_res;
                vdm_STMT_res = vdm_STMT_EvalStmt(vdm_STMT_Post);
                {
                  vdm_STMT_PopBlkEnv();
                  {
                    Record rexpr_35;
                    rexpr_35 = vdm_STMT_res;
                    return rexpr_35;
                  }
                }
              }
            }
          }
        }
      }
      else {
        Record rexpr_16;
        rexpr_16 = vdm_STMT_bval__v;
        return rexpr_16;
      }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalTrapStmt");
}

Record vdm_STMT_EvalWhileLoopStmt(Record var_1_1) {
  Record vdm_STMT_body;
  Record vdm_STMT_test;
  bool succ_2 = true;
  {
    succ_2 = false;
    if (var_1_1.IsRecord()) 
      if (vdm_AS_WhileLoopStmt == var_1_1.GetTag()) {
        Sequence e_l_3;
        for (int i_4 = 1; i_4 <= var_1_1.Length(); i_4++) 
          e_l_3.ImpAppend(var_1_1.GetField(i_4));
        if (succ_2 = 2 == (Int) (e_l_3.Length())) {
          Record permI_5;
          permI_5 = (Record) (e_l_3.Hd());
          succ_2 = true;
          {
            vdm_STMT_test = permI_5;
            succ_2 = true;
          }
          permI_5 = (Record) (e_l_3[2]);
          if (succ_2) {
            vdm_STMT_body = permI_5;
            succ_2 = true;
          }
        }
      }
  }
  if (succ_2) {
    Bool vdm_STMT_cont;
    Record vdm_STMT_res;
    vdm_STMT_res = Record(vdm_SEM_CONT, length_SEM_CONT);
    {
      Record vdm_STMT_test__v;
      vdm_STMT_test__v = vdm_STMT_EvalExpr(vdm_STMT_test);
      {
        Bool cond_9;
        {
          Record argTmp_10;
          argTmp_10 = vdm_STMT_test__v;
          if (argTmp_10.IsRecord()) 
            cond_9 = vdm_SEM_BOOL == argTmp_10.GetTag();
          else 
            cond_9 = false;
        }
        if (cond_9.GetValue()) {
          bool succ_11;
          Record tmpVal_12;
          tmpVal_12 = vdm_STMT_test__v;
          Bool vdm_STMT_b;
          succ_11 = true;
          {
            succ_11 = false;
            if (tmpVal_12.IsRecord()) 
              if (vdm_SEM_BOOL == ((Record) tmpVal_12).GetTag()) {
                Sequence e_l_13;
                for (int i_14 = 1; i_14 <= ((Record) tmpVal_12).Length(); i_14++) 
                  e_l_13.ImpAppend(((Record) tmpVal_12).GetField(i_14));
                if (succ_11 = 1 == (Int) (e_l_13.Length())) {
                  Bool permI_15;
                  permI_15 = (Bool) (e_l_13.Hd());
                  succ_11 = true;
                  {
                    vdm_STMT_b = permI_15;
                    succ_11 = true;
                  }
                }
              }
          }
          if (!succ_11) 
            RunTime("Pattern match did not succeed in value definition");
          {
            Bool rhs_16;
            rhs_16 = vdm_STMT_b;
            vdm_STMT_cont = rhs_16;
            {
              Bool whCrtl_17;
              while ( true){
                whCrtl_17 = vdm_STMT_cont;
                if (whCrtl_17.GetValue()) {
                  Record rhs_18;
                  rhs_18 = vdm_STMT_EvalStmt(vdm_STMT_body);
                  vdm_STMT_res = rhs_18;
                  {
                    Bool cond_20;
                    {
                      Bool unArg_21;
                      Record argTmp_22;
                      argTmp_22 = vdm_STMT_res;
                      if (argTmp_22.IsRecord()) 
                        unArg_21 = vdm_SEM_CONT == argTmp_22.GetTag();
                      else 
                        unArg_21 = false;
                      cond_20 = (Bool) (!unArg_21.GetValue());
                    }
                    if (cond_20.GetValue()) {
                      Record rexpr_23;
                      rexpr_23 = vdm_STMT_res;
                      return rexpr_23;
                    }
                  }
                  {
                    bool succ_24;
                    Record tmpVal_25;
                    tmpVal_25 = vdm_STMT_EvalExpr(vdm_STMT_test);
                    Record vdm_STMT_test__v;
                    succ_24 = true;
                    {
                      vdm_STMT_test__v = tmpVal_25;
                      succ_24 = true;
                    }
                    if (!succ_24) 
                      RunTime("Pattern match did not succeed in value definition");
                    {
                      Bool cond_27;
                      {
                        Record argTmp_28;
                        argTmp_28 = vdm_STMT_test__v;
                        if (argTmp_28.IsRecord()) 
                          cond_27 = vdm_SEM_BOOL == argTmp_28.GetTag();
                        else 
                          cond_27 = false;
                      }
                      if (cond_27.GetValue()) {
                        bool succ_29;
                        Record tmpVal_30;
                        tmpVal_30 = vdm_STMT_test__v;
                        Bool vdm_STMT_b;
                        succ_29 = true;
                        {
                          succ_29 = false;
                          if (tmpVal_30.IsRecord()) 
                            if (vdm_SEM_BOOL == ((Record) tmpVal_30).GetTag()) {
                              Sequence e_l_31;
                              for (int i_32 = 1; i_32 <= ((Record) tmpVal_30).Length(); i_32++) 
                                e_l_31.ImpAppend(((Record) tmpVal_30).GetField(i_32));
                              if (succ_29 = 1 == (Int) (e_l_31.Length())) {
                                Bool permI_33;
                                permI_33 = (Bool) (e_l_31.Hd());
                                succ_29 = true;
                                {
                                  vdm_STMT_b = permI_33;
                                  succ_29 = true;
                                }
                              }
                            }
                        }
                        if (!succ_29) 
                          RunTime("Pattern match did not succeed in value definition");
                        {
                          Bool rhs_34;
                          rhs_34 = vdm_STMT_b;
                          vdm_STMT_cont = rhs_34;
                        }
                      }
                      else { RunTime("Can not evaluate an error statement"); }
                    }
                  }
                }
                else 
                  break;
              }
            }
            {
              Record rexpr_35;
              rexpr_35 = vdm_STMT_res;
              return rexpr_35;
            }
          }
        }
        else { RunTime("Can not evaluate an error statement"); }
      }
    }
  }
  else 
    RunTime("Pattern match failed in function apply in operation: EvalWhileLoopStmt");
}

Bool vdm_STMT_IsProperStateType(Record vdm_STMT_tp__id, Record vdm_STMT_op__name) {
  bool succ_4;
  Record tmpVal_5;
  tmpVal_5 = vdm_STMT_GetModule(vdm_STMT_ExtractModule(vdm_STMT_op__name));
  Record vdm_STMT_sigmamo;
  succ_4 = true;
  {
    vdm_STMT_sigmamo = tmpVal_5;
    succ_4 = true;
  }
  if (!succ_4) 
    RunTime("Pattern match did not succeed in value definition");
  {
    Bool cond_8;
    {
      Generic var1_9;
      Record tmpRec_11;
      tmpRec_11 = vdm_STMT_sigmamo;
      if (((Record) tmpRec_11).Is(vdm_GLOBAL_SigmaMO)) 
        var1_9 = ((Record) tmpRec_11).GetField(pos_GLOBAL_SigmaMO_stp__id);
      else 
        RunTime("Unknown record field selector");
      cond_8 = (Bool) (var1_9 == Nil());
    }
    if (cond_8.GetValue()) {
      Bool rexpr_18;
      rexpr_18 = (Bool) false;
      return rexpr_18;
    }
    else {
      Bool rexpr_12;
      {
        Sequence var1_13;
        Generic tmpVar_15;
        {
          Record tmpRec_16;
          tmpRec_16 = vdm_STMT_sigmamo;
          if (((Record) tmpRec_16).Is(vdm_GLOBAL_SigmaMO)) 
            tmpVar_15 = ((Record) tmpRec_16).GetField(pos_GLOBAL_SigmaMO_stp__id);
          else 
            RunTime("Unknown record field selector");
        }
        var1_13 = vdm_STMT_ExtractId(tmpVar_15);
        rexpr_12 = (Bool) (var1_13 == vdm_STMT_ExtractId(vdm_STMT_tp__id));
      }
      return rexpr_12;
    }
  }
}

Tuple vdm_STMT_SDValToState(Record vdm_STMT_sd, Record vdm_STMT_op__name) {
  Record vdm_STMT_sd__val;
  vdm_STMT_sd__val = vdm_STMT_EvalExpr(vdm_STMT_SDtoExpr(vdm_STMT_sd));
  {
    Bool cond_8;
    {
      Record argTmp_9;
      argTmp_9 = vdm_STMT_sd__val;
      if (argTmp_9.IsRecord()) 
        cond_8 = vdm_SEM_REC == argTmp_9.GetTag();
      else 
        cond_8 = false;
    }
    if (cond_8.GetValue()) {
      bool succ_10;
      Record tmpVal_11;
      tmpVal_11 = vdm_STMT_sd__val;
      Sequence vdm_STMT_field__lv;
      Record vdm_STMT_tag(vdm_AS_Name, length_AS_Name);
      succ_10 = true;
      {
        succ_10 = false;
        if (tmpVal_11.IsRecord()) 
          if (vdm_SEM_REC == ((Record) tmpVal_11).GetTag()) {
            Sequence e_l_12;
            for (int i_13 = 1; i_13 <= ((Record) tmpVal_11).Length(); i_13++) 
              e_l_12.ImpAppend(((Record) tmpVal_11).GetField(i_13));
            if (succ_10 = 2 == (Int) (e_l_12.Length())) {
              Generic permI_14;
              permI_14 = (Generic) (e_l_12.Hd());
              succ_10 = true;
              {
                vdm_STMT_tag = permI_14;
                succ_10 = true;
              }
              permI_14 = (Generic) (e_l_12[2]);
              if (succ_10) {
                vdm_STMT_field__lv = permI_14;
                succ_10 = true;
              }
            }
          }
      }
      if (!succ_10) 
        RunTime("Pattern match did not succeed in value definition");
      {
        Bool cond_15;
        cond_15 = vdm_STMT_IsDefinedInModule(vdm_STMT_tag);
        if (cond_15.GetValue()) {
          Bool cond_17;
          cond_17 = vdm_STMT_IsProperStateType(vdm_STMT_tag, vdm_STMT_op__name);
          if (cond_17.GetValue()) {
            bool succ_20;
            Tuple tmpVal_21(3);
            tmpVal_21 = vdm_STMT_LookUpRecSel(vdm_STMT_tag);
            Map vdm_STMT_pos;
            Sequence vdm_STMT_tps;
            succ_20 = true;
            {
              succ_20 = false;
              if (tmpVal_21.IsTuple()) {
                Sequence e_l_23;
                for (int i_24 = 1; i_24 <= ((Tuple) tmpVal_21).Length(); i_24++) 
                  e_l_23.ImpAppend(((Tuple) tmpVal_21).GetField(i_24));
                if (succ_20 = 3 == (Int) (e_l_23.Length())) {
                  Generic permI_25;
                  permI_25 = (Generic) (e_l_23.Hd());
                  succ_20 = true;
                  succ_20 = true;
                  permI_25 = (Generic) (e_l_23[2]);
                  if (succ_20) {
                    vdm_STMT_pos = permI_25;
                    succ_20 = true;
                  }
                  permI_25 = (Generic) (e_l_23[3]);
                  if (succ_20) {
                    vdm_STMT_tps = permI_25;
                    succ_20 = true;
                  }
                }
              }
            }
            if (!succ_20) 
              RunTime("Pattern match did not succeed in value definition");
            {
              Map vdm_STMT_stm;
              vdm_STMT_stm = Map();
              {
                Set iset_26;
                iset_26 = vdm_STMT_pos.Dom();
                Record vdm_STMT_id(vdm_AS_Name, length_AS_Name);
                bool succ_28;
                Generic tmpe_47;
                for (int bb_46 = iset_26.First(tmpe_47); bb_46; bb_46 = iset_26.Next(tmpe_47)) {
                  Record elem_27 = tmpe_47;
                  {
                    succ_28 = true;
                    {
                      vdm_STMT_id = elem_27;
                      succ_28 = true;
                    }
                    if (succ_28) {
                      Map rhs_30;
                      {
                        Map seqmap_31;
                        seqmap_31 = vdm_STMT_stm;
                        Map modmap_32;
                        {
                          Record tmpVar2_35(vdm_GLOBAL_State, length_GLOBAL_State);
                          {
                            tmpVar2_35 = Record(vdm_GLOBAL_State, length_GLOBAL_State);
                            Record tmpVar_36;
                            {
                              Sequence tmpseq_37;
                              tmpseq_37 = vdm_STMT_field__lv;
                              Int tmppar_38;
                              {
                                Map tmp_m_39;
                                tmp_m_39 = vdm_STMT_pos;
                                tmppar_38 = (Int) (((Map) tmp_m_39)[vdm_STMT_id]);
                              }
                              tmpVar_36 = (Record) (tmpseq_37[tmppar_38.GetValue()]);
                            }
                            tmpVar2_35.SetField(1, tmpVar_36);
                            Record tmpVar_41;
                            {
                              Sequence tmpseq_42;
                              tmpseq_42 = vdm_STMT_tps;
                              Int tmppar_43;
                              {
                                Map tmp_m_44;
                                tmp_m_44 = vdm_STMT_pos;
                                tmppar_43 = (Int) (((Map) tmp_m_44)[vdm_STMT_id]);
                              }
                              tmpVar_41 = (Record) (tmpseq_42[tmppar_43.GetValue()]);
                            }
                            tmpVar2_35.SetField(2, tmpVar_41);
                          }
                          modmap_32 = Map().Insert(vdm_STMT_id, tmpVar2_35);
                        }
                        seqmap_31.ImpOverride(modmap_32);
                        rhs_30 = seqmap_31;
                      }
                      vdm_STMT_stm = rhs_30;
                    }
                    else 
                      RunTime("Pattern did not match in set for loop");
                  }
                }
              }
              {
                Tuple rexpr_48(2);
                {
                  rexpr_48 = Tuple(2);
                  rexpr_48.SetField(1, vdm_STMT_stm);
                  rexpr_48.SetField(2, vdm_STMT_tag);
                }
                return rexpr_48;
              }
            }
          }
          else { RunTime("Can not evaluate an error statement"); }
        }
        else { RunTime("Can not evaluate an error statement"); }
      }
    }
    else { RunTime("Can not evaluate an error statement"); }
  }
}

Record vdm_STMT_StateToSDVal(Map vdm_STMT_stm, Record vdm_STMT_sd__tag) {
  bool succ_4;
  Tuple tmpVal_5(3);
  tmpVal_5 = vdm_STMT_LookUpRecSel(vdm_STMT_sd__tag);
  Map vdm_STMT_pos;
  succ_4 = true;
  {
    succ_4 = false;
    if (tmpVal_5.IsTuple()) {
      Sequence e_l_7;
      for (int i_8 = 1; i_8 <= ((Tuple) tmpVal_5).Length(); i_8++) 
        e_l_7.ImpAppend(((Tuple) tmpVal_5).GetField(i_8));
      if (succ_4 = 3 == (Int) (e_l_7.Length())) {
        Generic permI_9;
        permI_9 = (Generic) (e_l_7.Hd());
        succ_4 = true;
        succ_4 = true;
        permI_9 = (Generic) (e_l_7[2]);
        if (succ_4) {
          vdm_STMT_pos = permI_9;
          succ_4 = true;
        }
        permI_9 = (Generic) (e_l_7[3]);
        if (succ_4) 
          succ_4 = true;
      }
    }
  }
  if (!succ_4) 
    RunTime("Pattern match did not succeed in value definition");
  {
    Map vdm_STMT_pos_q;
    NotSupported("The construct is not supported: map inverse expression");
    {
      Sequence vdm_STMT_field__lv;
      {
        Sequence res_l_14;
        Record reselem_15;
        Set resBind_s_17;
        resBind_s_17 = vdm_STMT_pos_q.Dom();
        Sequence bind_l_16;
        if ((Int) (resBind_s_17.Card()) != (Int) 0) 
          bind_l_16 = Sort(resBind_s_17);
        bool succ_18 = true;
        Int vdm_STMT_i;
        Generic tmpe_28;
        for (int i_27 = bind_l_16.First(tmpe_28); i_27; i_27 = bind_l_16.Next(tmpe_28)) {
          Int e_20 = tmpe_28;
          {
            vdm_STMT_i = e_20;
            succ_18 = true;
            if (succ_18) {
              Record tmpRec_22(vdm_GLOBAL_State, length_GLOBAL_State);
              {
                Map tmp_m_23;
                tmp_m_23 = vdm_STMT_stm;
                Record tmppar_24(vdm_AS_Name, length_AS_Name);
                {
                  Map tmp_m_25;
                  tmp_m_25 = vdm_STMT_pos_q;
                  tmppar_24 = (Record) (((Map) tmp_m_25)[vdm_STMT_i]);
                }
                tmpRec_22 = (Record) (((Map) tmp_m_23)[tmppar_24]);
              }
              if (tmpRec_22.Is(vdm_GLOBAL_State)) 
                reselem_15 = tmpRec_22.GetField(pos_GLOBAL_State_val);
              else 
                RunTime("Unknown record field selector");
              res_l_14.ImpAppend(reselem_15);
            }
          }
        }
        vdm_STMT_field__lv = res_l_14;
      }
      {
        Record rexpr_29(vdm_SEM_REC, length_SEM_REC);
        {
          rexpr_29 = Record(vdm_SEM_REC, length_SEM_REC);
          rexpr_29.SetField(1, vdm_STMT_sd__tag);
          rexpr_29.SetField(2, vdm_STMT_field__lv);
        }
        return rexpr_29;
      }
    }
  }
}
