//
// THIS FILE IS AUTOMATICALLY GENERATED!!
//
// Generated at Wed 03-Nov-99 by the VDM-SLtoC++ Code Generator
// (v3.3 - Mon 22-Mar-99)
//
// Supported compilers:
// 	egcs version 1.1 on SunOS4, SunOS5, Linux, HP-UX10
// 	VC++ version 6.0 on Windows95, Windows NT
//



#include "REP2TYPE.h"

void init_REP2TYPE_VDMLib() {
  VDMGetDefaultRecInfoMap().NewTag(TOKEN, 1);
  VDMGetDefaultRecInfoMap().SetSymTag(TOKEN, "token");
}
#ifdef DEF_REP2TYPE_USERIMPL

#include "REP2TYPE_userimpl.cc"

#endif


void init_REP2TYPE() { init_REP2TYPE_VDMLib(); }
#ifndef DEF_REP2TYPE_SetToSeq

type_typevariableL vdm_REP2TYPE_SetToSeq(const type_typevariableS &vdm_REP2TYPE_s) {
  Sequence varRes_3;
  if (((Bool) (vdm_REP2TYPE_s == Set())).GetValue()) 
    varRes_3 = Sequence();
  else {
    Set tmpSet_8;
    tmpSet_8 = vdm_REP2TYPE_s;
    Generic vdm_REP2TYPE_x;
    bool succ_10 = false;
    Generic tmpe_13;
    for (int bb_12 = tmpSet_8.First(tmpe_13); bb_12 && !succ_10; bb_12 = tmpSet_8.Next(tmpe_13)) {
      Generic tmpElem_11 = tmpe_13;
      succ_10 = true;      vdm_REP2TYPE_x = tmpElem_11;
    }
    if (!succ_10) 
      RunTime("The binding environment was empty");
    Sequence var1_14;
    Set par_15;
    Set var2_17;
    var2_17 = Set().Insert(vdm_REP2TYPE_x);
    par_15 = vdm_REP2TYPE_s;
    par_15.ImpDiff(var2_17);
    var1_14 = vdm_REP2TYPE_SetToSeq((Generic) par_15);
    Sequence var2_19;
    var2_19 = Sequence().ImpAppend(vdm_REP2TYPE_x);
    varRes_3.ImpConc(var1_14).ImpConc(var2_19);
  }
  return (Generic) varRes_3;
}
#endif

#ifndef DEF_REP2TYPE_TypeRepToType

TYPE_REP2TYPE_Type vdm_REP2TYPE_TypeRepToType(const TYPE_REP_TypeRep &vdm_REP2TYPE_tyrep, const TYPE_CI_ContextId &vdm_REP2TYPE_cid) {
  Generic varRes_4;
  {
    Record vdm_REP2TYPE_bottom_unm(vdm_AS_Name, length_AS_Name);
    vdm_REP2TYPE_bottom_unm = Record(vdm_AS_Name, length_AS_Name);
    Sequence tmpVar_7;
    tmpVar_7 = Sequence().ImpAppend(Sequence("bottom"));
    vdm_REP2TYPE_bottom_unm.SetField(1, tmpVar_7);
    vdm_REP2TYPE_bottom_unm.SetField(2, vdm_CI_NilContextId);
    Record vdm_REP2TYPE_bottom(vdm_AS_TypeName, length_AS_TypeName);
    vdm_REP2TYPE_bottom = Record(vdm_AS_TypeName, length_AS_TypeName);
    vdm_REP2TYPE_bottom.SetField(1, vdm_REP2TYPE_bottom_unm);
    vdm_REP2TYPE_bottom.SetField(2, vdm_CI_NilContextId);
    Record vdm_REP2TYPE_top_unm(vdm_AS_Name, length_AS_Name);
    vdm_REP2TYPE_top_unm = Record(vdm_AS_Name, length_AS_Name);
    Sequence tmpVar_14;
    tmpVar_14 = Sequence().ImpAppend(Sequence("top"));
    vdm_REP2TYPE_top_unm.SetField(1, tmpVar_14);
    vdm_REP2TYPE_top_unm.SetField(2, vdm_CI_NilContextId);
    Record vdm_REP2TYPE_top(vdm_AS_TypeName, length_AS_TypeName);
    vdm_REP2TYPE_top = Record(vdm_AS_TypeName, length_AS_TypeName);
    vdm_REP2TYPE_top.SetField(1, vdm_REP2TYPE_top_unm);
    vdm_REP2TYPE_top.SetField(2, vdm_CI_NilContextId);
    Record vdm_REP2TYPE_nil_unm(vdm_AS_Name, length_AS_Name);
    vdm_REP2TYPE_nil_unm = Record(vdm_AS_Name, length_AS_Name);
    Sequence tmpVar_21;
    tmpVar_21 = Sequence().ImpAppend(Sequence("nilType"));
    vdm_REP2TYPE_nil_unm.SetField(1, tmpVar_21);
    vdm_REP2TYPE_nil_unm.SetField(2, vdm_CI_NilContextId);
    Record vdm_REP2TYPE_nilType(vdm_AS_TypeName, length_AS_TypeName);
    vdm_REP2TYPE_nilType = Record(vdm_AS_TypeName, length_AS_TypeName);
    vdm_REP2TYPE_nilType.SetField(1, vdm_REP2TYPE_nil_unm);
    vdm_REP2TYPE_nilType.SetField(2, vdm_CI_NilContextId);
    bool succ_27 = true;
    {
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_InvTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_30;
        for (int i_31 = 1; i_31 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_31++) 
          e_l_30.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_31));
        if (succ_27 = 2 == (Int) e_l_30.Length()) {}
      }
      else 
        succ_27 = false;
      if (succ_27) 
        RunTime("Can not evaluate an undefined expression");
    }
    if (!succ_27) {
      Generic vdm_REP2TYPE_typ;
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_BasicTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_32;
        for (int i_33 = 1; i_33 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_33++) 
          e_l_32.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_33));
        if (succ_27 = 1 == (Int) e_l_32.Length()) 
          vdm_REP2TYPE_typ = (Generic) e_l_32.Hd();
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_BasicType, length_AS_BasicType);
        varRes_4 = Record(varRes_4).SetField(1, vdm_REP2TYPE_typ);
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      Record vdm_REP2TYPE_lit(vdm_AS_Name, length_AS_Name);
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_QuoteTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_36;
        for (int i_37 = 1; i_37 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_37++) 
          e_l_36.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_37));
        if (succ_27 = 1 == (Int) e_l_36.Length()) 
          vdm_REP2TYPE_lit = (Record) e_l_36.Hd();
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_QuoteType, length_AS_QuoteType);
        Record tmpVar_38(vdm_AS_QuoteLit, length_AS_QuoteLit);
        tmpVar_38 = Record(vdm_AS_QuoteLit, length_AS_QuoteLit);
        Sequence tmpVar_39;
        Sequence unArg_40;
        if (vdm_REP2TYPE_lit.Is(vdm_AS_Name)) 
          unArg_40 = vdm_REP2TYPE_lit.GetField(pos_AS_Name_ids);
        else 
          RunTime("Unknown record field selector");
        tmpVar_39 = (Sequence) unArg_40.Hd();
        tmpVar_38.SetField(1, tmpVar_39);
        tmpVar_38.SetField(2, vdm_REP2TYPE_cid);
        varRes_4 = Record(varRes_4).SetField(1, tmpVar_38);
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      Sequence vdm_REP2TYPE_fields;
      Record vdm_REP2TYPE_nm(vdm_AS_Name, length_AS_Name);
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_CompositeTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_44;
        for (int i_45 = 1; i_45 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_45++) 
          e_l_44.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_45));
        if (succ_27 = 2 == (Int) e_l_44.Length()) {
          vdm_REP2TYPE_nm = (Generic) e_l_44.Hd();
          vdm_REP2TYPE_fields = (Generic) e_l_44[2];
        }
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_CompositeType, length_AS_CompositeType);
        varRes_4 = Record(varRes_4).SetField(1, vdm_REP2TYPE_nm);
        Sequence tmpVar_47;
        {
          Sequence res_l_48;
          Set resBind_s_50;
          Set riseq_54;
          int max_55 = (Int) vdm_REP2TYPE_fields.Length();
          for (int i_56 = 1; i_56 <= max_55; i_56++) 
            riseq_54.Insert((Int) i_56);
          resBind_s_50 = riseq_54;
          Sequence bind_l_49;
          if ((Int) resBind_s_50.Card() != (Int) 0) 
            bind_l_49 = Sort(resBind_s_50);
          bool succ_51 = true;
          Int vdm_REP2TYPE_i;
          Generic tmpe_71;
          for (int i_70 = bind_l_49.First(tmpe_71); i_70; i_70 = bind_l_49.Next(tmpe_71)) {
            Int e_52 = tmpe_71;
            vdm_REP2TYPE_i = e_52;
            if (succ_51) {
              Record reselem_57(vdm_AS_Field, length_AS_Field);
              reselem_57 = Record(vdm_AS_Field, length_AS_Field);
              Generic tmpVar_58;
              if (((Record) vdm_REP2TYPE_fields[vdm_REP2TYPE_i.GetValue()]).Is(vdm_REP_FieldRep)) 
                tmpVar_58 = ((Record) vdm_REP2TYPE_fields[vdm_REP2TYPE_i.GetValue()]).GetField(pos_REP_FieldRep_sel);
              else 
                RunTime("Unknown record field selector");
              reselem_57.SetField(1, tmpVar_58);
              Record tmpVar_62;
              Record par_63;
              if (((Record) vdm_REP2TYPE_fields[vdm_REP2TYPE_i.GetValue()]).Is(vdm_REP_FieldRep)) 
                par_63 = ((Record) vdm_REP2TYPE_fields[vdm_REP2TYPE_i.GetValue()]).GetField(pos_REP_FieldRep_tp);
              else 
                RunTime("Unknown record field selector");
              tmpVar_62 = vdm_REP2TYPE_TypeRepToType((Generic) par_63, (Generic) vdm_REP2TYPE_cid);
              reselem_57.SetField(2, tmpVar_62);
              reselem_57.SetField(3, (Bool) false);
              reselem_57.SetField(4, vdm_REP2TYPE_cid);
              res_l_48.ImpAppend(reselem_57);
            }
          }
          tmpVar_47 = res_l_48;
        }
        varRes_4 = Record(varRes_4).SetField(2, tmpVar_47);
        varRes_4 = Record(varRes_4).SetField(3, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      Set vdm_REP2TYPE_tyset;
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_UnionTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_73;
        for (int i_74 = 1; i_74 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_74++) 
          e_l_73.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_74));
        if (succ_27 = 1 == (Int) e_l_73.Length()) 
          vdm_REP2TYPE_tyset = (Set) e_l_73.Hd();
      }
      else 
        succ_27 = false;
      if (succ_27) {
        Set vdm_REP2TYPE_argset;
        Bool cond_78;
        cond_78 = (Bool) vdm_REP2TYPE_tyset.InSet((Generic) Record(vdm_REP_EmptySeqTypeRep, length_REP_EmptySeqTypeRep));
        if (cond_78.GetValue()) {
          Set res_s_126;
          {
            bool succ_141 = true;

            Record vdm_REP2TYPE_ty;
            {
              Generic tmpe_145;
              for (int bb_144 = vdm_REP2TYPE_tyset.First(tmpe_145); bb_144; bb_144 = vdm_REP2TYPE_tyset.Next(tmpe_145)) {
                Record elem_143 = tmpe_145;
                succ_141 = true;                vdm_REP2TYPE_ty = elem_143;                if (succ_141) {
                  Bool pred_138;
                  Bool unArg_139;
                  if (vdm_REP2TYPE_ty.IsRecord()) 
                    unArg_139 = vdm_REP_EmptySeqTypeRep == vdm_REP2TYPE_ty.GetTag();
                  else 
                    unArg_139 = false;
                  pred_138 = (Bool) !unArg_139.GetValue();
                  if (pred_138.GetValue()) {
                    Record res_s_127;
                    Bool cond_129;
                    if (vdm_REP2TYPE_ty.IsRecord()) 
                      cond_129 = vdm_REP_SeqTypeRep == vdm_REP2TYPE_ty.GetTag();
                    else 
                      cond_129 = false;
                    if (cond_129.GetValue()) {
                      res_s_127 = Record(vdm_AS_Seq0Type, length_AS_Seq0Type);
                      Record tmpVar_133;
                      Record par_134;
                      if (((Record) vdm_REP2TYPE_ty).Is(vdm_REP_SetTypeRep)) 
                        par_134 = ((Record) vdm_REP2TYPE_ty).GetField(pos_REP_SetTypeRep_elemtp);
                      else 
                        if (((Record) vdm_REP2TYPE_ty).Is(vdm_REP_SeqTypeRep)) 
                          par_134 = ((Record) vdm_REP2TYPE_ty).GetField(pos_REP_SeqTypeRep_elemtp);
                        else 
                          RunTime("Unknown record field selector");
                      tmpVar_133 = vdm_REP2TYPE_TypeRepToType((Generic) par_134, (Generic) vdm_REP2TYPE_cid);
                      res_s_127.SetField(1, tmpVar_133);
                      res_s_127.SetField(2, vdm_REP2TYPE_cid);
                    }
                    else 
                      res_s_127 = vdm_REP2TYPE_TypeRepToType((Generic) vdm_REP2TYPE_ty, (Generic) vdm_REP2TYPE_cid);
                    res_s_126.Insert(res_s_127);
                  }
                }
              }
            }
          }
          vdm_REP2TYPE_argset = res_s_126;
        }
        else {
          Bool cond_101;
          cond_101 = (Bool) vdm_REP2TYPE_tyset.InSet((Generic) Record(vdm_REP_NilTypeRep, length_REP_NilTypeRep));
          if (cond_101.GetValue()) {
            Set res_s_104;
            {
              bool succ_121 = true;

              Record vdm_REP2TYPE_ty;
              {
                Generic tmpe_125;
                for (int bb_124 = vdm_REP2TYPE_tyset.First(tmpe_125); bb_124; bb_124 = vdm_REP2TYPE_tyset.Next(tmpe_125)) {
                  Record elem_123 = tmpe_125;
                  succ_121 = true;                  vdm_REP2TYPE_ty = elem_123;                  if (succ_121) {
                    Bool pred_110;
                    Bool var1_111;
{ if ((var1_111 = (Bool) !(vdm_REP2TYPE_ty == Record(vdm_REP_NilTypeRep, length_REP_NilTypeRep))).GetValue()) 
   var1_111 = (Bool) !(vdm_REP2TYPE_ty == Record(vdm_REP_EmptySetTypeRep, length_REP_EmptySetTypeRep)); }
{ if ((pred_110 = var1_111).GetValue()) 
   pred_110 = (Bool) !(vdm_REP2TYPE_ty == Record(vdm_REP_EmptyMapTypeRep, length_REP_EmptyMapTypeRep)); }
                    if (pred_110.GetValue()) {
                      Record res_s_105(vdm_AS_OptionalType, length_AS_OptionalType);
                      res_s_105 = Record(vdm_AS_OptionalType, length_AS_OptionalType);
                      res_s_105.SetField(1, vdm_REP2TYPE_TypeRepToType((Generic) vdm_REP2TYPE_ty, (Generic) vdm_REP2TYPE_cid));
                      res_s_105.SetField(2, vdm_REP2TYPE_cid);
                      res_s_104.Insert(res_s_105);
                    }
                  }
                }
              }
            }
            vdm_REP2TYPE_argset = res_s_104;
          }
          else {
            Set res_s_81;
            {
              bool succ_96 = true;

              Record vdm_REP2TYPE_ty;
              {
                Generic tmpe_100;
                for (int bb_99 = vdm_REP2TYPE_tyset.First(tmpe_100); bb_99; bb_99 = vdm_REP2TYPE_tyset.Next(tmpe_100)) {
                  Record elem_98 = tmpe_100;
                  succ_96 = true;                  vdm_REP2TYPE_ty = elem_98;                  if (succ_96) {
                    Bool pred_85;
                    Bool var1_86;
{ if ((var1_86 = (Bool) !(vdm_REP2TYPE_ty == Record(vdm_REP_NilTypeRep, length_REP_NilTypeRep))).GetValue()) 
   var1_86 = (Bool) !(vdm_REP2TYPE_ty == Record(vdm_REP_EmptySetTypeRep, length_REP_EmptySetTypeRep)); }
{ if ((pred_85 = var1_86).GetValue()) 
   pred_85 = (Bool) !(vdm_REP2TYPE_ty == Record(vdm_REP_EmptyMapTypeRep, length_REP_EmptyMapTypeRep)); }
                    if (pred_85.GetValue()) { res_s_81.Insert(vdm_REP2TYPE_TypeRepToType((Generic) vdm_REP2TYPE_ty, (Generic) vdm_REP2TYPE_cid)); }
                  }
                }
              }
            }
            vdm_REP2TYPE_argset = res_s_81;
          }
        }
        Sequence vdm_REP2TYPE_tyseq = vdm_REP2TYPE_SetToSeq((Generic) vdm_REP2TYPE_argset);
        if (((Bool) ((Int) vdm_REP2TYPE_tyseq.Length() == (Int) 1)).GetValue()) 
          varRes_4 = (Generic) vdm_REP2TYPE_tyseq.Hd();
        else {
          varRes_4 = Record(vdm_AS_UnionType, length_AS_UnionType);
          varRes_4 = Record(varRes_4).SetField(1, vdm_REP2TYPE_tyseq);
          varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_cid);
        }
      }
    }
    if (!succ_27) {
      Sequence vdm_REP2TYPE_tylist;
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_ProductTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_156;
        for (int i_157 = 1; i_157 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_157++) 
          e_l_156.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_157));
        if (succ_27 = 1 == (Int) e_l_156.Length()) 
          vdm_REP2TYPE_tylist = (Sequence) e_l_156.Hd();
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_ProductType, length_AS_ProductType);
        Sequence tmpVar_158;
        {
          Sequence res_l_159;
          Set resBind_s_161;
          Set riseq_165;
          int max_166 = (Int) vdm_REP2TYPE_tylist.Length();
          for (int i_167 = 1; i_167 <= max_166; i_167++) 
            riseq_165.Insert((Int) i_167);
          resBind_s_161 = riseq_165;
          Sequence bind_l_160;
          if ((Int) resBind_s_161.Card() != (Int) 0) 
            bind_l_160 = Sort(resBind_s_161);
          bool succ_162 = true;
          Int vdm_REP2TYPE_i;
          Generic tmpe_174;
          for (int i_173 = bind_l_160.First(tmpe_174); i_173; i_173 = bind_l_160.Next(tmpe_174)) {
            Int e_163 = tmpe_174;
            vdm_REP2TYPE_i = e_163;
            if (succ_162) 
              res_l_159.ImpAppend(vdm_REP2TYPE_TypeRepToType((Generic) (Record) vdm_REP2TYPE_tylist[vdm_REP2TYPE_i.GetValue()], (Generic) vdm_REP2TYPE_cid));
          }
          tmpVar_158 = res_l_159;
        }
        varRes_4 = Record(varRes_4).SetField(1, tmpVar_158);
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      Record vdm_REP2TYPE_typ;
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_SetTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_176;
        for (int i_177 = 1; i_177 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_177++) 
          e_l_176.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_177));
        if (succ_27 = 1 == (Int) e_l_176.Length()) 
          vdm_REP2TYPE_typ = (Record) e_l_176.Hd();
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_SetType, length_AS_SetType);
        varRes_4 = Record(varRes_4).SetField(1, vdm_REP2TYPE_TypeRepToType((Generic) vdm_REP2TYPE_typ, (Generic) vdm_REP2TYPE_cid));
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      Record vdm_REP2TYPE_typ;
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_SeqTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_182;
        for (int i_183 = 1; i_183 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_183++) 
          e_l_182.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_183));
        if (succ_27 = 1 == (Int) e_l_182.Length()) 
          vdm_REP2TYPE_typ = (Record) e_l_182.Hd();
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_Seq1Type, length_AS_Seq1Type);
        varRes_4 = Record(varRes_4).SetField(1, vdm_REP2TYPE_TypeRepToType((Generic) vdm_REP2TYPE_typ, (Generic) vdm_REP2TYPE_cid));
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      Record vdm_REP2TYPE_mdom;
      Record vdm_REP2TYPE_mrng;
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_GeneralMapTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_188;
        for (int i_189 = 1; i_189 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_189++) 
          e_l_188.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_189));
        if (succ_27 = 2 == (Int) e_l_188.Length()) {
          vdm_REP2TYPE_mdom = (Record) e_l_188.Hd();
          vdm_REP2TYPE_mrng = (Record) e_l_188[2];
        }
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_GeneralMapType, length_AS_GeneralMapType);
        varRes_4 = Record(varRes_4).SetField(1, vdm_REP2TYPE_TypeRepToType((Generic) vdm_REP2TYPE_mdom, (Generic) vdm_REP2TYPE_cid));
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_TypeRepToType((Generic) vdm_REP2TYPE_mrng, (Generic) vdm_REP2TYPE_cid));
        varRes_4 = Record(varRes_4).SetField(3, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      Record vdm_REP2TYPE_mdom;
      Record vdm_REP2TYPE_mrng;
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_InjectiveMapTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_197;
        for (int i_198 = 1; i_198 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_198++) 
          e_l_197.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_198));
        if (succ_27 = 2 == (Int) e_l_197.Length()) {
          vdm_REP2TYPE_mdom = (Record) e_l_197.Hd();
          vdm_REP2TYPE_mrng = (Record) e_l_197[2];
        }
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_InjectiveMapType, length_AS_InjectiveMapType);
        varRes_4 = Record(varRes_4).SetField(1, vdm_REP2TYPE_TypeRepToType((Generic) vdm_REP2TYPE_mdom, (Generic) vdm_REP2TYPE_cid));
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_TypeRepToType((Generic) vdm_REP2TYPE_mrng, (Generic) vdm_REP2TYPE_cid));
        varRes_4 = Record(varRes_4).SetField(3, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      Generic vdm_REP2TYPE_fndom;
      Record vdm_REP2TYPE_fnrng;
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_PartialFnTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_206;
        for (int i_207 = 1; i_207 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_207++) 
          e_l_206.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_207));
        if (succ_27 = 2 == (Int) e_l_206.Length()) {
          vdm_REP2TYPE_fndom = (Generic) e_l_206.Hd();
          vdm_REP2TYPE_fnrng = (Generic) e_l_206[2];
        }
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_PartialFnType, length_AS_PartialFnType);
        Sequence tmpVar_208;
        {
          Sequence res_l_209;
          Set resBind_s_211;
          if (!vdm_REP2TYPE_fndom.IsSequence()) 
            RunTime("A sequence was expected");
          else {
            Set riseq_215;
            int max_216 = (Int) ((Sequence) vdm_REP2TYPE_fndom).Length();
            for (int i_217 = 1; i_217 <= max_216; i_217++) 
              riseq_215.Insert((Int) i_217);
            resBind_s_211 = riseq_215;
          }
          Sequence bind_l_210;
          if ((Int) resBind_s_211.Card() != (Int) 0) 
            bind_l_210 = Sort(resBind_s_211);
          bool succ_212 = true;
          Int vdm_REP2TYPE_i;
          Generic tmpe_225;
          for (int i_224 = bind_l_210.First(tmpe_225); i_224; i_224 = bind_l_210.Next(tmpe_225)) {
            Int e_213 = tmpe_225;
            vdm_REP2TYPE_i = e_213;
            if (succ_212) {
              Record reselem_218;
              Generic par_219;
              if (vdm_REP2TYPE_fndom.IsSequence()) {
                Sequence tmpRes_221 = vdm_REP2TYPE_fndom;
                par_219 = tmpRes_221[vdm_REP2TYPE_i.GetValue()];
              }
              else 
                RunTime("The argument could not be applied");
              reselem_218 = vdm_REP2TYPE_TypeRepToType((Generic) par_219, (Generic) vdm_REP2TYPE_cid);
              res_l_209.ImpAppend(reselem_218);
            }
          }
          tmpVar_208 = res_l_209;
        }
        varRes_4 = Record(varRes_4).SetField(1, tmpVar_208);
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_TypeRepToType((Generic) vdm_REP2TYPE_fnrng, (Generic) vdm_REP2TYPE_cid));
        varRes_4 = Record(varRes_4).SetField(3, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      Generic vdm_REP2TYPE_fndom;
      Record vdm_REP2TYPE_fnrng;
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_TotalFnTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_230;
        for (int i_231 = 1; i_231 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_231++) 
          e_l_230.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_231));
        if (succ_27 = 2 == (Int) e_l_230.Length()) {
          vdm_REP2TYPE_fndom = (Generic) e_l_230.Hd();
          vdm_REP2TYPE_fnrng = (Generic) e_l_230[2];
        }
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_TotalFnType, length_AS_TotalFnType);
        Sequence tmpVar_232;
        {
          Sequence res_l_233;
          Set resBind_s_235;
          if (!vdm_REP2TYPE_fndom.IsSequence()) 
            RunTime("A sequence was expected");
          else {
            Set riseq_239;
            int max_240 = (Int) ((Sequence) vdm_REP2TYPE_fndom).Length();
            for (int i_241 = 1; i_241 <= max_240; i_241++) 
              riseq_239.Insert((Int) i_241);
            resBind_s_235 = riseq_239;
          }
          Sequence bind_l_234;
          if ((Int) resBind_s_235.Card() != (Int) 0) 
            bind_l_234 = Sort(resBind_s_235);
          bool succ_236 = true;
          Int vdm_REP2TYPE_i;
          Generic tmpe_249;
          for (int i_248 = bind_l_234.First(tmpe_249); i_248; i_248 = bind_l_234.Next(tmpe_249)) {
            Int e_237 = tmpe_249;
            vdm_REP2TYPE_i = e_237;
            if (succ_236) {
              Record reselem_242;
              Generic par_243;
              if (vdm_REP2TYPE_fndom.IsSequence()) {
                Sequence tmpRes_245 = vdm_REP2TYPE_fndom;
                par_243 = tmpRes_245[vdm_REP2TYPE_i.GetValue()];
              }
              else 
                RunTime("The argument could not be applied");
              reselem_242 = vdm_REP2TYPE_TypeRepToType((Generic) par_243, (Generic) vdm_REP2TYPE_cid);
              res_l_233.ImpAppend(reselem_242);
            }
          }
          tmpVar_232 = res_l_233;
        }
        varRes_4 = Record(varRes_4).SetField(1, tmpVar_232);
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_TypeRepToType((Generic) vdm_REP2TYPE_fnrng, (Generic) vdm_REP2TYPE_cid));
        varRes_4 = Record(varRes_4).SetField(3, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_AllTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_254;
        for (int i_255 = 1; i_255 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_255++) 
          e_l_254.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_255));
        succ_27 = 0 == (Int) e_l_254.Length();
      }
      else 
        succ_27 = false;
      if (succ_27) 
        varRes_4 = vdm_REP2TYPE_top;
    }
    if (!succ_27) {
      Record vdm_REP2TYPE_nm(vdm_AS_Name, length_AS_Name);
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_TypeNameRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_256;
        for (int i_257 = 1; i_257 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_257++) 
          e_l_256.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_257));
        if (succ_27 = 1 == (Int) e_l_256.Length()) 
          vdm_REP2TYPE_nm = (Record) e_l_256.Hd();
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_TypeName, length_AS_TypeName);
        varRes_4 = Record(varRes_4).SetField(1, vdm_REP2TYPE_nm);
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_NilTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_260;
        for (int i_261 = 1; i_261 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_261++) 
          e_l_260.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_261));
        succ_27 = 0 == (Int) e_l_260.Length();
      }
      else 
        succ_27 = false;
      if (succ_27) 
        varRes_4 = vdm_REP2TYPE_nilType;
    }
    if (!succ_27) {
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_EmptySetTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_262;
        for (int i_263 = 1; i_263 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_263++) 
          e_l_262.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_263));
        succ_27 = 0 == (Int) e_l_262.Length();
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_SetType, length_AS_SetType);
        varRes_4 = Record(varRes_4).SetField(1, vdm_REP2TYPE_bottom);
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_EmptySeqTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_266;
        for (int i_267 = 1; i_267 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_267++) 
          e_l_266.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_267));
        succ_27 = 0 == (Int) e_l_266.Length();
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_Seq0Type, length_AS_Seq0Type);
        varRes_4 = Record(varRes_4).SetField(1, vdm_REP2TYPE_bottom);
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) {
      succ_27 = true;
      if (vdm_REP2TYPE_tyrep.IsRecord() && vdm_REP_EmptyMapTypeRep == ((Record) vdm_REP2TYPE_tyrep).GetTag()) {
        Sequence e_l_270;
        for (int i_271 = 1; i_271 <= ((Record) vdm_REP2TYPE_tyrep).Length(); i_271++) 
          e_l_270.ImpAppend(((Record) vdm_REP2TYPE_tyrep).GetField(i_271));
        succ_27 = 0 == (Int) e_l_270.Length();
      }
      else 
        succ_27 = false;
      if (succ_27) {
        varRes_4 = Record(vdm_AS_GeneralMapType, length_AS_GeneralMapType);
        varRes_4 = Record(varRes_4).SetField(1, vdm_REP2TYPE_bottom);
        varRes_4 = Record(varRes_4).SetField(2, vdm_REP2TYPE_bottom);
        varRes_4 = Record(varRes_4).SetField(3, vdm_REP2TYPE_cid);
      }
    }
    if (!succ_27) 
      RunTime("Can not evaluate an undefined expression");
  }
  return (Generic) varRes_4;
}
#endif

#ifndef DEF_REP2TYPE_pre_TypeRepToType

Bool vdm_REP2TYPE_pre_TypeRepToType(const TYPE_REP_TypeRep &vdm_REP2TYPE_tyrep, const TYPE_CI_ContextId &vdm_REP2TYPE_cid) {
  Bool varRes_4;
  Bool unArg_5;
  if (vdm_REP2TYPE_tyrep.IsRecord()) 
    unArg_5 = vdm_REP_InvTypeRep == vdm_REP2TYPE_tyrep.GetTag();
  else 
    unArg_5 = false;
  varRes_4 = (Bool) !unArg_5.GetValue();
  return (Generic) varRes_4;
}
#endif

