//
// THIS FILE IS AUTOMATICALLY GENERATED!!
//
// Generated at Tue 02-Nov-99 by the VDM-SLtoC++ Code Generator
// (v3.3 - Mon 22-Mar-99)
//
// Supported compilers:
// 	egcs version 1.1 on SunOS4, SunOS5, Linux, HP-UX10
// 	VC++ version 6.0 on Windows95, Windows NT
//



#include "DEP_uANA.h"

void TYPE_DEP_uANA_Graph::Init(type_7AS_NameCS p1, type_7AS_NameC7AS_NameC2PS p2) {
  SetField(1, p1);
  SetField(2, p2);
}

type_7AS_NameCS TYPE_DEP_uANA_Graph::get_V() const { return (type_7AS_NameCS) GetField(1); }

void TYPE_DEP_uANA_Graph::set_V(const type_7AS_NameCS &p) { SetField(1, p); }

type_7AS_NameC7AS_NameC2PS TYPE_DEP_uANA_Graph::get_E() const { return (type_7AS_NameC7AS_NameC2PS) GetField(2); }

void TYPE_DEP_uANA_Graph::set_E(const type_7AS_NameC7AS_NameC2PS &p) { SetField(2, p); }

void TYPE_DEP_uANA_OrderedGraph::Init(TYPE_DEP_uANA_Graph p1, type_7AS_NameCL p2) {
  SetField(1, p1);
  SetField(2, p2);
}

TYPE_DEP_uANA_Graph TYPE_DEP_uANA_OrderedGraph::get_g() const { return (TYPE_DEP_uANA_Graph) GetField(1); }

void TYPE_DEP_uANA_OrderedGraph::set_g(const TYPE_DEP_uANA_Graph &p) { SetField(1, p); }

type_7AS_NameCL TYPE_DEP_uANA_OrderedGraph::get_order() const { return (type_7AS_NameCL) GetField(2); }

void TYPE_DEP_uANA_OrderedGraph::set_order(const type_7AS_NameCL &p) { SetField(2, p); }
static type_7AS_NameCLL vdm_DEP_uANA_ComputeOrdering(const TYPE_DEP_uANA_Graph &);
static type_7AS_NameCLL vdm_DEP_uANA_DFT(const TYPE_DEP_uANA_OrderedGraph &);
static type_7AS_NameCL vdm_DEP_uANA_DFT_uVertex(const TYPE_DEP_uANA_OrderedGraph &, const TYPE_DEP_uANA_Vertex &);
static Bool vdm_DEP_uANA_pre_DFT_uVertex(const TYPE_DEP_uANA_OrderedGraph &, const TYPE_DEP_uANA_Vertex &);
static TYPE_DEP_uANA_Graph vdm_DEP_uANA_MakeDependencyGraph(const type_7AS_NameCcLSM &);
static type_typevariableL vdm_DEP_uANA_SetToSeq(const type_typevariableS &);
static type_typevariableLL vdm_DEP_uANA_SetToSeqSeq(const type_typevariableS &);
static type_7AS_NameCL vdm_DEP_uANA_While_uSons(const type_7AS_NameCL &, const TYPE_DEP_uANA_OrderedGraph &);
static Bool vdm_DEP_uANA_pre_While_uSons(const type_7AS_NameCL &, const TYPE_DEP_uANA_OrderedGraph &);
#ifndef DEF_DEP_uANA_inv_Graph

Bool vdm_DEP_uANA_inv_Graph(const TYPE_DEP_uANA_Graph &var_1_1) {
  Set vdm_DEP_uANA_E;
  Set vdm_DEP_uANA_V;
  bool succ_2 = true;
  if (var_1_1.IsRecord() && vdm_DEP_uANA_Graph == var_1_1.GetTag()) {
    Sequence e_l_19;
    for (int i_20 = 1; i_20 <= var_1_1.Length(); i_20++) 
      e_l_19.ImpAppend(var_1_1.GetField(i_20));
    if (succ_2 = 2 == (Int) e_l_19.Length()) {
      vdm_DEP_uANA_V = (Set) e_l_19.Hd();
      vdm_DEP_uANA_E = (Set) e_l_19[2];
    }
  }
  else 
    succ_2 = false;
  if (!succ_2) 
    RunTime("Pattern Match in Function Apply in function : inv_Graph failed");
  Bool varRes_3;
  bool tmpQuant_4 = true;
  {
    bool succ_12 = true;

    Record vdm_DEP_uANA_v(vdm_AS_Name, length_AS_Name);    Record vdm_DEP_uANA_w(vdm_AS_Name, length_AS_Name);
    {
      Generic tmpe_18;
      for (int bb_17 = vdm_DEP_uANA_E.First(tmpe_18); bb_17 && tmpQuant_4; bb_17 = vdm_DEP_uANA_E.Next(tmpe_18)) {
        Tuple elem_14 = tmpe_18;
        succ_12 = true;        if (elem_14.IsTuple()) {
          Sequence e_l_15;
          for (int i_16 = 1; i_16 <= ((Tuple) elem_14).Length(); i_16++) 
            e_l_15.ImpAppend(((Tuple) elem_14).GetField(i_16));
          if (succ_12 = 2 == (Int) e_l_15.Length()) {
            succ_12 = true;
            vdm_DEP_uANA_v = (Record) e_l_15.Hd();
            if (succ_12) { vdm_DEP_uANA_w = (Record) e_l_15[2]; }
          }
        }
        else 
          succ_12 = false;        if (succ_12) {
          Bool pred_5;
          Bool var1_6;
          var1_6 = (Bool) vdm_DEP_uANA_V.InSet((Generic) vdm_DEP_uANA_v);
{ if ((pred_5 = var1_6).GetValue()) {
   Bool var2_9;
   var2_9 = (Bool) vdm_DEP_uANA_V.InSet((Generic) vdm_DEP_uANA_w);
   pred_5 = var2_9;
 } }
          if (pred_5.GetValue()) {}
          else 
            tmpQuant_4 = false;
        }
      }
    }
  }
  varRes_3 = (Bool) tmpQuant_4;
  return (Generic) varRes_3;
}
#endif

#ifndef DEF_DEP_uANA_inv_OrderedGraph

Bool vdm_DEP_uANA_inv_OrderedGraph(const TYPE_DEP_uANA_OrderedGraph &var_1_1) {
  Set vdm_DEP_uANA_E;
  Set vdm_DEP_uANA_V;
  Sequence vdm_DEP_uANA_order;
  bool succ_2 = true;
  if (var_1_1.IsRecord() && vdm_DEP_uANA_OrderedGraph == var_1_1.GetTag()) {
    Sequence e_l_13;
    for (int i_14 = 1; i_14 <= var_1_1.Length(); i_14++) 
      e_l_13.ImpAppend(var_1_1.GetField(i_14));
    if (succ_2 = 2 == (Int) e_l_13.Length()) {
      succ_2 = true;
      if (((Generic) e_l_13.Hd()).IsRecord() && vdm_DEP_uANA_Graph == ((Record) (Generic) e_l_13.Hd()).GetTag()) {
        Sequence e_l_15;
        for (int i_16 = 1; i_16 <= ((Record) (Generic) e_l_13.Hd()).Length(); i_16++) 
          e_l_15.ImpAppend(((Record) (Generic) e_l_13.Hd()).GetField(i_16));
        if (succ_2 = 2 == (Int) e_l_15.Length()) {
          vdm_DEP_uANA_V = (Set) e_l_15.Hd();
          vdm_DEP_uANA_E = (Set) e_l_15[2];
        }
      }
      else 
        succ_2 = false;
      if (succ_2) { vdm_DEP_uANA_order = (Generic) e_l_13[2]; }
    }
  }
  else 
    succ_2 = false;
  if (!succ_2) 
    RunTime("Pattern Match in Function Apply in function : inv_OrderedGraph failed");
  Bool varRes_3;
{ if ((varRes_3 = (Bool) (vdm_DEP_uANA_order.Elems() == vdm_DEP_uANA_V)).GetValue()) 
   varRes_3 = (Bool) ((Int) vdm_DEP_uANA_order.Length() == (Int) vdm_DEP_uANA_V.Card()); }
  return (Generic) varRes_3;
}
#endif


void init_DEP_uANA_VDMLib() {
  VDMGetDefaultRecInfoMap().NewTag(TAG_TYPE_DEP_uANA_Graph, 2);
  VDMGetDefaultRecInfoMap().SetSymTag(TAG_TYPE_DEP_uANA_Graph, "DEP_uANA`Graph");
  VDMGetDefaultRecInfoMap().NewTag(TAG_TYPE_DEP_uANA_OrderedGraph, 2);
  VDMGetDefaultRecInfoMap().SetSymTag(TAG_TYPE_DEP_uANA_OrderedGraph, "DEP_uANA`OrderedGraph");
  VDMGetDefaultRecInfoMap().NewTag(TOKEN, 1);
  VDMGetDefaultRecInfoMap().SetSymTag(TOKEN, "token");
}
#ifdef DEF_DEP_uANA_USERIMPL

#include "DEP_uANA_userimpl.cc"

#endif


void init_DEP_uANA() { init_DEP_uANA_VDMLib(); }
#ifndef DEF_DEP_uANA_ComputeOrdering

type_7AS_NameCLL vdm_DEP_uANA_ComputeOrdering(const TYPE_DEP_uANA_Graph &vdm_DEP_uANA_g) {
  Sequence varRes_3;
  {
    Sequence vdm_DEP_uANA_some_uorder;
    Set par_6;
    if (vdm_DEP_uANA_g.Is(vdm_DEP_uANA_Graph)) 
      par_6 = vdm_DEP_uANA_g.GetField(pos_DEP_uANA_Graph_V);
    else 
      RunTime("Unknown record field selector");
    vdm_DEP_uANA_some_uorder = vdm_DEP_uANA_SetToSeq((Generic) par_6);
    Sequence vdm_DEP_uANA_dft_uforward;
    Record par_9(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_9 = Record(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_9.SetField(1, vdm_DEP_uANA_g);
    par_9.SetField(2, vdm_DEP_uANA_some_uorder);
    vdm_DEP_uANA_dft_uforward = vdm_DEP_uANA_DFT((Generic) par_9);
    Sequence vdm_DEP_uANA_forward_uorder;
    Sequence rdcseq_14;
    Generic tmpe_17;
    for (int i_16 = vdm_DEP_uANA_dft_uforward.First(tmpe_17); i_16; i_16 = vdm_DEP_uANA_dft_uforward.Next(tmpe_17)) {
      Sequence e_15 = tmpe_17;
      rdcseq_14.ImpConc(e_15);
    }
    vdm_DEP_uANA_forward_uorder = rdcseq_14;
    Record vdm_DEP_uANA_inverted_ug(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
    vdm_DEP_uANA_inverted_ug = Record(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
    Set tmpVar_19;
    if (vdm_DEP_uANA_g.Is(vdm_DEP_uANA_Graph)) 
      tmpVar_19 = vdm_DEP_uANA_g.GetField(pos_DEP_uANA_Graph_V);
    else 
      RunTime("Unknown record field selector");
    vdm_DEP_uANA_inverted_ug.SetField(1, tmpVar_19);
    Set tmpVar_21;
    Set res_s_22;
    {
      bool succ_26 = true;
      Set e_set_27;      if (vdm_DEP_uANA_g.Is(vdm_DEP_uANA_Graph)) 
        e_set_27 = vdm_DEP_uANA_g.GetField(pos_DEP_uANA_Graph_E);
      else 
        RunTime("Unknown record field selector");
      Record vdm_DEP_uANA_v(vdm_AS_Name, length_AS_Name);      Record vdm_DEP_uANA_w(vdm_AS_Name, length_AS_Name);
      {
        Generic tmpe_33;
        for (int bb_32 = e_set_27.First(tmpe_33); bb_32; bb_32 = e_set_27.Next(tmpe_33)) {
          Tuple elem_29 = tmpe_33;
          succ_26 = true;          if (elem_29.IsTuple()) {
            Sequence e_l_30;
            for (int i_31 = 1; i_31 <= ((Tuple) elem_29).Length(); i_31++) 
              e_l_30.ImpAppend(((Tuple) elem_29).GetField(i_31));
            if (succ_26 = 2 == (Int) e_l_30.Length()) {
              succ_26 = true;
              vdm_DEP_uANA_v = (Record) e_l_30.Hd();
              if (succ_26) { vdm_DEP_uANA_w = (Record) e_l_30[2]; }
            }
          }
          else 
            succ_26 = false;          if (succ_26) {
            Tuple res_s_23(2);
            res_s_23 = Tuple(2);
            res_s_23.SetField(1, vdm_DEP_uANA_w);
            res_s_23.SetField(2, vdm_DEP_uANA_v);
            res_s_22.Insert(res_s_23);
          }
        }
      }
    }
    tmpVar_21 = res_s_22;
    vdm_DEP_uANA_inverted_ug.SetField(2, tmpVar_21);
    Sequence vdm_DEP_uANA_dft_ubackward;
    Record par_35(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_35 = Record(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_35.SetField(1, vdm_DEP_uANA_inverted_ug);
    par_35.SetField(2, vdm_DEP_uANA_forward_uorder);
    vdm_DEP_uANA_dft_ubackward = vdm_DEP_uANA_DFT((Generic) par_35);
    varRes_3 = vdm_DEP_uANA_dft_ubackward;
  }
  return (Generic) varRes_3;
}
#endif

#ifndef DEF_DEP_uANA_DFT

type_7AS_NameCLL vdm_DEP_uANA_DFT(const TYPE_DEP_uANA_OrderedGraph &var_1_1) {
  Record vdm_DEP_uANA_g(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
  Sequence vdm_DEP_uANA_order;
  bool succ_2 = true;
  if (var_1_1.IsRecord() && vdm_DEP_uANA_OrderedGraph == var_1_1.GetTag()) {
    Sequence e_l_72;
    for (int i_73 = 1; i_73 <= var_1_1.Length(); i_73++) 
      e_l_72.ImpAppend(var_1_1.GetField(i_73));
    if (succ_2 = 2 == (Int) e_l_72.Length()) {
      vdm_DEP_uANA_g = (Generic) e_l_72.Hd();
      vdm_DEP_uANA_order = (Generic) e_l_72[2];
    }
  }
  else 
    succ_2 = false;
  if (!succ_2) 
    RunTime("Pattern Match in Function Apply in function : DFT failed");
  Sequence varRes_3;
  if (((Bool) (vdm_DEP_uANA_order == Sequence())).GetValue()) 
    varRes_3 = Sequence();
  else {
    Record vdm_DEP_uANA_v = (Record) vdm_DEP_uANA_order.Hd();
    Sequence vdm_DEP_uANA_dft_uhead;
    Record par_12(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_12 = Record(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_12.SetField(1, vdm_DEP_uANA_g);
    par_12.SetField(2, vdm_DEP_uANA_order);
    vdm_DEP_uANA_dft_uhead = vdm_DEP_uANA_DFT_uVertex((Generic) par_12, (Generic) vdm_DEP_uANA_v);
    Set vdm_DEP_uANA_g_uV_utail;
    Set var1_17;
    if (vdm_DEP_uANA_g.Is(vdm_DEP_uANA_Graph)) 
      var1_17 = vdm_DEP_uANA_g.GetField(pos_DEP_uANA_Graph_V);
    else 
      RunTime("Unknown record field selector");
    vdm_DEP_uANA_g_uV_utail = var1_17;
    vdm_DEP_uANA_g_uV_utail.ImpDiff(vdm_DEP_uANA_dft_uhead.Elems());
    Set vdm_DEP_uANA_g_uE_utail;
    Set res_s_22;
    {
      bool succ_33 = true;
      Set e_set_34;      if (vdm_DEP_uANA_g.Is(vdm_DEP_uANA_Graph)) 
        e_set_34 = vdm_DEP_uANA_g.GetField(pos_DEP_uANA_Graph_E);
      else 
        RunTime("Unknown record field selector");
      Record vdm_DEP_uANA_v(vdm_AS_Name, length_AS_Name);      Record vdm_DEP_uANA_w(vdm_AS_Name, length_AS_Name);
      {
        Generic tmpe_40;
        for (int bb_39 = e_set_34.First(tmpe_40); bb_39; bb_39 = e_set_34.Next(tmpe_40)) {
          Tuple elem_36 = tmpe_40;
          succ_33 = true;          if (elem_36.IsTuple()) {
            Sequence e_l_37;
            for (int i_38 = 1; i_38 <= ((Tuple) elem_36).Length(); i_38++) 
              e_l_37.ImpAppend(((Tuple) elem_36).GetField(i_38));
            if (succ_33 = 2 == (Int) e_l_37.Length()) {
              succ_33 = true;
              vdm_DEP_uANA_v = (Record) e_l_37.Hd();
              if (succ_33) { vdm_DEP_uANA_w = (Record) e_l_37[2]; }
            }
          }
          else 
            succ_33 = false;          if (succ_33) {
            Bool pred_26;
            Bool var1_27;
            var1_27 = (Bool) vdm_DEP_uANA_g_uV_utail.InSet((Generic) vdm_DEP_uANA_v);
{ if ((pred_26 = var1_27).GetValue()) {
   Bool var2_30;
   var2_30 = (Bool) vdm_DEP_uANA_g_uV_utail.InSet((Generic) vdm_DEP_uANA_w);
   pred_26 = var2_30;
 } }
            if (pred_26.GetValue()) {
              Tuple res_s_23(2);
              res_s_23 = Tuple(2);
              res_s_23.SetField(1, vdm_DEP_uANA_v);
              res_s_23.SetField(2, vdm_DEP_uANA_w);
              res_s_22.Insert(res_s_23);
            }
          }
        }
      }
    }
    vdm_DEP_uANA_g_uE_utail = res_s_22;
    Record vdm_DEP_uANA_g_utail(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
    vdm_DEP_uANA_g_utail = Record(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
    vdm_DEP_uANA_g_utail.SetField(1, vdm_DEP_uANA_g_uV_utail);
    vdm_DEP_uANA_g_utail.SetField(2, vdm_DEP_uANA_g_uE_utail);
    Sequence vdm_DEP_uANA_tail_uorder;
    {
      Sequence res_l_45;
      Set resBind_s_47;
      Set riseq_51;
      int max_52 = (Int) vdm_DEP_uANA_order.Length();
      for (int i_53 = 1; i_53 <= max_52; i_53++) 
        riseq_51.Insert((Int) i_53);
      resBind_s_47 = riseq_51;
      Sequence bind_l_46;
      if ((Int) resBind_s_47.Card() != (Int) 0) 
        bind_l_46 = Sort(resBind_s_47);
      bool succ_48 = true;
      Int vdm_DEP_uANA_i;
      Generic tmpe_64;
      for (int i_63 = bind_l_46.First(tmpe_64); i_63; i_63 = bind_l_46.Next(tmpe_64)) {
        Int e_49 = tmpe_64;
        vdm_DEP_uANA_i = e_49;
        if (succ_48) {
          Bool pred_57;
          pred_57 = !(Bool) vdm_DEP_uANA_dft_uhead.Elems().InSet((Generic) (Record) vdm_DEP_uANA_order[vdm_DEP_uANA_i.GetValue()]);
          if (pred_57.GetValue()) 
            res_l_45.ImpAppend((Record) vdm_DEP_uANA_order[vdm_DEP_uANA_i.GetValue()]);
        }
      }
      vdm_DEP_uANA_tail_uorder = res_l_45;
    }
    Sequence vdm_DEP_uANA_dft_utail;
    Record par_66(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_66 = Record(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_66.SetField(1, vdm_DEP_uANA_g_utail);
    par_66.SetField(2, vdm_DEP_uANA_tail_uorder);
    vdm_DEP_uANA_dft_utail = vdm_DEP_uANA_DFT((Generic) par_66);
    Sequence var2_70;
    var2_70 = Sequence().ImpAppend(vdm_DEP_uANA_dft_uhead);
    varRes_3.ImpConc(vdm_DEP_uANA_dft_utail).ImpConc(var2_70);
  }
  return (Generic) varRes_3;
}
#endif

#ifndef DEF_DEP_uANA_DFT_uVertex

type_7AS_NameCL vdm_DEP_uANA_DFT_uVertex(const TYPE_DEP_uANA_OrderedGraph &var_1_1, const TYPE_DEP_uANA_Vertex &var_2_2) {
  Record vdm_DEP_uANA_g(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
  Sequence vdm_DEP_uANA_order;
  Record vdm_DEP_uANA_v(vdm_AS_Name, length_AS_Name);
  bool succ_3 = true;
  if (var_1_1.IsRecord() && vdm_DEP_uANA_OrderedGraph == var_1_1.GetTag()) {
    Sequence e_l_85;
    for (int i_86 = 1; i_86 <= var_1_1.Length(); i_86++) 
      e_l_85.ImpAppend(var_1_1.GetField(i_86));
    if (succ_3 = 2 == (Int) e_l_85.Length()) {
      vdm_DEP_uANA_g = (Generic) e_l_85.Hd();
      vdm_DEP_uANA_order = (Generic) e_l_85[2];
    }
  }
  else 
    succ_3 = false;
  vdm_DEP_uANA_v = var_2_2;
  if (!succ_3) 
    RunTime("Pattern Match in Function Apply in function : DFT_uVertex failed");
  Sequence varRes_4;
  {
    Sequence vdm_DEP_uANA_order_q;
    {
      Sequence res_l_7;
      Set resBind_s_9;
      Set riseq_13;
      int max_14 = (Int) vdm_DEP_uANA_order.Length();
      for (int i_15 = 1; i_15 <= max_14; i_15++) 
        riseq_13.Insert((Int) i_15);
      resBind_s_9 = riseq_13;
      Sequence bind_l_8;
      if ((Int) resBind_s_9.Card() != (Int) 0) 
        bind_l_8 = Sort(resBind_s_9);
      bool succ_10 = true;
      Int vdm_DEP_uANA_i;
      Generic tmpe_25;
      for (int i_24 = bind_l_8.First(tmpe_25); i_24; i_24 = bind_l_8.Next(tmpe_25)) {
        Int e_11 = tmpe_25;
        vdm_DEP_uANA_i = e_11;
        if (succ_10) 
          if (((Bool) !((Record) vdm_DEP_uANA_order[vdm_DEP_uANA_i.GetValue()] == vdm_DEP_uANA_v)).GetValue()) 
            res_l_7.ImpAppend((Record) vdm_DEP_uANA_order[vdm_DEP_uANA_i.GetValue()]);
      }
      vdm_DEP_uANA_order_q = res_l_7;
    }
    Sequence vdm_DEP_uANA_v_usucc;
    {
      Sequence res_l_27;
      Set resBind_s_29;
      Set riseq_33;
      int max_34 = (Int) vdm_DEP_uANA_order_q.Length();
      for (int i_35 = 1; i_35 <= max_34; i_35++) 
        riseq_33.Insert((Int) i_35);
      resBind_s_29 = riseq_33;
      Sequence bind_l_28;
      if ((Int) resBind_s_29.Card() != (Int) 0) 
        bind_l_28 = Sort(resBind_s_29);
      bool succ_30 = true;
      Int vdm_DEP_uANA_i;
      Generic tmpe_48;
      for (int i_47 = bind_l_28.First(tmpe_48); i_47; i_47 = bind_l_28.Next(tmpe_48)) {
        Int e_31 = tmpe_48;
        vdm_DEP_uANA_i = e_31;
        if (succ_30) {
          Bool pred_39;
          Tuple var1_40(2);
          var1_40 = Tuple(2);
          var1_40.SetField(1, vdm_DEP_uANA_v);
          var1_40.SetField(2, (Record) vdm_DEP_uANA_order_q[vdm_DEP_uANA_i.GetValue()]);
          Set var2_45;
          if (vdm_DEP_uANA_g.Is(vdm_DEP_uANA_Graph)) 
            var2_45 = vdm_DEP_uANA_g.GetField(pos_DEP_uANA_Graph_E);
          else 
            RunTime("Unknown record field selector");
          pred_39 = (Bool) var2_45.InSet((Generic) var1_40);
          if (pred_39.GetValue()) 
            res_l_27.ImpAppend((Record) vdm_DEP_uANA_order_q[vdm_DEP_uANA_i.GetValue()]);
        }
      }
      vdm_DEP_uANA_v_usucc = res_l_27;
    }
    Set vdm_DEP_uANA_g_uV_q;
    Set var1_50;
    if (vdm_DEP_uANA_g.Is(vdm_DEP_uANA_Graph)) 
      var1_50 = vdm_DEP_uANA_g.GetField(pos_DEP_uANA_Graph_V);
    else 
      RunTime("Unknown record field selector");
    Set var2_52;
    var2_52 = Set().Insert(vdm_DEP_uANA_v);
    vdm_DEP_uANA_g_uV_q = var1_50;
    vdm_DEP_uANA_g_uV_q.ImpDiff(var2_52);
    Set vdm_DEP_uANA_g_uE_q;
    Set res_s_55;
    {
      bool succ_66 = true;
      Set e_set_67;      if (vdm_DEP_uANA_g.Is(vdm_DEP_uANA_Graph)) 
        e_set_67 = vdm_DEP_uANA_g.GetField(pos_DEP_uANA_Graph_E);
      else 
        RunTime("Unknown record field selector");
      Record vdm_DEP_uANA_u(vdm_AS_Name, length_AS_Name);      Record vdm_DEP_uANA_w(vdm_AS_Name, length_AS_Name);
      {
        Generic tmpe_73;
        for (int bb_72 = e_set_67.First(tmpe_73); bb_72; bb_72 = e_set_67.Next(tmpe_73)) {
          Tuple elem_69 = tmpe_73;
          succ_66 = true;          if (elem_69.IsTuple()) {
            Sequence e_l_70;
            for (int i_71 = 1; i_71 <= ((Tuple) elem_69).Length(); i_71++) 
              e_l_70.ImpAppend(((Tuple) elem_69).GetField(i_71));
            if (succ_66 = 2 == (Int) e_l_70.Length()) {
              succ_66 = true;
              vdm_DEP_uANA_w = (Record) e_l_70.Hd();
              if (succ_66) { vdm_DEP_uANA_u = (Record) e_l_70[2]; }
            }
          }
          else 
            succ_66 = false;          if (succ_66) {
            Bool pred_59;
            Bool var1_60;
            var1_60 = (Bool) vdm_DEP_uANA_g_uV_q.InSet((Generic) vdm_DEP_uANA_w);
{ if ((pred_59 = var1_60).GetValue()) {
   Bool var2_63;
   var2_63 = (Bool) vdm_DEP_uANA_g_uV_q.InSet((Generic) vdm_DEP_uANA_u);
   pred_59 = var2_63;
 } }
            if (pred_59.GetValue()) {
              Tuple res_s_56(2);
              res_s_56 = Tuple(2);
              res_s_56.SetField(1, vdm_DEP_uANA_w);
              res_s_56.SetField(2, vdm_DEP_uANA_u);
              res_s_55.Insert(res_s_56);
            }
          }
        }
      }
    }
    vdm_DEP_uANA_g_uE_q = res_s_55;
    Record vdm_DEP_uANA_g_q(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
    vdm_DEP_uANA_g_q = Record(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
    vdm_DEP_uANA_g_q.SetField(1, vdm_DEP_uANA_g_uV_q);
    vdm_DEP_uANA_g_q.SetField(2, vdm_DEP_uANA_g_uE_q);
    Sequence vdm_DEP_uANA_dft_usons;
    Record par_79(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_79 = Record(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_79.SetField(1, vdm_DEP_uANA_g_q);
    par_79.SetField(2, vdm_DEP_uANA_order_q);
    vdm_DEP_uANA_dft_usons = vdm_DEP_uANA_While_uSons((Generic) vdm_DEP_uANA_v_usucc, (Generic) par_79);
    Sequence var1_82;
    var1_82 = Sequence().ImpAppend(vdm_DEP_uANA_v);
    varRes_4.ImpConc(var1_82).ImpConc(vdm_DEP_uANA_dft_usons);
  }
  return (Generic) varRes_4;
}
#endif

#ifndef DEF_DEP_uANA_pre_DFT_uVertex

Bool vdm_DEP_uANA_pre_DFT_uVertex(const TYPE_DEP_uANA_OrderedGraph &var_1_1, const TYPE_DEP_uANA_Vertex &var_2_2) {
  Record vdm_DEP_uANA_g(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
  Sequence vdm_DEP_uANA_order;
  Record vdm_DEP_uANA_v(vdm_AS_Name, length_AS_Name);
  bool succ_3 = true;
  if (var_1_1.IsRecord() && vdm_DEP_uANA_OrderedGraph == var_1_1.GetTag()) {
    Sequence e_l_8;
    for (int i_9 = 1; i_9 <= var_1_1.Length(); i_9++) 
      e_l_8.ImpAppend(var_1_1.GetField(i_9));
    if (succ_3 = 2 == (Int) e_l_8.Length()) {
      vdm_DEP_uANA_g = (Generic) e_l_8.Hd();
      vdm_DEP_uANA_order = (Generic) e_l_8[2];
    }
  }
  else 
    succ_3 = false;
  vdm_DEP_uANA_v = var_2_2;
  if (!succ_3) 
    RunTime("Pattern Match in Function Apply in function : pre_DFT_uVertex failed");
  Bool varRes_4;
  varRes_4 = (Bool) vdm_DEP_uANA_order.Elems().InSet((Generic) vdm_DEP_uANA_v);
  return (Generic) varRes_4;
}
#endif

#ifndef DEF_DEP_uANA_DependencyAnalysis

type_7AS_NameCLL vdm_DEP_uANA_DependencyAnalysis(const type_7AS_NameCcLSM &vdm_DEP_uANA_depMap) {
  Sequence varRes_3;
  {
    Record vdm_DEP_uANA_depGraph = vdm_DEP_uANA_MakeDependencyGraph((Generic) vdm_DEP_uANA_depMap);
    Sequence vdm_DEP_uANA_depOrd = vdm_DEP_uANA_ComputeOrdering((Generic) vdm_DEP_uANA_depGraph);
    varRes_3 = vdm_DEP_uANA_depOrd;
  }
  return (Generic) varRes_3;
}
#endif

#ifndef DEF_DEP_uANA_MakeDependencyGraph

TYPE_DEP_uANA_Graph vdm_DEP_uANA_MakeDependencyGraph(const type_7AS_NameCcLSM &vdm_DEP_uANA_mdef) {
  Record varRes_3(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
  {
    Set vdm_DEP_uANA_V = vdm_DEP_uANA_mdef.Dom();
    Set vdm_DEP_uANA_E;
    Set unArg_8;
    Set res_s_9;
    {
      bool succ_26 = true;
      Set e1_set_29 = vdm_DEP_uANA_mdef.Dom();
      Record vdm_DEP_uANA_nm(vdm_AS_Name, length_AS_Name);
      {
        Generic tmpe_32;
        for (int bb_31 = e1_set_29.First(tmpe_32); bb_31; bb_31 = e1_set_29.Next(tmpe_32)) {
          Record elem_30 = tmpe_32;
          succ_26 = true;          vdm_DEP_uANA_nm = elem_30;          if (succ_26) {
            Set res_s_10;
            Set res_s_11;
            {
              bool succ_18 = true;
              Set e1_set_22 = (Set) vdm_DEP_uANA_mdef[(Generic) vdm_DEP_uANA_nm];
              Sequence vdm_DEP_uANA_depend;
              {
                Generic tmpe_25;
                for (int bb_24 = e1_set_22.First(tmpe_25); bb_24; bb_24 = e1_set_22.Next(tmpe_25)) {
                  Sequence elem_23 = tmpe_25;
                  succ_18 = true;                  vdm_DEP_uANA_depend = elem_23;                  if (succ_18) {
                    Tuple res_s_12(2);
                    res_s_12 = Tuple(2);
                    res_s_12.SetField(1, vdm_DEP_uANA_nm);
                    Record tmpVar_14(vdm_AS_Name, length_AS_Name);
                    tmpVar_14 = Record(vdm_AS_Name, length_AS_Name);
                    Sequence tmpVar_15;
                    tmpVar_15 = Sequence().ImpAppend(vdm_DEP_uANA_depend);
                    tmpVar_14.SetField(1, tmpVar_15);
                    tmpVar_14.SetField(2, vdm_CI_NilContextId);
                    res_s_12.SetField(2, tmpVar_14);
                    res_s_11.Insert(res_s_12);
                  }
                }
              }
            }
            res_s_10 = res_s_11;
            res_s_9.Insert(res_s_10);
          }
        }
      }
    }
    unArg_8 = res_s_9;
    Set rduset_33;    Generic tmpe_36;    for (int bb_35 = unArg_8.First(tmpe_36); bb_35; bb_35 = unArg_8.Next(tmpe_36)) {
      Set e_34 = tmpe_36;
      rduset_33.ImpUnion(e_34);
    }    vdm_DEP_uANA_E = rduset_33;
    varRes_3 = Record(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
    varRes_3.SetField(1, vdm_DEP_uANA_V);
    varRes_3.SetField(2, vdm_DEP_uANA_E);
  }
  return (Generic) varRes_3;
}
#endif

#ifndef DEF_DEP_uANA_SetToSeq

type_typevariableL vdm_DEP_uANA_SetToSeq(const type_typevariableS &vdm_DEP_uANA_s) {
  Sequence varRes_3;
  if (((Bool) (vdm_DEP_uANA_s == Set())).GetValue()) 
    varRes_3 = Sequence();
  else {
    Set tmpSet_8;
    tmpSet_8 = vdm_DEP_uANA_s;
    Generic vdm_DEP_uANA_x;
    bool succ_10 = false;
    Generic tmpe_13;
    for (int bb_12 = tmpSet_8.First(tmpe_13); bb_12 && !succ_10; bb_12 = tmpSet_8.Next(tmpe_13)) {
      Generic tmpElem_11 = tmpe_13;
      succ_10 = true;      vdm_DEP_uANA_x = tmpElem_11;
    }
    if (!succ_10) 
      RunTime("The binding environment was empty");
    Sequence var1_14;
    Set par_15;
    Set var2_17;
    var2_17 = Set().Insert(vdm_DEP_uANA_x);
    par_15 = vdm_DEP_uANA_s;
    par_15.ImpDiff(var2_17);
    var1_14 = vdm_DEP_uANA_SetToSeq((Generic) par_15);
    Sequence var2_19;
    var2_19 = Sequence().ImpAppend(vdm_DEP_uANA_x);
    varRes_3.ImpConc(var1_14).ImpConc(var2_19);
  }
  return (Generic) varRes_3;
}
#endif

#ifndef DEF_DEP_uANA_SetToSeqSeq

type_typevariableLL vdm_DEP_uANA_SetToSeqSeq(const type_typevariableS &vdm_DEP_uANA_s) {
  Sequence varRes_3;
  if (((Bool) (vdm_DEP_uANA_s == Set())).GetValue()) 
    varRes_3 = Sequence();
  else {
    Set tmpSet_8;
    tmpSet_8 = vdm_DEP_uANA_s;
    Generic vdm_DEP_uANA_x;
    bool succ_10 = false;
    Generic tmpe_13;
    for (int bb_12 = tmpSet_8.First(tmpe_13); bb_12 && !succ_10; bb_12 = tmpSet_8.Next(tmpe_13)) {
      Generic tmpElem_11 = tmpe_13;
      succ_10 = true;      vdm_DEP_uANA_x = tmpElem_11;
    }
    if (!succ_10) 
      RunTime("The binding environment was empty");
    Sequence var1_14;
    Set par_15;
    Set var2_17;
    var2_17 = Set().Insert(vdm_DEP_uANA_x);
    par_15 = vdm_DEP_uANA_s;
    par_15.ImpDiff(var2_17);
    var1_14 = vdm_DEP_uANA_SetToSeqSeq((Generic) par_15);
    Sequence var2_19;
    Sequence e_seq_20;
    e_seq_20 = Sequence().ImpAppend(vdm_DEP_uANA_x);
    var2_19 = Sequence().ImpAppend(e_seq_20);
    varRes_3.ImpConc(var1_14).ImpConc(var2_19);
  }
  return (Generic) varRes_3;
}
#endif

#ifndef DEF_DEP_uANA_While_uSons

type_7AS_NameCL vdm_DEP_uANA_While_uSons(const type_7AS_NameCL &var_1_1, const TYPE_DEP_uANA_OrderedGraph &var_2_2) {
  Record vdm_DEP_uANA_g(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
  Sequence vdm_DEP_uANA_order;
  Sequence vdm_DEP_uANA_sons;
  bool succ_3 = true;
  vdm_DEP_uANA_sons = var_1_1;
  if (var_2_2.IsRecord() && vdm_DEP_uANA_OrderedGraph == var_2_2.GetTag()) {
    Sequence e_l_95;
    for (int i_96 = 1; i_96 <= var_2_2.Length(); i_96++) 
      e_l_95.ImpAppend(var_2_2.GetField(i_96));
    if (succ_3 = 2 == (Int) e_l_95.Length()) {
      vdm_DEP_uANA_g = (Generic) e_l_95.Hd();
      vdm_DEP_uANA_order = (Generic) e_l_95[2];
    }
  }
  else 
    succ_3 = false;
  if (!succ_3) 
    RunTime("Pattern Match in Function Apply in function : While_uSons failed");
  Sequence varRes_4;
  if (((Bool) (vdm_DEP_uANA_sons == Sequence())).GetValue()) 
    varRes_4 = Sequence();
  else {
    Record vdm_DEP_uANA_w = (Record) vdm_DEP_uANA_sons.Hd();
    Sequence vdm_DEP_uANA_sons_q = vdm_DEP_uANA_sons.Tl();
    Sequence vdm_DEP_uANA_w_udft;
    Record par_15(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_15 = Record(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_15.SetField(1, vdm_DEP_uANA_g);
    par_15.SetField(2, vdm_DEP_uANA_order);
    vdm_DEP_uANA_w_udft = vdm_DEP_uANA_DFT_uVertex((Generic) par_15, (Generic) vdm_DEP_uANA_w);
    Set vdm_DEP_uANA_g_uV_q;
    Set var1_20;
    if (vdm_DEP_uANA_g.Is(vdm_DEP_uANA_Graph)) 
      var1_20 = vdm_DEP_uANA_g.GetField(pos_DEP_uANA_Graph_V);
    else 
      RunTime("Unknown record field selector");
    vdm_DEP_uANA_g_uV_q = var1_20;
    vdm_DEP_uANA_g_uV_q.ImpDiff(vdm_DEP_uANA_w_udft.Elems());
    Set vdm_DEP_uANA_g_uE_q;
    Set res_s_25;
    {
      bool succ_36 = true;
      Set e_set_37;      if (vdm_DEP_uANA_g.Is(vdm_DEP_uANA_Graph)) 
        e_set_37 = vdm_DEP_uANA_g.GetField(pos_DEP_uANA_Graph_E);
      else 
        RunTime("Unknown record field selector");
      Record vdm_DEP_uANA_s(vdm_AS_Name, length_AS_Name);      Record vdm_DEP_uANA_t(vdm_AS_Name, length_AS_Name);
      {
        Generic tmpe_43;
        for (int bb_42 = e_set_37.First(tmpe_43); bb_42; bb_42 = e_set_37.Next(tmpe_43)) {
          Tuple elem_39 = tmpe_43;
          succ_36 = true;          if (elem_39.IsTuple()) {
            Sequence e_l_40;
            for (int i_41 = 1; i_41 <= ((Tuple) elem_39).Length(); i_41++) 
              e_l_40.ImpAppend(((Tuple) elem_39).GetField(i_41));
            if (succ_36 = 2 == (Int) e_l_40.Length()) {
              succ_36 = true;
              vdm_DEP_uANA_s = (Record) e_l_40.Hd();
              if (succ_36) { vdm_DEP_uANA_t = (Record) e_l_40[2]; }
            }
          }
          else 
            succ_36 = false;          if (succ_36) {
            Bool pred_29;
            Bool var1_30;
            var1_30 = (Bool) vdm_DEP_uANA_g_uV_q.InSet((Generic) vdm_DEP_uANA_s);
{ if ((pred_29 = var1_30).GetValue()) {
   Bool var2_33;
   var2_33 = (Bool) vdm_DEP_uANA_g_uV_q.InSet((Generic) vdm_DEP_uANA_t);
   pred_29 = var2_33;
 } }
            if (pred_29.GetValue()) {
              Tuple res_s_26(2);
              res_s_26 = Tuple(2);
              res_s_26.SetField(1, vdm_DEP_uANA_s);
              res_s_26.SetField(2, vdm_DEP_uANA_t);
              res_s_25.Insert(res_s_26);
            }
          }
        }
      }
    }
    vdm_DEP_uANA_g_uE_q = res_s_25;
    Record vdm_DEP_uANA_g_q(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
    vdm_DEP_uANA_g_q = Record(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
    vdm_DEP_uANA_g_q.SetField(1, vdm_DEP_uANA_g_uV_q);
    vdm_DEP_uANA_g_q.SetField(2, vdm_DEP_uANA_g_uE_q);
    Sequence vdm_DEP_uANA_sons_q_q;
    {
      Sequence res_l_48;
      Set resBind_s_50;
      Set riseq_54;
      int max_55 = (Int) vdm_DEP_uANA_sons_q.Length();
      for (int i_56 = 1; i_56 <= max_55; i_56++) 
        riseq_54.Insert((Int) i_56);
      resBind_s_50 = riseq_54;
      Sequence bind_l_49;
      if ((Int) resBind_s_50.Card() != (Int) 0) 
        bind_l_49 = Sort(resBind_s_50);
      bool succ_51 = true;
      Int vdm_DEP_uANA_i;
      Generic tmpe_67;
      for (int i_66 = bind_l_49.First(tmpe_67); i_66; i_66 = bind_l_49.Next(tmpe_67)) {
        Int e_52 = tmpe_67;
        vdm_DEP_uANA_i = e_52;
        if (succ_51) {
          Bool pred_60;
          pred_60 = !(Bool) vdm_DEP_uANA_w_udft.Elems().InSet((Generic) (Record) vdm_DEP_uANA_sons_q[vdm_DEP_uANA_i.GetValue()]);
          if (pred_60.GetValue()) 
            res_l_48.ImpAppend((Record) vdm_DEP_uANA_sons_q[vdm_DEP_uANA_i.GetValue()]);
        }
      }
      vdm_DEP_uANA_sons_q_q = res_l_48;
    }
    Sequence vdm_DEP_uANA_order_q;
    {
      Sequence res_l_69;
      Set resBind_s_71;
      Set riseq_75;
      int max_76 = (Int) vdm_DEP_uANA_order.Length();
      for (int i_77 = 1; i_77 <= max_76; i_77++) 
        riseq_75.Insert((Int) i_77);
      resBind_s_71 = riseq_75;
      Sequence bind_l_70;
      if ((Int) resBind_s_71.Card() != (Int) 0) 
        bind_l_70 = Sort(resBind_s_71);
      bool succ_72 = true;
      Int vdm_DEP_uANA_i;
      Generic tmpe_88;
      for (int i_87 = bind_l_70.First(tmpe_88); i_87; i_87 = bind_l_70.Next(tmpe_88)) {
        Int e_73 = tmpe_88;
        vdm_DEP_uANA_i = e_73;
        if (succ_72) {
          Bool pred_81;
          pred_81 = !(Bool) vdm_DEP_uANA_w_udft.Elems().InSet((Generic) (Record) vdm_DEP_uANA_order[vdm_DEP_uANA_i.GetValue()]);
          if (pred_81.GetValue()) 
            res_l_69.ImpAppend((Record) vdm_DEP_uANA_order[vdm_DEP_uANA_i.GetValue()]);
        }
      }
      vdm_DEP_uANA_order_q = res_l_69;
    }
    Sequence var1_89;
    Record par_91(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_91 = Record(vdm_DEP_uANA_OrderedGraph, length_DEP_uANA_OrderedGraph);
    par_91.SetField(1, vdm_DEP_uANA_g_q);
    par_91.SetField(2, vdm_DEP_uANA_order_q);
    var1_89 = vdm_DEP_uANA_While_uSons((Generic) vdm_DEP_uANA_sons_q_q, (Generic) par_91);
    varRes_4.ImpConc(var1_89).ImpConc(vdm_DEP_uANA_w_udft);
  }
  return (Generic) varRes_4;
}
#endif

#ifndef DEF_DEP_uANA_pre_While_uSons

Bool vdm_DEP_uANA_pre_While_uSons(const type_7AS_NameCL &var_1_1, const TYPE_DEP_uANA_OrderedGraph &var_2_2) {
  Record vdm_DEP_uANA_g(vdm_DEP_uANA_Graph, length_DEP_uANA_Graph);
  Sequence vdm_DEP_uANA_order;
  Sequence vdm_DEP_uANA_sons;
  bool succ_3 = true;
  vdm_DEP_uANA_sons = var_1_1;
  if (var_2_2.IsRecord() && vdm_DEP_uANA_OrderedGraph == var_2_2.GetTag()) {
    Sequence e_l_17;
    for (int i_18 = 1; i_18 <= var_2_2.Length(); i_18++) 
      e_l_17.ImpAppend(var_2_2.GetField(i_18));
    if (succ_3 = 2 == (Int) e_l_17.Length()) {
      vdm_DEP_uANA_g = (Generic) e_l_17.Hd();
      vdm_DEP_uANA_order = (Generic) e_l_17[2];
    }
  }
  else 
    succ_3 = false;
  if (!succ_3) 
    RunTime("Pattern Match in Function Apply in function : pre_While_uSons failed");
  Bool varRes_4;
  if (((Bool) !(vdm_DEP_uANA_sons == Sequence())).GetValue()) {
    Bool var2_8;
{ if ((var2_8 = (Bool) !(vdm_DEP_uANA_order == Sequence())).GetValue()) 
   var2_8 = (Bool) ((Record) vdm_DEP_uANA_sons.Hd() == (Record) vdm_DEP_uANA_order.Hd()); }
    varRes_4 = var2_8;
  }
  else 
    varRes_4 = (Bool) true;
  return (Generic) varRes_4;
}
#endif

