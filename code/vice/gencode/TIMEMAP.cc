//
// THIS FILE IS AUTOMATICALLY GENERATED!!
//
// Generated at Tue 21-Dec-99 by the VDM-SLtoC++ Code Generator
// (v3.3 - Thu 06-May-99)
//
// Supported compilers:
// 	egcs version 1.1 on SunOS4, SunOS5, Linux, HP-UX10
// 	VC++ version 6.0 on Windows95, Windows NT
//



#include "TIMEMAP.h"
Int vdm_TIMEMAP_defaultDuration;

TYPE_TIMEMAP_Error &TYPE_TIMEMAP_Error::Init(TYPE_TIMEPARSER_TimeEntry p1, type_FS p2) {
  SetField(1, p1);
  SetField(2, p2);
  return * this;
}

TYPE_TIMEPARSER_TimeEntry TYPE_TIMEMAP_Error::get_entry() const { return (TYPE_TIMEPARSER_TimeEntry) GetField(1); }

void TYPE_TIMEMAP_Error::set_entry(const TYPE_TIMEPARSER_TimeEntry &p) { SetField(1, p); }

type_FS TYPE_TIMEMAP_Error::get_reps() const { return (type_FS) GetField(2); }

void TYPE_TIMEMAP_Error::set_reps(const type_FS &p) { SetField(2, p); }

void init_TIMEMAP_VDMLib() {
  VDMGetDefaultRecInfoMap().NewTag(TAG_TYPE_TIMEMAP_Error, 2);
  VDMGetDefaultRecInfoMap().SetSymTag(TAG_TYPE_TIMEMAP_Error, L"TIMEMAP`Error");
  VDMGetDefaultRecInfoMap().NewTag(TOKEN, 1);
  VDMGetDefaultRecInfoMap().SetSymTag(TOKEN, L"token");
}
#ifdef DEF_TIMEMAP_USERIMPL

#include "TIMEMAP_userimpl.cc"

#endif


void init_TIMEMAP() {
  Int tmpVal_1;
  tmpVal_1 = (Int) 2;
  vdm_TIMEMAP_defaultDuration = tmpVal_1;
  init_TIMEMAP_VDMLib();
}
#ifndef DEF_TIMEMAP_MkTimeMap

TYPE_TIMEMAP_Timemap vdm_TIMEMAP_MkTimeMap(const TYPE_TIMEPARSER_Timefile &vdm_TIMEMAP_tf) {
  Map varRes_3;
  Map modmap_4;
  Map res_m_7;
  {
    bool succ_21 = true;
    Set e1_set_24 = vdm_TIMEMAP_tf.Elems();
    Record vdm_TIMEMAP_entry;
    {
      Generic tmpe_27;
      for (int bb_26 = e1_set_24.First(tmpe_27); bb_26; bb_26 = e1_set_24.Next(tmpe_27)) {
        Record elem_25 = tmpe_27;
        succ_21 = true;        vdm_TIMEMAP_entry = elem_25;        if (succ_21) {
          Tuple md_8;
          Bool cond_10;
          if (vdm_TIMEMAP_entry.IsRecord()) 
            cond_10 = vdm_TIMEPARSER_SimpleEntry == vdm_TIMEMAP_entry.GetTag();
          else 
            cond_10 = false;
          if (cond_10.GetValue()) {
            md_8 = Tuple(2);
            Record tmpVar_16;
            if (((Record) vdm_TIMEMAP_entry).Is(vdm_TIMEPARSER_TypedEntry)) 
              tmpVar_16 = ((Record) vdm_TIMEMAP_entry).GetField(pos_TIMEPARSER_TypedEntry_instr);
            else 
              if (((Record) vdm_TIMEMAP_entry).Is(vdm_TIMEPARSER_SimpleEntry)) 
                tmpVar_16 = ((Record) vdm_TIMEMAP_entry).GetField(pos_TIMEPARSER_SimpleEntry_instr);
              else 
                RunTime(L"Unknown record field selector");
            md_8.SetField(1, tmpVar_16);
            md_8.SetField(2, Nil());
          }
          else {
            md_8 = Tuple(2);
            Record tmpVar_12;
            if (((Record) vdm_TIMEMAP_entry).Is(vdm_TIMEPARSER_TypedEntry)) 
              tmpVar_12 = ((Record) vdm_TIMEMAP_entry).GetField(pos_TIMEPARSER_TypedEntry_instr);
            else 
              if (((Record) vdm_TIMEMAP_entry).Is(vdm_TIMEPARSER_SimpleEntry)) 
                tmpVar_12 = ((Record) vdm_TIMEMAP_entry).GetField(pos_TIMEPARSER_SimpleEntry_instr);
              else 
                RunTime(L"Unknown record field selector");
            md_8.SetField(1, tmpVar_12);
            Generic tmpVar_14;
            if (((Record) vdm_TIMEMAP_entry).Is(vdm_TIMEPARSER_TypedEntry)) 
              tmpVar_14 = ((Record) vdm_TIMEMAP_entry).GetField(pos_TIMEPARSER_TypedEntry_tp);
            else 
              RunTime(L"Unknown record field selector");
            md_8.SetField(2, tmpVar_14);
          }
          Int mr_19;
          if (((Record) vdm_TIMEMAP_entry).Is(vdm_TIMEPARSER_TypedEntry)) 
            mr_19 = ((Record) vdm_TIMEMAP_entry).GetField(pos_TIMEPARSER_TypedEntry_time);
          else 
            if (((Record) vdm_TIMEMAP_entry).Is(vdm_TIMEPARSER_SimpleEntry)) 
              mr_19 = ((Record) vdm_TIMEMAP_entry).GetField(pos_TIMEPARSER_SimpleEntry_time);
            else 
              RunTime(L"Unknown record field selector");
          res_m_7.Insert(md_8, mr_19);
        }
      }
    }
  }
  modmap_4 = res_m_7;
  varRes_3 = vdm_TIMEMAP_defaultTimemap();  varRes_3.ImpOverride(modmap_4);
  return (Generic) varRes_3;
}
#endif

#ifndef DEF_TIMEMAP_pre_MkTimeMap

Bool vdm_TIMEMAP_pre_MkTimeMap(const TYPE_TIMEPARSER_Timefile &vdm_TIMEMAP_tf) { return (Generic) (Bool) (vdm_TIMEMAP_wf_uTimefile((Generic) vdm_TIMEMAP_tf) == Set()); }
#endif

#ifndef DEF_TIMEMAP_defaultTimemap

TYPE_TIMEMAP_Timemap vdm_TIMEMAP_defaultTimemap() {
  Map varRes_2;
  Tuple tmpVar1_3(2);
  tmpVar1_3 = Tuple(2);
  tmpVar1_3.SetField(1, Record(vdm_TIMEPARSER_AddEnv, length_TIMEPARSER_AddEnv));
  tmpVar1_3.SetField(2, Nil());
  varRes_2 = Map().Insert(tmpVar1_3, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_7(2);
  tmpVar1_7 = Tuple(2);
  tmpVar1_7.SetField(1, Record(vdm_TIMEPARSER_Addset, length_TIMEPARSER_Addset));
  tmpVar1_7.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_7, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_11(2);
  tmpVar1_11 = Tuple(2);
  tmpVar1_11.SetField(1, Record(vdm_TIMEPARSER_AllorExists, length_TIMEPARSER_AllorExists));
  tmpVar1_11.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_11, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_15(2);
  tmpVar1_15 = Tuple(2);
  tmpVar1_15.SetField(1, Record(vdm_TIMEPARSER_Always, length_TIMEPARSER_Always));
  tmpVar1_15.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_15, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_19(2);
  tmpVar1_19 = Tuple(2);
  tmpVar1_19.SetField(1, Record(vdm_TIMEPARSER_Appendmap, length_TIMEPARSER_Appendmap));
  tmpVar1_19.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_19, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_23(2);
  tmpVar1_23 = Tuple(2);
  tmpVar1_23.SetField(1, Record(vdm_TIMEPARSER_Appendseq, length_TIMEPARSER_Appendseq));
  tmpVar1_23.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_23, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_27(2);
  tmpVar1_27 = Tuple(2);
  tmpVar1_27.SetField(1, Record(vdm_TIMEPARSER_Appendtup, length_TIMEPARSER_Appendtup));
  tmpVar1_27.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_27, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_31(2);
  tmpVar1_31 = Tuple(2);
  tmpVar1_31.SetField(1, Record(vdm_TIMEPARSER_Apply, length_TIMEPARSER_Apply));
  tmpVar1_31.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_31, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_35(2);
  tmpVar1_35 = Tuple(2);
  tmpVar1_35.SetField(1, Record(vdm_TIMEPARSER_BindList, length_TIMEPARSER_BindList));
  tmpVar1_35.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_35, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_39(2);
  tmpVar1_39 = Tuple(2);
  tmpVar1_39.SetField(1, Record(vdm_TIMEPARSER_BlockStmt, length_TIMEPARSER_BlockStmt));
  tmpVar1_39.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_39, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_43(2);
  tmpVar1_43 = Tuple(2);
  tmpVar1_43.SetField(1, Record(vdm_TIMEPARSER_Br, length_TIMEPARSER_Br));
  tmpVar1_43.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_43, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_47(2);
  tmpVar1_47 = Tuple(2);
  tmpVar1_47.SetField(1, Record(vdm_TIMEPARSER_Call, length_TIMEPARSER_Call));
  tmpVar1_47.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_47, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_51(2);
  tmpVar1_51 = Tuple(2);
  tmpVar1_51.SetField(1, Record(vdm_TIMEPARSER_Cbr, length_TIMEPARSER_Cbr));
  tmpVar1_51.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_51, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_55(2);
  tmpVar1_55 = Tuple(2);
  tmpVar1_55.SetField(1, Record(vdm_TIMEPARSER_Exit, length_TIMEPARSER_Exit));
  tmpVar1_55.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_55, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_59(2);
  tmpVar1_59 = Tuple(2);
  tmpVar1_59.SetField(1, Record(vdm_TIMEPARSER_Fieldsel, length_TIMEPARSER_Fieldsel));
  tmpVar1_59.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_59, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_63(2);
  tmpVar1_63 = Tuple(2);
  tmpVar1_63.SetField(1, Record(vdm_TIMEPARSER_Guard, length_TIMEPARSER_Guard));
  tmpVar1_63.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_63, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_67(2);
  tmpVar1_67 = Tuple(2);
  tmpVar1_67.SetField(1, Record(vdm_TIMEPARSER_History, length_TIMEPARSER_History));
  tmpVar1_67.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_67, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_71(2);
  tmpVar1_71 = Tuple(2);
  tmpVar1_71.SetField(1, Record(vdm_TIMEPARSER_Iota, length_TIMEPARSER_Iota));
  tmpVar1_71.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_71, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_75(2);
  tmpVar1_75 = Tuple(2);
  tmpVar1_75.SetField(1, Record(vdm_TIMEPARSER_Isexpr, length_TIMEPARSER_Isexpr));
  tmpVar1_75.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_75, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_79(2);
  tmpVar1_79 = Tuple(2);
  tmpVar1_79.SetField(1, Record(vdm_TIMEPARSER_Isofbaseclass, length_TIMEPARSER_Isofbaseclass));
  tmpVar1_79.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_79, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_83(2);
  tmpVar1_83 = Tuple(2);
  tmpVar1_83.SetField(1, Record(vdm_TIMEPARSER_Isofclass, length_TIMEPARSER_Isofclass));
  tmpVar1_83.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_83, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_87(2);
  tmpVar1_87 = Tuple(2);
  tmpVar1_87.SetField(1, Record(vdm_TIMEPARSER_LambdaExpr, length_TIMEPARSER_LambdaExpr));
  tmpVar1_87.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_87, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_91(2);
  tmpVar1_91 = Tuple(2);
  tmpVar1_91.SetField(1, Record(vdm_TIMEPARSER_LetBeST, length_TIMEPARSER_LetBeST));
  tmpVar1_91.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_91, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_95(2);
  tmpVar1_95 = Tuple(2);
  tmpVar1_95.SetField(1, Record(vdm_TIMEPARSER_Lookup, length_TIMEPARSER_Lookup));
  tmpVar1_95.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_95, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_99(2);
  tmpVar1_99 = Tuple(2);
  tmpVar1_99.SetField(1, Record(vdm_TIMEPARSER_Loop, length_TIMEPARSER_Loop));
  tmpVar1_99.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_99, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_103(2);
  tmpVar1_103 = Tuple(2);
  tmpVar1_103.SetField(1, Record(vdm_TIMEPARSER_MapInverse, length_TIMEPARSER_MapInverse));
  tmpVar1_103.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_103, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_107(2);
  tmpVar1_107 = Tuple(2);
  tmpVar1_107.SetField(1, Record(vdm_TIMEPARSER_MatchPattern, length_TIMEPARSER_MatchPattern));
  tmpVar1_107.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_107, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_111(2);
  tmpVar1_111 = Tuple(2);
  tmpVar1_111.SetField(1, Record(vdm_TIMEPARSER_Newobj, length_TIMEPARSER_Newobj));
  tmpVar1_111.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_111, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_115(2);
  tmpVar1_115 = Tuple(2);
  tmpVar1_115.SetField(1, Record(vdm_TIMEPARSER_NonDet, length_TIMEPARSER_NonDet));
  tmpVar1_115.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_115, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_119(2);
  tmpVar1_119 = Tuple(2);
  tmpVar1_119.SetField(1, Record(vdm_TIMEPARSER_Pattern, length_TIMEPARSER_Pattern));
  tmpVar1_119.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_119, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_123(2);
  tmpVar1_123 = Tuple(2);
  tmpVar1_123.SetField(1, Record(vdm_TIMEPARSER_Polyinst, length_TIMEPARSER_Polyinst));
  tmpVar1_123.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_123, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_127(2);
  tmpVar1_127 = Tuple(2);
  tmpVar1_127.SetField(1, Record(vdm_TIMEPARSER_RecTrap, length_TIMEPARSER_RecTrap));
  tmpVar1_127.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_127, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_131(2);
  tmpVar1_131 = Tuple(2);
  tmpVar1_131.SetField(1, Record(vdm_TIMEPARSER_Reccons, length_TIMEPARSER_Reccons));
  tmpVar1_131.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_131, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_135(2);
  tmpVar1_135 = Tuple(2);
  tmpVar1_135.SetField(1, Record(vdm_TIMEPARSER_Recmod, length_TIMEPARSER_Recmod));
  tmpVar1_135.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_135, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_139(2);
  tmpVar1_139 = Tuple(2);
  tmpVar1_139.SetField(1, Record(vdm_TIMEPARSER_Return, length_TIMEPARSER_Return));
  tmpVar1_139.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_139, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_143(2);
  tmpVar1_143 = Tuple(2);
  tmpVar1_143.SetField(1, Record(vdm_TIMEPARSER_Samebaseclass, length_TIMEPARSER_Samebaseclass));
  tmpVar1_143.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_143, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_147(2);
  tmpVar1_147 = Tuple(2);
  tmpVar1_147.SetField(1, Record(vdm_TIMEPARSER_Sameclass, length_TIMEPARSER_Sameclass));
  tmpVar1_147.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_147, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_151(2);
  tmpVar1_151 = Tuple(2);
  tmpVar1_151.SetField(1, Record(vdm_TIMEPARSER_Selfexpr, length_TIMEPARSER_Selfexpr));
  tmpVar1_151.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_151, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_155(2);
  tmpVar1_155 = Tuple(2);
  tmpVar1_155.SetField(1, Record(vdm_TIMEPARSER_Seqlen, length_TIMEPARSER_Seqlen));
  tmpVar1_155.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_155, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_159(2);
  tmpVar1_159 = Tuple(2);
  tmpVar1_159.SetField(1, Record(vdm_TIMEPARSER_Seqmapover, length_TIMEPARSER_Seqmapover));
  tmpVar1_159.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_159, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_163(2);
  tmpVar1_163 = Tuple(2);
  tmpVar1_163.SetField(1, Record(vdm_TIMEPARSER_Setcard, length_TIMEPARSER_Setcard));
  tmpVar1_163.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_163, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_167(2);
  tmpVar1_167 = Tuple(2);
  tmpVar1_167.SetField(1, Record(vdm_TIMEPARSER_Setrng, length_TIMEPARSER_Setrng));
  tmpVar1_167.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_167, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_171(2);
  tmpVar1_171 = Tuple(2);
  tmpVar1_171.SetField(1, Record(vdm_TIMEPARSER_Start, length_TIMEPARSER_Start));
  tmpVar1_171.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_171, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_175(2);
  tmpVar1_175 = Tuple(2);
  tmpVar1_175.SetField(1, Record(vdm_TIMEPARSER_Subseq, length_TIMEPARSER_Subseq));
  tmpVar1_175.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_175, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_179(2);
  tmpVar1_179 = Tuple(2);
  tmpVar1_179.SetField(1, Record(vdm_TIMEPARSER_Threadid, length_TIMEPARSER_Threadid));
  tmpVar1_179.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_179, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_183(2);
  tmpVar1_183 = Tuple(2);
  tmpVar1_183.SetField(1, Record(vdm_TIMEPARSER_Trap, length_TIMEPARSER_Trap));
  tmpVar1_183.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_183, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_187(2);
  tmpVar1_187 = Tuple(2);
  tmpVar1_187.SetField(1, Record(vdm_TIMEPARSER_Tupsel, length_TIMEPARSER_Tupsel));
  tmpVar1_187.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_187, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_191(2);
  tmpVar1_191 = Tuple(2);
  tmpVar1_191.SetField(1, Record(vdm_TIMEPARSER_Update, length_TIMEPARSER_Update));
  tmpVar1_191.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_191, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_195(2);
  tmpVar1_195 = Tuple(2);
  tmpVar1_195.SetField(1, Record(vdm_TIMEPARSER_Plus, length_TIMEPARSER_Plus));
  tmpVar1_195.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_195, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_199(2);
  tmpVar1_199 = Tuple(2);
  tmpVar1_199.SetField(1, Record(vdm_TIMEPARSER_Minus, length_TIMEPARSER_Minus));
  tmpVar1_199.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_199, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_203(2);
  tmpVar1_203 = Tuple(2);
  tmpVar1_203.SetField(1, Record(vdm_TIMEPARSER_Mult, length_TIMEPARSER_Mult));
  tmpVar1_203.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_203, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_207(2);
  tmpVar1_207 = Tuple(2);
  tmpVar1_207.SetField(1, Record(vdm_TIMEPARSER_Div, length_TIMEPARSER_Div));
  tmpVar1_207.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_207, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_211(2);
  tmpVar1_211 = Tuple(2);
  tmpVar1_211.SetField(1, Record(vdm_TIMEPARSER_Rem, length_TIMEPARSER_Rem));
  tmpVar1_211.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_211, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_215(2);
  tmpVar1_215 = Tuple(2);
  tmpVar1_215.SetField(1, Record(vdm_TIMEPARSER_Mod, length_TIMEPARSER_Mod));
  tmpVar1_215.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_215, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_219(2);
  tmpVar1_219 = Tuple(2);
  tmpVar1_219.SetField(1, Record(vdm_TIMEPARSER_Intdiv, length_TIMEPARSER_Intdiv));
  tmpVar1_219.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_219, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_223(2);
  tmpVar1_223 = Tuple(2);
  tmpVar1_223.SetField(1, Record(vdm_TIMEPARSER_And, length_TIMEPARSER_And));
  tmpVar1_223.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_223, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_227(2);
  tmpVar1_227 = Tuple(2);
  tmpVar1_227.SetField(1, Record(vdm_TIMEPARSER_Or, length_TIMEPARSER_Or));
  tmpVar1_227.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_227, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_231(2);
  tmpVar1_231 = Tuple(2);
  tmpVar1_231.SetField(1, Record(vdm_TIMEPARSER_Equal, length_TIMEPARSER_Equal));
  tmpVar1_231.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_231, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_235(2);
  tmpVar1_235 = Tuple(2);
  tmpVar1_235.SetField(1, Record(vdm_TIMEPARSER_GreaterThan, length_TIMEPARSER_GreaterThan));
  tmpVar1_235.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_235, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_239(2);
  tmpVar1_239 = Tuple(2);
  tmpVar1_239.SetField(1, Record(vdm_TIMEPARSER_GreaterThanOrEqual, length_TIMEPARSER_GreaterThanOrEqual));
  tmpVar1_239.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_239, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_243(2);
  tmpVar1_243 = Tuple(2);
  tmpVar1_243.SetField(1, Record(vdm_TIMEPARSER_Abs, length_TIMEPARSER_Abs));
  tmpVar1_243.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_243, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_247(2);
  tmpVar1_247 = Tuple(2);
  tmpVar1_247.SetField(1, Record(vdm_TIMEPARSER_Floor, length_TIMEPARSER_Floor));
  tmpVar1_247.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_247, vdm_TIMEMAP_defaultDuration);
  Tuple tmpVar1_251(2);
  tmpVar1_251 = Tuple(2);
  tmpVar1_251.SetField(1, Record(vdm_TIMEPARSER_Not, length_TIMEPARSER_Not));
  tmpVar1_251.SetField(2, Nil());
  varRes_2.Insert(tmpVar1_251, vdm_TIMEMAP_defaultDuration);
  return (Generic) varRes_2;
}
#endif

#ifndef DEF_TIMEMAP_wf_uTimefile

type_13TIMEMAP_ErrorCS vdm_TIMEMAP_wf_uTimefile(const TYPE_TIMEPARSER_Timefile &vdm_TIMEMAP_tf) {
  Set varRes_3;
  {
    Set vdm_TIMEMAP_pos_uerrors;
    Set res_s_6;
    {
      bool succ_46 = true;
      Set e_set_47;      Set riseq_49;      int max_50 = (Int) vdm_TIMEMAP_tf.Length();      for (int i_51 = 1; i_51 <= max_50; i_51++) 
        riseq_49.Insert((Int) i_51);      e_set_47 = riseq_49;
      Int vdm_TIMEMAP_i;
      {
        Generic tmpe_54;
        for (int bb_53 = e_set_47.First(tmpe_54); bb_53; bb_53 = e_set_47.Next(tmpe_54)) {
          Int elem_52 = tmpe_54;
          succ_46 = true;          vdm_TIMEMAP_i = elem_52;          if (succ_46) {
            Record res_s_7(vdm_TIMEMAP_Error, length_TIMEMAP_Error);
            res_s_7 = Record(vdm_TIMEMAP_Error, length_TIMEMAP_Error);
            res_s_7.SetField(1, (Record) vdm_TIMEMAP_tf[vdm_TIMEMAP_i.GetValue()]);
            Set tmpVar_11;
            Set res_s_12;
            {
              bool succ_27 = true;
              Set e_set_28;              Sequence unArg_29;              Sequence resSeq_30;              double from_33 = (vdm_TIMEMAP_i + (Int) 1).GetValue();              double to_34 = ((Int) vdm_TIMEMAP_tf.Length()).GetValue();              int max_35 = (Int) vdm_TIMEMAP_tf.Length();              for (int i_36 = 1; i_36 <= max_35; i_36++) 
                if (from_33 <= i_36 && i_36 <= to_34) 
                  resSeq_30.ImpAppend(vdm_TIMEMAP_tf[i_36]);              unArg_29 = resSeq_30;              e_set_28 = unArg_29.Elems();
              Record vdm_TIMEMAP_f;
              {
                Generic tmpe_45;
                for (int bb_44 = e_set_28.First(tmpe_45); bb_44; bb_44 = e_set_28.Next(tmpe_45)) {
                  Record elem_43 = tmpe_45;
                  succ_27 = true;                  vdm_TIMEMAP_f = elem_43;                  if (succ_27) {
                    Bool pred_14;
                    Record var2_16;
                    Record tmpRE_20 = (Record) vdm_TIMEMAP_tf[vdm_TIMEMAP_i.GetValue()];
                    int mu_21, mu_22;
                    if (tmpRE_20.Is(vdm_TIMEPARSER_TypedEntry)) {
                      mu_21 = pos_TIMEPARSER_TypedEntry_cid;
                      mu_22 = pos_TIMEPARSER_TypedEntry_time;
                    }
                    else 
                      if (tmpRE_20.Is(vdm_TIMEPARSER_SimpleEntry)) {
                        mu_21 = pos_TIMEPARSER_SimpleEntry_cid;
                        mu_22 = pos_TIMEPARSER_SimpleEntry_time;
                      }
                      else 
                        RunTime(L"Unknown record field selector in record modifier expression");
                    Record val_23(vdm_TIMEPARSER_ContextInfo, length_TIMEPARSER_ContextInfo);
                    if (((Record) vdm_TIMEMAP_f).Is(vdm_TIMEPARSER_TypedEntry)) 
                      val_23 = ((Record) vdm_TIMEMAP_f).GetField(pos_TIMEPARSER_TypedEntry_cid);
                    else 
                      if (((Record) vdm_TIMEMAP_f).Is(vdm_TIMEPARSER_SimpleEntry)) 
                        val_23 = ((Record) vdm_TIMEMAP_f).GetField(pos_TIMEPARSER_SimpleEntry_cid);
                      else 
                        RunTime(L"Unknown record field selector");
                    tmpRE_20.SetField(mu_21, val_23);
                    Int val_25;
                    if (((Record) vdm_TIMEMAP_f).Is(vdm_TIMEPARSER_TypedEntry)) 
                      val_25 = ((Record) vdm_TIMEMAP_f).GetField(pos_TIMEPARSER_TypedEntry_time);
                    else 
                      if (((Record) vdm_TIMEMAP_f).Is(vdm_TIMEPARSER_SimpleEntry)) 
                        val_25 = ((Record) vdm_TIMEMAP_f).GetField(pos_TIMEPARSER_SimpleEntry_time);
                      else 
                        RunTime(L"Unknown record field selector");
                    tmpRE_20.SetField(mu_22, val_25);
                    var2_16 = tmpRE_20;
                    pred_14 = (Bool) (vdm_TIMEMAP_f == var2_16);
                    if (pred_14.GetValue()) { res_s_12.Insert(vdm_TIMEMAP_f); }
                  }
                }
              }
            }
            tmpVar_11 = res_s_12;
            res_s_7.SetField(2, tmpVar_11);
            res_s_6.Insert(res_s_7);
          }
        }
      }
    }
    vdm_TIMEMAP_pos_uerrors = res_s_6;
    Set res_s_55;
    {
      bool succ_61 = true;

      Record vdm_TIMEMAP_e(vdm_TIMEMAP_Error, length_TIMEMAP_Error);
      {
        Generic tmpe_65;
        for (int bb_64 = vdm_TIMEMAP_pos_uerrors.First(tmpe_65); bb_64; bb_64 = vdm_TIMEMAP_pos_uerrors.Next(tmpe_65)) {
          Record elem_63 = tmpe_65;
          succ_61 = true;          vdm_TIMEMAP_e = elem_63;          if (succ_61) {
            Bool pred_57;
            Set var1_58;
            if (vdm_TIMEMAP_e.Is(vdm_TIMEMAP_Error)) 
              var1_58 = vdm_TIMEMAP_e.GetField(pos_TIMEMAP_Error_reps);
            else 
              RunTime(L"Unknown record field selector");
            pred_57 = (Bool) !(var1_58 == Set());
            if (pred_57.GetValue()) { res_s_55.Insert(vdm_TIMEMAP_e); }
          }
        }
      }
    }
    varRes_3 = res_s_55;
  }
  return (Generic) varRes_3;
}
#endif

